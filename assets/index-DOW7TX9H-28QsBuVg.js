import{L as Dt,e as xs,l as Ks,x as Ki,g as Xe,f as Ui,D as we,U as Us,h as Je,s as Fs,G as Fi,i as be,k as At,B as xe,m as Hi,Y as Hs,n as Ge,o as _t,q as qe,V as Ms,H as zs,$ as Bs,F as Mi,t as Kn,y as Os,P as Ps,S as Es,X as zi,u as js,v as Qs,w as Ds,W as As}from"./index-C3gmW6XD.js";import{z as Jr,K as Nr}from"./index-C3gmW6XD.js";var _s=Object.defineProperty,qs=Object.defineProperties,$s=Object.getOwnPropertyDescriptors,Ct=Object.getOwnPropertySymbols,Un=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,mi=(e,t,i)=>t in e?_s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,f=(e,t)=>{for(var i in t||(t={}))Un.call(t,i)&&mi(e,i,t[i]);if(Ct)for(var i of Ct(t))Fn.call(t,i)&&mi(e,i,t[i]);return e},Re=(e,t)=>qs(e,$s(t)),Ne=(e,t)=>{var i={};for(var n in e)Un.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&Ct)for(var n of Ct(e))t.indexOf(n)<0&&Fn.call(e,n)&&(i[n]=e[n]);return i},L=(e,t,i)=>(mi(e,typeof t!="symbol"?t+"":t,i),i),A=(e,t,i)=>new Promise((n,s)=>{var l=o=>{try{r(i.next(o))}catch(c){s(c)}},a=o=>{try{r(i.throw(o))}catch(c){s(c)}},r=o=>o.done?n(o.value):Promise.resolve(o.value).then(l,a);r((i=i.apply(e,t)).next())});function el(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function tl(e){return`"${e.replace(il,nl)}"`}const il=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function nl(e){return sl[e.charCodeAt(0)]}const sl=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],ll=Object.freeze({});function ol(e,t,i=Ds){const n=new Map;for(const y of Object.values(Es))n.set(y,al(t,y));let s,l=Array.isArray(e),a=[e],r=-1,o=[],c=e,d,u;const h=[],p=[];do{r++;const y=r===a.length,W=y&&o.length!==0;if(y){if(d=p.length===0?void 0:h[h.length-1],c=u,u=p.pop(),W)if(l){c=c.slice();let G=0;for(const[x,K]of o){const g=x-G;K===null?(c.splice(g,1),G++):c[g]=K}}else{c=Object.defineProperties({},Object.getOwnPropertyDescriptors(c));for(const[G,x]of o)c[G]=x}r=s.index,a=s.keys,o=s.edits,l=s.inArray,s=s.prev}else if(u){if(d=l?r:a[r],c=u[d],c==null)continue;h.push(d)}let I;if(!Array.isArray(c)){var b,Z;zi(c)||js(!1,`Invalid AST Node: ${Qs(c)}.`);const G=y?(b=n.get(c.kind))===null||b===void 0?void 0:b.leave:(Z=n.get(c.kind))===null||Z===void 0?void 0:Z.enter;if(I=G==null?void 0:G.call(t,c,d,u,h,p),I===ll)break;if(I===!1){if(!y){h.pop();continue}}else if(I!==void 0&&(o.push([d,I]),!y))if(zi(I))c=I;else{h.pop();continue}}if(I===void 0&&W&&o.push([d,c]),y)h.pop();else{var S;s={inArray:l,index:r,keys:a,edits:o,prev:s},l=Array.isArray(c),a=l?c:(S=i[c.kind])!==null&&S!==void 0?S:[],r=-1,o=[],u&&p.push(u),u=c}}while(s!==void 0);return o.length!==0?o[o.length-1][1]:e}function al(e,t){const i=e[t];return typeof i=="object"?i:typeof i=="function"?{enter:i,leave:void 0}:{enter:e.enter,leave:e.leave}}function Hn(e){return ol(e,cl)}const rl=80,cl={Name:{leave:e=>e.value},Variable:{leave:e=>"$"+e.name},Document:{leave:e=>R(e.definitions,`

`)},OperationDefinition:{leave(e){const t=T("(",R(e.variableDefinitions,", "),")"),i=R([e.operation,R([e.name,t]),R(e.directives," ")]," ");return(i==="query"?"":i+" ")+e.selectionSet}},VariableDefinition:{leave:({variable:e,type:t,defaultValue:i,directives:n})=>e+": "+t+T(" = ",i)+T(" ",R(n," "))},SelectionSet:{leave:({selections:e})=>ue(e)},Field:{leave({alias:e,name:t,arguments:i,directives:n,selectionSet:s}){const l=T("",e,": ")+t;let a=l+T("(",R(i,", "),")");return a.length>rl&&(a=l+T(`(
`,Wt(R(i,`
`)),`
)`)),R([a,R(n," "),s]," ")}},Argument:{leave:({name:e,value:t})=>e+": "+t},FragmentSpread:{leave:({name:e,directives:t})=>"..."+e+T(" ",R(t," "))},InlineFragment:{leave:({typeCondition:e,directives:t,selectionSet:i})=>R(["...",T("on ",e),R(t," "),i]," ")},FragmentDefinition:{leave:({name:e,typeCondition:t,variableDefinitions:i,directives:n,selectionSet:s})=>`fragment ${e}${T("(",R(i,", "),")")} on ${t} ${T("",R(n," ")," ")}`+s},IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:({value:e,block:t})=>t?As(e):tl(e)},BooleanValue:{leave:({value:e})=>e?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+R(e,", ")+"]"},ObjectValue:{leave:({fields:e})=>"{"+R(e,", ")+"}"},ObjectField:{leave:({name:e,value:t})=>e+": "+t},Directive:{leave:({name:e,arguments:t})=>"@"+e+T("(",R(t,", "),")")},NamedType:{leave:({name:e})=>e},ListType:{leave:({type:e})=>"["+e+"]"},NonNullType:{leave:({type:e})=>e+"!"},SchemaDefinition:{leave:({description:e,directives:t,operationTypes:i})=>T("",e,`
`)+R(["schema",R(t," "),ue(i)]," ")},OperationTypeDefinition:{leave:({operation:e,type:t})=>e+": "+t},ScalarTypeDefinition:{leave:({description:e,name:t,directives:i})=>T("",e,`
`)+R(["scalar",t,R(i," ")]," ")},ObjectTypeDefinition:{leave:({description:e,name:t,interfaces:i,directives:n,fields:s})=>T("",e,`
`)+R(["type",t,T("implements ",R(i," & ")),R(n," "),ue(s)]," ")},FieldDefinition:{leave:({description:e,name:t,arguments:i,type:n,directives:s})=>T("",e,`
`)+t+(Bi(i)?T(`(
`,Wt(R(i,`
`)),`
)`):T("(",R(i,", "),")"))+": "+n+T(" ",R(s," "))},InputValueDefinition:{leave:({description:e,name:t,type:i,defaultValue:n,directives:s})=>T("",e,`
`)+R([t+": "+i,T("= ",n),R(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:e,name:t,interfaces:i,directives:n,fields:s})=>T("",e,`
`)+R(["interface",t,T("implements ",R(i," & ")),R(n," "),ue(s)]," ")},UnionTypeDefinition:{leave:({description:e,name:t,directives:i,types:n})=>T("",e,`
`)+R(["union",t,R(i," "),T("= ",R(n," | "))]," ")},EnumTypeDefinition:{leave:({description:e,name:t,directives:i,values:n})=>T("",e,`
`)+R(["enum",t,R(i," "),ue(n)]," ")},EnumValueDefinition:{leave:({description:e,name:t,directives:i})=>T("",e,`
`)+R([t,R(i," ")]," ")},InputObjectTypeDefinition:{leave:({description:e,name:t,directives:i,fields:n})=>T("",e,`
`)+R(["input",t,R(i," "),ue(n)]," ")},DirectiveDefinition:{leave:({description:e,name:t,arguments:i,repeatable:n,locations:s})=>T("",e,`
`)+"directive @"+t+(Bi(i)?T(`(
`,Wt(R(i,`
`)),`
)`):T("(",R(i,", "),")"))+(n?" repeatable":"")+" on "+R(s," | ")},SchemaExtension:{leave:({directives:e,operationTypes:t})=>R(["extend schema",R(e," "),ue(t)]," ")},ScalarTypeExtension:{leave:({name:e,directives:t})=>R(["extend scalar",e,R(t," ")]," ")},ObjectTypeExtension:{leave:({name:e,interfaces:t,directives:i,fields:n})=>R(["extend type",e,T("implements ",R(t," & ")),R(i," "),ue(n)]," ")},InterfaceTypeExtension:{leave:({name:e,interfaces:t,directives:i,fields:n})=>R(["extend interface",e,T("implements ",R(t," & ")),R(i," "),ue(n)]," ")},UnionTypeExtension:{leave:({name:e,directives:t,types:i})=>R(["extend union",e,R(t," "),T("= ",R(i," | "))]," ")},EnumTypeExtension:{leave:({name:e,directives:t,values:i})=>R(["extend enum",e,R(t," "),ue(i)]," ")},InputObjectTypeExtension:{leave:({name:e,directives:t,fields:i})=>R(["extend input",e,R(t," "),ue(i)]," ")}};function R(e,t=""){var i;return(i=e==null?void 0:e.filter(n=>n).join(t))!==null&&i!==void 0?i:""}function ue(e){return T(`{
`,Wt(R(e,`
`)),`
}`)}function T(e,t,i=""){return t!=null&&t!==""?e+t+i:""}function Wt(e){return T("  ",e.replace(/\n/g,`
  `))}function Bi(e){var t;return(t=e==null?void 0:e.some(i=>i.includes(`
`)))!==null&&t!==void 0?t:!1}var dl=Object.defineProperty,ul=(e,t,i)=>t in e?dl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,V=(e,t,i)=>(ul(e,typeof t!="symbol"?t+"":t,i),i),Oi,ml=Object.defineProperty,pl=(e,t,i)=>t in e?ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Pi=(e,t,i)=>(pl(e,typeof t!="symbol"?t+"":t,i),i),_=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(_||{});const Ei={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},ji={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Zt={};function Ii(e){if(Zt[e])return Zt[e];const t=globalThis[e],i=t.prototype,n=e in Ei?Ei[e]:void 0,s=!!(n&&n.every(r=>{var o,c;return!!((c=(o=Object.getOwnPropertyDescriptor(i,r))==null?void 0:o.get)!=null&&c.toString().includes("[native code]"))})),l=e in ji?ji[e]:void 0,a=!!(l&&l.every(r=>{var o;return typeof i[r]=="function"&&((o=i[r])==null?void 0:o.toString().includes("[native code]"))}));if(s&&a)return Zt[e]=t.prototype,t.prototype;try{const r=document.createElement("iframe");document.body.appendChild(r);const o=r.contentWindow;if(!o)return t.prototype;const c=o[e].prototype;return document.body.removeChild(r),c?Zt[e]=c:i}catch{return i}}const qt={};function fe(e,t,i){var n;const s=`${e}.${String(i)}`;if(qt[s])return qt[s].call(t);const l=Ii(e),a=(n=Object.getOwnPropertyDescriptor(l,i))==null?void 0:n.get;return a?(qt[s]=a,a.call(t)):t[i]}const $t={};function Mn(e,t,i){const n=`${e}.${String(i)}`;if($t[n])return $t[n].bind(t);const s=Ii(e)[i];return typeof s!="function"?t[i]:($t[n]=s,s.bind(t))}function hl(e){return fe("Node",e,"childNodes")}function bl(e){return fe("Node",e,"parentNode")}function Zl(e){return fe("Node",e,"parentElement")}function yl(e){return fe("Node",e,"textContent")}function Gl(e,t){return Mn("Node",e,"contains")(t)}function Xl(e){return Mn("Node",e,"getRootNode")()}function Vl(e){return!e||!("host"in e)?null:fe("ShadowRoot",e,"host")}function Il(e){return e.styleSheets}function Wl(e){return!e||!("shadowRoot"in e)?null:fe("Element",e,"shadowRoot")}function gl(e,t){return fe("Element",e,"querySelector")(t)}function Sl(e,t){return fe("Element",e,"querySelectorAll")(t)}function Rl(){return Ii("MutationObserver").constructor}const q={childNodes:hl,parentNode:bl,parentElement:Zl,textContent:yl,contains:Gl,getRootNode:Xl,host:Vl,styleSheets:Il,shadowRoot:Wl,querySelector:gl,querySelectorAll:Sl,mutationObserver:Rl};function zn(e){return e.nodeType===e.ELEMENT_NODE}function it(e){const t=e&&"host"in e&&"mode"in e&&q.host(e)||null;return!!(t&&"shadowRoot"in t&&q.shadowRoot(t)===e)}function nt(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function fl(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Cl(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const i=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?i.push("layer"):e.layerName&&i.push(`layer(${e.layerName})`),e.supportsText&&i.push(`supports(${e.supportsText})`),e.media.length&&i.push(e.media.mediaText),i.join(" ")+";"}function kt(e){try{const t=e.rules||e.cssRules;if(!t)return null;const i=Array.from(t,n=>Bn(n,e.href)).join("");return fl(i)}catch{return null}}function Bn(e,t){if(vl(e)){let i;try{i=kt(e.styleSheet)||Cl(e)}catch{i=e.cssText}return e.styleSheet.href?vt(i,e.styleSheet.href):i}else{let i=e.cssText;return Yl(e)&&e.selectorText.includes(":")&&(i=kl(i)),t?vt(i,t):i}}function kl(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function vl(e){return"styleSheet"in e}function Yl(e){return"selectorText"in e}class On{constructor(){Pi(this,"idNodeMap",new Map),Pi(this,"nodeMetaMap",new WeakMap)}getId(t){var i;if(!t)return-1;const n=(i=this.getMeta(t))==null?void 0:i.id;return n??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const i=this.getId(t);this.idNodeMap.delete(i),t.childNodes&&t.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,i){const n=i.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,i)}replace(t,i){const n=this.getNode(t);if(n){const s=this.nodeMetaMap.get(n);s&&this.nodeMetaMap.set(i,s)}this.idNodeMap.set(t,i)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ll(){return new On}function Wi({element:e,maskInputOptions:t,tagName:i,type:n,value:s,overwriteRecord:l,maskInputFn:a}){let r=s||"";return jn({maskInputOptions:t,tagName:i,type:n,overwriteRecord:l})&&(a?r=a(r,e):r="*".repeat(r.length)),r}function Pe(e){return e.toLowerCase()}const Qi="__rrweb_original__";function Jl(e){const t=e.getContext("2d");if(!t)return!0;const i=50;for(let n=0;n<e.width;n+=i)for(let s=0;s<e.height;s+=i){const l=t.getImageData,a=Qi in l?l[Qi]:l;if(new Uint32Array(a.call(t,n,s,Math.min(i,e.width-n),Math.min(i,e.height-s)).data.buffer).some(r=>r!==0))return!1}return!0}function gi(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Pe(t):null}function Pn(e,t){var i;let n;try{n=new URL(e,t??window.location.href)}catch{return null}const s=/\.([0-9a-z]+)(?:$)/i,l=n.pathname.match(s);return(i=l==null?void 0:l[1])!=null?i:null}function Nl(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}const Tl=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wl=/^(?:[a-z+]+:)?\/\//i,xl=/^www\..*/i,Kl=/^(data:)([^,]*),(.*)/i;function vt(e,t){return(e||"").replace(Tl,(i,n,s,l,a,r)=>{const o=s||a||r,c=n||l||"";if(!o)return i;if(wl.test(o)||xl.test(o))return`url(${c}${o}${c})`;if(Kl.test(o))return`url(${c}${o}${c})`;if(o[0]==="/")return`url(${c}${Nl(t)+o}${c})`;const d=t.split("/"),u=o.split("/");d.pop();for(const h of u)h!=="."&&(h===".."?d.pop():d.push(h));return`url(${c}${d.join("/")}${c})`})}function Si(e){return e=e.replace(/[^ -~]+/g,""),e=(e==null?void 0:e.split(" ").map(t=>Math.random().toString(20).substr(2,t.length)).join(" "))||"",e}function pi(e){return e==="img"||e==="video"||e==="audio"||e==="source"}const Ul=new RegExp(/[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*/),Fl=new RegExp(/[0-9]{9,16}/),Hl=new RegExp(/[0-9]{3}-?[0-9]{2}-?[0-9]{4}/),Ml=new RegExp(/[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}/),zl=new RegExp(/[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}/),Bl=new RegExp(/[0-9]{1,5}.?[0-9]{0,3}\s[a-zA-Z]{2,30}\s[a-zA-Z]{2,15}/),Ol=new RegExp(/(?:[0-9]{1,3}.){3}[0-9]{1,3}/),Pl=[Ul,Fl,Hl,Ml,zl,Bl,Ol];function En(e){return e?Pl.some(t=>t.test(e)):!1}const jn=({maskInputOptions:e,tagName:t,type:i,overwriteRecord:n})=>{const s=i&&i.toLowerCase();return n!=="true"&&(!!e[t.toLowerCase()]||!!(s&&e[s]))};let El=1;const jl=new RegExp("[^a-z0-9-_:]"),at=-2;function Qn(){return El++}function Ql(e){if(e instanceof HTMLFormElement)return"form";const t=Pe(e.tagName);return jl.test(t)?"div":t}let Ke,Di;const Dl=/^[^ \t\n\r\u000c]+/,Al=/^[, \t\n\r\u000c]+/;function _l(e,t){if(t.trim()==="")return t;let i=0;function n(l){let a;const r=l.exec(t.substring(i));return r?(a=r[0],i+=a.length,a):""}const s=[];for(;n(Al),!(i>=t.length);){let l=n(Dl);if(l.slice(-1)===",")l=Yt(e,l.substring(0,l.length-1)),s.push(l);else{let a="";l=Yt(e,l);let r=!1;for(;;){const o=t.charAt(i);if(o===""){s.push((l+a).trim());break}else if(r)o===")"&&(r=!1);else if(o===","){i+=1,s.push((l+a).trim());break}else o==="("&&(r=!0);a+=o,i+=1}}}return s.join(", ")}const Ai=new WeakMap;function Yt(e,t){return!t||t.trim()===""?t:Ri(e,t)}function ql(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ri(e,t){let i=Ai.get(e);if(i||(i=e.createElement("a"),Ai.set(e,i)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return i.setAttribute("href",t),i.href}function Dn(e,t,i,n){return n&&(i==="src"||i==="href"&&!(t==="use"&&n[0]==="#")||i==="xlink:href"&&n[0]!=="#"||i==="background"&&(t==="table"||t==="td"||t==="th")?Yt(e,n):i==="srcset"?_l(e,n):i==="style"?vt(n,Ri(e)):t==="object"&&i==="data"?Yt(e,n):n)}function An(e,t,i){return(e==="video"||e==="audio")&&t==="autoplay"}function _i(e,t,i){try{if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}if(i)return e.matches(i)}catch{}return!1}function Lt(e,t,i){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return i?Lt(q.parentNode(e),t,i):!1;for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return i?Lt(q.parentNode(e),t,i):!1}function _n(e,t,i,n){let s;if(zn(e)){if(s=e,!q.childNodes(s).length)return!1}else{if(q.parentElement(e)===null)return!1;s=q.parentElement(e)}try{if(typeof t=="string"){if(n){if(s.closest(`.${t}`))return!0}else if(s.classList.contains(t))return!0}else if(Lt(s,t,n))return!0;if(i){if(n){if(s.closest(i))return!0}else if(s.matches(i))return!0}}catch{}return!1}function $l(e,t,i){const n=e.contentWindow;if(!n)return;let s=!1,l;try{l=n.document.readyState}catch{return}if(l!=="complete"){const r=setTimeout(()=>{s||(t(),s=!0)},i);e.addEventListener("load",()=>{clearTimeout(r),s=!0,t()});return}const a="about:blank";if(n.location.href!==a||e.src===a||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function eo(e,t,i){let n=!1,s;try{s=e.sheet}catch{return}if(s)return;const l=setTimeout(()=>{n||(t(),n=!0)},i);e.addEventListener("load",()=>{clearTimeout(l),n=!0,t()})}function to(e,t){const{doc:i,mirror:n,blockClass:s,blockSelector:l,needsMask:a,inlineStylesheet:r,maskInputOptions:o={},maskTextClass:c,maskTextFn:d,maskInputFn:u,dataURLOptions:h={},inlineImages:p,recordCanvas:b,keepIframeSrcFn:Z,newlyAddedElement:S=!1,privacySetting:y}=t,W=io(i,n);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:_.Document,childNodes:[],compatMode:e.compatMode}:{type:_.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:_.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:W};case e.ELEMENT_NODE:return so(e,{doc:i,blockClass:s,blockSelector:l,inlineStylesheet:r,maskInputOptions:o,maskInputFn:u,maskTextClass:c,dataURLOptions:h,inlineImages:p,recordCanvas:b,keepIframeSrcFn:Z,newlyAddedElement:S,privacySetting:y,rootId:W});case e.TEXT_NODE:return no(e,{doc:i,needsMask:a,maskTextFn:d,privacySetting:y,rootId:W});case e.CDATA_SECTION_NODE:return{type:_.CDATA,textContent:"",rootId:W};case e.COMMENT_NODE:return{type:_.Comment,textContent:q.textContent(e)||"",rootId:W};default:return!1}}function io(e,t){if(!t.hasNode(e))return;const i=t.getId(e);return i===1?void 0:i}function no(e,t){var i,n;const{needsMask:s,maskTextFn:l,privacySetting:a,rootId:r}=t,o=q.parentNode(e),c=o&&o.tagName;let d=q.textContent(e);const u=c==="STYLE"?!0:void 0,h=c==="SCRIPT"?!0:void 0;let p=!1;if(u&&d){try{e.nextSibling||e.previousSibling||(i=o.sheet)!=null&&i.cssRules&&(d=kt(o.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}d=vt(d,Ri(t.doc)),p=!0}h?(d="SCRIPT_PLACEHOLDER",p=!0):c==="NOSCRIPT"&&(d="",p=!0),!u&&!h&&d&&s&&(d=l?l(d,q.parentElement(e)):d.replace(/[\S]/g,"*"));const b=a==="strict",Z=(n=e.parentElement)==null?void 0:n.getAttribute("data-hl-record"),S=a==="default"&&En(d);return(b||S)&&!Z&&!p&&c&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(c)&&d&&(d=Si(d)),{type:_.Text,textContent:d||"",isStyle:u,rootId:r}}function so(e,t){const{doc:i,blockClass:n,blockSelector:s,inlineStylesheet:l,maskInputOptions:a={},maskInputFn:r,maskTextClass:o,dataURLOptions:c={},inlineImages:d,recordCanvas:u,keepIframeSrcFn:h,newlyAddedElement:p=!1,privacySetting:b,rootId:Z}=t;let S=_i(e,n,s);const y=_i(e,o,null),W=b==="strict";let I=Ql(e),G={};const x=e.attributes.length;for(let g=0;g<x;g++){const k=e.attributes[g];An(I,k.name)||(G[k.name]=Dn(i,I,Pe(k.name),k.value))}if(I==="link"&&l){const g=Array.from(i.styleSheets).find(M=>M.href===e.href);let k=null;g&&(k=kt(g)),k&&(delete G.rel,delete G.href,G._cssText=k)}if(I==="style"&&e.sheet&&!(e.innerText||q.textContent(e)||"").trim().length){const g=kt(e.sheet);g&&(G._cssText=g)}if(I==="input"||I==="textarea"||I==="select"){const g=e.value,k=e.checked;G.type!=="radio"&&G.type!=="checkbox"&&G.type!=="submit"&&G.type!=="button"&&g?G.value=Wi({element:e,type:gi(e),tagName:I,value:g,overwriteRecord:e.getAttribute("data-hl-record"),maskInputOptions:a,maskInputFn:r}):k&&(G.checked=k)}if(I==="option"&&(e.selected&&!a.select?G.selected=!0:delete G.selected),I==="dialog"&&e.open&&(G.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal"),I==="canvas"&&u){if(e.__context==="2d")Jl(e)||(G.rr_dataURL=e.toDataURL(c.type,c.quality));else if(!("__context"in e)){const g=e.toDataURL(c.type,c.quality),k=i.createElement("canvas");k.width=e.width,k.height=e.height;const M=k.toDataURL(c.type,c.quality);g!==M&&(G.rr_dataURL=g)}}if(I==="img"&&d&&!S&&!y&&!W){Ke||(Ke=i.createElement("canvas"),Di=Ke.getContext("2d"));const g=e,k=g.currentSrc||g.getAttribute("src")||"<unknown-src>",M=g.crossOrigin,J=()=>{g.removeEventListener("load",J);try{Ke.width=g.naturalWidth,Ke.height=g.naturalHeight,Di.drawImage(g,0,0),G.rr_dataURL=Ke.toDataURL(c.type,c.quality)}catch(z){if(g.crossOrigin!=="anonymous"){g.crossOrigin="anonymous",g.complete&&g.naturalWidth!==0?J():g.addEventListener("load",J);return}else console.warn(`Cannot inline img src=${k}! Error: ${z}`)}g.crossOrigin==="anonymous"&&(M?G.crossOrigin=M:g.removeAttribute("crossorigin"))};g.complete&&g.naturalWidth!==0?J():g.addEventListener("load",J)}if(I==="audio"||I==="video"){const g=G;g.rr_mediaState=e.paused?"paused":"played",g.rr_mediaCurrentTime=e.currentTime,g.rr_mediaPlaybackRate=e.playbackRate,g.rr_mediaMuted=e.muted,g.rr_mediaLoop=e.loop,g.rr_mediaVolume=e.volume}if(p||(e.scrollLeft&&(G.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(G.rr_scrollTop=e.scrollTop)),S||y||W&&pi(I)){const{width:g,height:k}=e.getBoundingClientRect();G={class:G.class,rr_width:`${g}px`,rr_height:`${k}px`}}W&&pi(I)&&(S=!0),I==="iframe"&&!h(G.src)&&(e.contentDocument||(G.rr_src=G.src),delete G.src);let K;try{customElements.get(I)&&(K=!0)}catch{}if(d&&I==="video"){const g=e;if(g.src===""||g.src.indexOf("blob:")!==-1){const{width:k,height:M}=e.getBoundingClientRect();G={width:k,height:M,rr_width:`${k}px`,rr_height:`${M}px`,rr_inlined_video:!0},I="canvas";const J=i.createElement("canvas");J.width=e.width,J.height=e.height,G.rr_dataURL=J.toDataURL(c.type,c.quality)}}return{type:_.Element,tagName:I,attributes:G,childNodes:[],isSVG:ql(e)||void 0,needBlock:S,needMask:y,rootId:Z,isCustom:K}}function E(e){return e==null?"":e.toLowerCase()}function lo(e,t){return!!(t.comment&&e.type===_.Comment||e.type===_.Element&&(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Pn(e.attributes.href)==="js")||t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(E(e.attributes.name).match(/^msapplication-tile(image|color)$/)||E(e.attributes.name)==="application-name"||E(e.attributes.rel)==="icon"||E(e.attributes.rel)==="apple-touch-icon"||E(e.attributes.rel)==="shortcut icon"))||e.tagName==="meta"&&(t.headMetaDescKeywords&&E(e.attributes.name).match(/^description|keywords$/)||t.headMetaSocial&&(E(e.attributes.property).match(/^(og|twitter|fb):/)||E(e.attributes.name).match(/^(og|twitter):/)||E(e.attributes.name)==="pinterest")||t.headMetaRobots&&(E(e.attributes.name)==="robots"||E(e.attributes.name)==="googlebot"||E(e.attributes.name)==="bingbot")||t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0||t.headMetaAuthorship&&(E(e.attributes.name)==="author"||E(e.attributes.name)==="generator"||E(e.attributes.name)==="framework"||E(e.attributes.name)==="publisher"||E(e.attributes.name)==="progid"||E(e.attributes.property).match(/^article:/)||E(e.attributes.property).match(/^product:/))||t.headMetaVerification&&(E(e.attributes.name)==="google-site-verification"||E(e.attributes.name)==="yandex-verification"||E(e.attributes.name)==="csrf-token"||E(e.attributes.name)==="p:domain_verify"||E(e.attributes.name)==="verify-v1"||E(e.attributes.name)==="verification"||E(e.attributes.name)==="shopify-checkout-api-token"))))}function Me(e,t){const{doc:i,mirror:n,blockClass:s,blockSelector:l,maskTextClass:a,maskTextSelector:r,skipChild:o=!1,inlineStylesheet:c=!0,maskInputOptions:d={},maskTextFn:u,maskInputFn:h,slimDOMOptions:p,dataURLOptions:b={},inlineImages:Z=!1,recordCanvas:S=!1,onSerialize:y,onIframeLoad:W,iframeLoadTimeout:I=5e3,onStylesheetLoad:G,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:K=()=>!1,newlyAddedElement:g=!1,privacySetting:k}=t;let{needsMask:M}=t,{preserveWhiteSpace:J=!0}=t;M||(M=_n(e,a,r,M===void 0));const z=to(e,{doc:i,mirror:n,blockClass:s,blockSelector:l,needsMask:M,inlineStylesheet:c,maskInputOptions:d,maskTextClass:a,maskTextFn:u,maskInputFn:h,dataURLOptions:b,inlineImages:Z,recordCanvas:S,keepIframeSrcFn:K,newlyAddedElement:g,privacySetting:k});if(!z)return console.warn(e,"not serialized"),null;let se;n.hasNode(e)?se=n.getId(e):lo(z,p)||!J&&z.type===_.Text&&!z.isStyle&&!z.textContent.replace(/^\s+|\s+$/gm,"").length?se=at:se=Qn();const Y=Object.assign(z,{id:se});if(n.add(e,Y),se===at)return null;y&&y(e);let m=!o,X=k,C=k==="strict";if(Y.type===_.Element){if(m=m&&!Y.needBlock,C||(C=!!Y.needBlock||!!Y.needMask),X=C?"strict":X,C&&pi(Y.tagName)){const v=e.cloneNode();v.src="",n.add(v,Y)}delete Y.needBlock,delete Y.needMask;const N=q.shadowRoot(e);N&&nt(N)&&(Y.isShadowHost=!0)}if((Y.type===_.Document||Y.type===_.Element)&&m){p.headWhitespace&&Y.type===_.Element&&Y.tagName==="head"&&(J=!1);const N={doc:i,mirror:n,blockClass:s,blockSelector:l,needsMask:M,maskTextClass:a,maskTextSelector:r,skipChild:o,inlineStylesheet:c,maskInputOptions:d,maskTextFn:u,maskInputFn:h,slimDOMOptions:p,dataURLOptions:b,inlineImages:Z,recordCanvas:S,preserveWhiteSpace:J,onSerialize:y,onIframeLoad:W,iframeLoadTimeout:I,onStylesheetLoad:G,stylesheetLoadTimeout:x,keepIframeSrcFn:K,privacySetting:X};if(!(Y.type===_.Element&&Y.tagName==="textarea"&&Y.attributes.value!==void 0))for(const oe of Array.from(q.childNodes(e))){const $=Me(oe,N);$&&Y.childNodes.push($)}let v=null;if(zn(e)&&(v=q.shadowRoot(e)))for(const oe of Array.from(q.childNodes(v))){const $=Me(oe,N);$&&(nt(v)&&($.isShadow=!0),Y.childNodes.push($))}}const P=q.parentNode(e);return P&&it(P)&&nt(P)&&(Y.isShadow=!0),Y.type===_.Element&&Y.tagName==="iframe"&&$l(e,()=>{const N=e.contentDocument;if(N&&W){const v=Me(N,{doc:N,mirror:n,blockClass:s,blockSelector:l,needsMask:M,maskTextClass:a,maskTextSelector:r,skipChild:!1,inlineStylesheet:c,maskInputOptions:d,maskTextFn:u,maskInputFn:h,slimDOMOptions:p,dataURLOptions:b,inlineImages:Z,recordCanvas:S,preserveWhiteSpace:J,onSerialize:y,onIframeLoad:W,iframeLoadTimeout:I,onStylesheetLoad:G,stylesheetLoadTimeout:x,keepIframeSrcFn:K,privacySetting:k});v&&W(e,v)}},I),Y.type===_.Element&&Y.tagName==="link"&&typeof Y.attributes.rel=="string"&&(Y.attributes.rel==="stylesheet"||Y.attributes.rel==="preload"&&typeof Y.attributes.href=="string"&&Pn(Y.attributes.href)==="css")&&eo(e,()=>{if(G){const N=Me(e,{doc:i,mirror:n,blockClass:s,blockSelector:l,needsMask:M,maskTextClass:a,maskTextSelector:r,skipChild:!1,inlineStylesheet:c,maskInputOptions:d,maskTextFn:u,maskInputFn:h,slimDOMOptions:p,dataURLOptions:b,inlineImages:Z,recordCanvas:S,preserveWhiteSpace:J,onSerialize:y,onIframeLoad:W,iframeLoadTimeout:I,onStylesheetLoad:G,stylesheetLoadTimeout:x,keepIframeSrcFn:K,privacySetting:k});N&&G(e,N)}},x),Y}function oo(e,t){const{mirror:i=new On,blockClass:n="highlight-block",blockSelector:s=null,maskTextClass:l="highlight-mask",maskTextSelector:a=null,inlineStylesheet:r=!0,inlineImages:o=!1,recordCanvas:c=!1,maskAllInputs:d=!1,maskTextFn:u,maskInputFn:h,slimDOM:p=!1,dataURLOptions:b,preserveWhiteSpace:Z,onSerialize:S,onIframeLoad:y,iframeLoadTimeout:W,onStylesheetLoad:I,stylesheetLoadTimeout:G,keepIframeSrcFn:x=()=>!1,privacySetting:K="default"}=t||{};return Me(e,{doc:e,mirror:i,blockClass:n,blockSelector:s,maskTextClass:l,maskTextSelector:a,skipChild:!1,inlineStylesheet:r,maskInputOptions:d===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:d===!1?{password:!0}:d,maskTextFn:u,maskInputFn:h,slimDOMOptions:p||p==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:p==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:p||{},dataURLOptions:b,inlineImages:o,recordCanvas:c,preserveWhiteSpace:Z,onSerialize:S,onIframeLoad:y,iframeLoadTimeout:W,onStylesheetLoad:I,stylesheetLoadTimeout:G,keepIframeSrcFn:x,newlyAddedElement:!1,privacySetting:K})}var ao=Object.defineProperty,ro=(e,t,i)=>t in e?ao(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ae=(e,t,i)=>(ro(e,typeof t!="symbol"?t+"":t,i),i);class fi{constructor(...t){ae(this,"parentElement",null),ae(this,"parentNode",null),ae(this,"ownerDocument"),ae(this,"firstChild",null),ae(this,"lastChild",null),ae(this,"previousSibling",null),ae(this,"nextSibling",null),ae(this,"ELEMENT_NODE",1),ae(this,"TEXT_NODE",3),ae(this,"nodeType"),ae(this,"nodeName"),ae(this,"RRNodeType")}get childNodes(){const t=[];let i=this.firstChild;for(;i;)t.push(i),i=i.nextSibling;return t}contains(t){if(t instanceof fi){if(t.ownerDocument!==this.ownerDocument)return!1;if(t===this)return!0}else return!1;for(;t.parentNode;){if(t.parentNode===this)return!0;t=t.parentNode}return!1}appendChild(t){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(t,i){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(t){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const qi={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},$i={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},yt={};function Ci(e){if(yt[e])return yt[e];const t=globalThis[e],i=t.prototype,n=e in qi?qi[e]:void 0,s=!!(n&&n.every(r=>{var o,c;return!!((c=(o=Object.getOwnPropertyDescriptor(i,r))==null?void 0:o.get)!=null&&c.toString().includes("[native code]"))})),l=e in $i?$i[e]:void 0,a=!!(l&&l.every(r=>{var o;return typeof i[r]=="function"&&((o=i[r])==null?void 0:o.toString().includes("[native code]"))}));if(s&&a)return yt[e]=t.prototype,t.prototype;try{const r=document.createElement("iframe");document.body.appendChild(r);const o=r.contentWindow;if(!o)return t.prototype;const c=o[e].prototype;return document.body.removeChild(r),c?yt[e]=c:i}catch{return i}}const ei={};function Ce(e,t,i){var n;const s=`${e}.${String(i)}`;if(ei[s])return ei[s].call(t);const l=Ci(e),a=(n=Object.getOwnPropertyDescriptor(l,i))==null?void 0:n.get;return a?(ei[s]=a,a.call(t)):t[i]}const ti={};function qn(e,t,i){const n=`${e}.${String(i)}`;if(ti[n])return ti[n].bind(t);const s=Ci(e)[i];return typeof s!="function"?t[i]:(ti[n]=s,s.bind(t))}function co(e){return Ce("Node",e,"childNodes")}function uo(e){return Ce("Node",e,"parentNode")}function mo(e){return Ce("Node",e,"parentElement")}function po(e){return Ce("Node",e,"textContent")}function ho(e,t){return qn("Node",e,"contains")(t)}function bo(e){return qn("Node",e,"getRootNode")()}function Zo(e){return!e||!("host"in e)?null:Ce("ShadowRoot",e,"host")}function yo(e){return e.styleSheets}function Go(e){return!e||!("shadowRoot"in e)?null:Ce("Element",e,"shadowRoot")}function Xo(e,t){return Ce("Element",e,"querySelector")(t)}function Vo(e,t){return Ce("Element",e,"querySelectorAll")(t)}function $n(){return Ci("MutationObserver").constructor}const w={childNodes:co,parentNode:uo,parentElement:mo,textContent:po,contains:ho,getRootNode:bo,host:Zo,styleSheets:yo,shadowRoot:Go,querySelector:Xo,querySelectorAll:Vo,mutationObserver:$n};function ne(e,t,i=document){const n={capture:!0};return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}const Fe=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let en={map:{},getId(){return console.error(Fe),-1},getNode(){return console.error(Fe),null},removeNodeFromMap(){console.error(Fe)},has(){return console.error(Fe),!1},reset(){console.error(Fe)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(en=new Proxy(en,{get(e,t,i){return t==="map"&&console.error(Fe),Reflect.get(e,t,i)}}));function rt(e,t,i={}){let n=null,s=0;return function(...l){const a=Date.now();!s&&i.leading===!1&&(s=a);const r=t-(a-s),o=this;r<=0||r>t?(n&&(clearTimeout(n),n=null),s=a,e.apply(o,l)):!n&&i.trailing!==!1&&(n=setTimeout(()=>{s=i.leading===!1?0:Date.now(),n=null,e.apply(o,l)},r))}}function Mt(e,t,i,n,s=window){const l=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,n?i:{set(a){setTimeout(()=>{i.set.call(this,a)},0),l&&l.set&&l.set.call(this,a)}}),()=>Mt(e,t,l||{},!0)}function Qe(e,t,i){try{if(!(t in e))return()=>{};const n=e[t],s=i(n);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=s,()=>{e[t]=n}}catch{return()=>{}}}let Jt=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Jt=()=>new Date().getTime());function es(e){var t,i,n,s;const l=e.document;return{left:l.scrollingElement?l.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:l.documentElement.scrollLeft||(l==null?void 0:l.body)&&((t=w.parentElement(l.body))==null?void 0:t.scrollLeft)||((i=l==null?void 0:l.body)==null?void 0:i.scrollLeft)||0,top:l.scrollingElement?l.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(l==null?void 0:l.documentElement.scrollTop)||(l==null?void 0:l.body)&&((n=w.parentElement(l.body))==null?void 0:n.scrollTop)||((s=l==null?void 0:l.body)==null?void 0:s.scrollTop)||0}}function ts(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function is(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function ns(e){return e?e.nodeType===e.ELEMENT_NODE?e:w.parentElement(e):null}const Io=e=>{try{if(e instanceof HTMLElement)return e.tagName==="CANVAS"}catch{return!1}return!1};function ee(e,t,i,n){if(!e)return!1;const s=ns(e);if(!s)return!1;try{if(typeof t=="string"){if(s.classList.contains(t)||n&&s.closest("."+t)!==null)return!0}else if(Lt(s,t,n))return!0}catch{}return!!(i&&(s.matches(i)||n&&s.closest(i)!==null))}function Wo(e,t){return t.getId(e)!==-1}function ii(e,t,i){return e.tagName==="TITLE"&&i.headTitleMutations?!0:t.getId(e)===at}function ss(e,t){if(it(e))return!1;const i=t.getId(e);if(!t.has(i))return!0;const n=w.parentNode(e);return n&&n.nodeType===e.DOCUMENT_NODE?!1:n?ss(n,t):!0}function hi(e){return!!e.changedTouches}function go(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function ls(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function os(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function bi(e){return e?e instanceof fi&&"shadowRoot"in e?!!e.shadowRoot:!!w.shadowRoot(e):!1}class So{constructor(){V(this,"id",1),V(this,"styleIDMap",new WeakMap),V(this,"idStyleMap",new Map)}getId(t){var i;return(i=this.styleIDMap.get(t))!=null?i:-1}has(t){return this.styleIDMap.has(t)}add(t,i){if(this.has(t))return this.getId(t);let n;return i===void 0?n=this.id++:n=i,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function as(e){var t;let i=null;return"getRootNode"in e&&((t=w.getRootNode(e))==null?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&w.host(w.getRootNode(e))&&(i=w.host(w.getRootNode(e))),i}function Ro(e){let t=e,i;for(;i=as(t);)t=i;return t}function fo(e){const t=e.ownerDocument;if(!t)return!1;const i=Ro(e);return w.contains(t,i)}function rs(e){const t=e.ownerDocument;return t?w.contains(t,e)||fo(e):!1}var H=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(H||{}),U=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(U||{}),le=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(le||{}),Ie=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ie||{}),Ee=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ee||{}),He=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(He||{});function tn(e){return"__ln"in e}class Co{constructor(){V(this,"length",0),V(this,"head",null),V(this,"tail",null)}get(t){if(t>=this.length)throw new Error("Position outside of list range");let i=this.head;for(let n=0;n<t;n++)i=(i==null?void 0:i.next)||null;return i}addNode(t){const i={value:t,previous:null,next:null};if(t.__ln=i,t.previousSibling&&tn(t.previousSibling)){const n=t.previousSibling.__ln.next;i.next=n,i.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=i,n&&(n.previous=i)}else if(t.nextSibling&&tn(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;i.previous=n,i.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=i,n&&(n.next=i)}else this.head&&(this.head.previous=i),i.next=this.head,this.head=i;i.next===null&&(this.tail=i),this.length++}removeNode(t){const i=t.__ln;this.head&&(i.previous?(i.previous.next=i.next,i.next?i.next.previous=i.previous:this.tail=i.previous):(this.head=i.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const nn=(e,t)=>`${e}@${t}`;class ko{constructor(){V(this,"frozen",!1),V(this,"locked",!1),V(this,"texts",[]),V(this,"attributes",[]),V(this,"attributeMap",new WeakMap),V(this,"removes",[]),V(this,"mapRemoves",[]),V(this,"movedMap",{}),V(this,"addedSet",new Set),V(this,"movedSet",new Set),V(this,"droppedSet",new Set),V(this,"mutationCb"),V(this,"blockClass"),V(this,"blockSelector"),V(this,"maskTextClass"),V(this,"maskTextSelector"),V(this,"inlineStylesheet"),V(this,"maskInputOptions"),V(this,"maskTextFn"),V(this,"maskInputFn"),V(this,"keepIframeSrcFn"),V(this,"recordCanvas"),V(this,"inlineImages"),V(this,"privacySetting"),V(this,"slimDOMOptions"),V(this,"dataURLOptions"),V(this,"doc"),V(this,"mirror"),V(this,"iframeManager"),V(this,"stylesheetManager"),V(this,"shadowDomManager"),V(this,"canvasManager"),V(this,"processedNodeManager"),V(this,"unattachedDoc"),V(this,"processMutations",t=>{t.forEach(this.processMutation),this.emit()}),V(this,"emit",()=>{if(this.frozen||this.locked)return;const t=[],i=new Set,n=new Co,s=o=>{let c=o,d=at;for(;d===at;)c=c&&c.nextSibling,d=c&&this.mirror.getId(c);return d},l=o=>{const c=w.parentNode(o);if(!c||!rs(o)||c.tagName==="TEXTAREA")return;const d=it(c)?this.mirror.getId(as(o)):this.mirror.getId(c),u=s(o);if(d===-1||u===-1)return n.addNode(o);const h=Me(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,privacySetting:this.privacySetting,onSerialize:p=>{ls(p,this.mirror)&&this.iframeManager.addIframe(p),os(p,this.mirror)&&this.stylesheetManager.trackLinkElement(p),bi(o)&&this.shadowDomManager.addShadowRoot(w.shadowRoot(o),this.doc)},onIframeLoad:(p,b)=>{this.iframeManager.attachIframe(p,b),this.shadowDomManager.observeAttachShadow(p)},onStylesheetLoad:(p,b)=>{this.stylesheetManager.attachLinkElement(p,b)}});h&&(t.push({parentId:d,nextId:u,node:h}),i.add(h.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const o of this.movedSet)sn(this.removes,o,this.mirror)&&!this.movedSet.has(w.parentNode(o))||l(o);for(const o of this.addedSet)!ln(this.droppedSet,o)&&!sn(this.removes,o,this.mirror)||ln(this.movedSet,o)?l(o):this.droppedSet.add(o);let a=null;for(;n.length;){let o=null;if(a){const c=this.mirror.getId(w.parentNode(a.value)),d=s(a.value);c!==-1&&d!==-1&&(o=a)}if(!o){let c=n.tail;for(;c;){const d=c;if(c=c.previous,d){const u=this.mirror.getId(w.parentNode(d.value));if(s(d.value)===-1)continue;if(u!==-1){o=d;break}else{const h=d.value,p=w.parentNode(h);if(p&&p.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const b=w.host(p);if(this.mirror.getId(b)!==-1){o=d;break}}}}}}if(!o){for(;n.head;)n.removeNode(n.head.value);break}a=o.previous,n.removeNode(o.value),l(o.value)}const r={texts:this.texts.map(o=>{var c,d;const u=o.node,h=w.parentNode(u);h&&h.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(h);let p=o.value;const b=this.privacySetting==="strict",Z=this.privacySetting==="default"&&En(p),S=(d=(c=o.node)==null?void 0:c.parentElement)==null?void 0:d.getAttribute("data-hl-record");return(b||Z)&&!S&&p&&(p=Si(p)),{id:this.mirror.getId(u),value:p}}).filter(o=>!i.has(o.id)).filter(o=>this.mirror.has(o.id)),attributes:this.attributes.map(o=>{const{attributes:c}=o;if(typeof c.style=="string"){const d=JSON.stringify(o.styleDiff),u=JSON.stringify(o._unchangedStyles);d.length<c.style.length&&(d+u).split("var(").length===c.style.split("var(").length&&(c.style=o.styleDiff)}return{id:this.mirror.getId(o.node),attributes:c}}).filter(o=>!i.has(o.id)).filter(o=>this.mirror.has(o.id)),removes:this.removes,adds:t};!r.texts.length&&!r.attributes.length&&!r.removes.length&&!r.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(r))}),V(this,"genTextAreaValueMutation",t=>{let i=this.attributeMap.get(t);i||(i={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t,i)),i.attributes.value=Array.from(w.childNodes(t),n=>w.textContent(n)||"").join("")}),V(this,"processMutation",t=>{if(!ii(t.target,this.mirror,this.slimDOMOptions))switch(t.type){case"characterData":{const i=w.textContent(t.target);!ee(t.target,this.blockClass,this.blockSelector,!1)&&i!==t.oldValue&&this.texts.push({value:_n(t.target,this.maskTextClass,this.maskTextSelector,!0)&&i?this.maskTextFn?this.maskTextFn(i,ns(t.target)):i.replace(/[\S]/g,"*"):i,node:t.target});break}case"attributes":{const i=t.target;let n=t.attributeName,s=t.target.getAttribute(n);if(n==="value"){const a=gi(i);s=Wi({element:i,maskInputOptions:this.maskInputOptions,tagName:i.tagName,type:a,value:s,overwriteRecord:i.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(ee(t.target,this.blockClass,this.blockSelector,!1)||s===t.oldValue)return;let l=this.attributeMap.get(t.target);if(i.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(s))if(!i.contentDocument)n="rr_src";else return;if(l||(l={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l),this.attributeMap.set(t.target,l)),n==="type"&&i.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&i.setAttribute("data-rr-is-password","true"),!An(i.tagName,n)){if(t.target.tagName==="INPUT"){const a=t.target;if(a.type==="password"){l.attributes.value="*".repeat(a.value.length);break}}if(l.attributes[n]=Dn(this.doc,Pe(i.tagName),Pe(n),s),n==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const r of Array.from(i.style)){const o=i.style.getPropertyValue(r),c=i.style.getPropertyPriority(r);o!==a.style.getPropertyValue(r)||c!==a.style.getPropertyPriority(r)?c===""?l.styleDiff[r]=o:l.styleDiff[r]=[o,c]:l._unchangedStyles[r]=[o,c]}for(const r of Array.from(a.style))i.style.getPropertyValue(r)===""&&(l.styleDiff[r]=!1)}else n==="open"&&i.tagName==="DIALOG"&&(i.matches("dialog:modal")?l.attributes.rr_open_mode="modal":l.attributes.rr_open_mode="non-modal")}break}case"childList":{if(ee(t.target,this.blockClass,this.blockSelector,!0))return;if(t.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(t.target);return}t.addedNodes.forEach(i=>this.genAdds(i,t.target)),t.removedNodes.forEach(i=>{const n=this.mirror.getId(i),s=it(t.target)?this.mirror.getId(w.host(t.target)):this.mirror.getId(t.target);ee(t.target,this.blockClass,this.blockSelector,!1)||ii(i,this.mirror,this.slimDOMOptions)||!Wo(i,this.mirror)||(this.addedSet.has(i)?(Zi(this.addedSet,i),this.droppedSet.add(i)):this.addedSet.has(t.target)&&n===-1||ss(t.target,this.mirror)||(this.movedSet.has(i)&&this.movedMap[nn(n,s)]?Zi(this.movedSet,i):this.removes.push({parentId:s,id:n,isShadow:it(t.target)&&nt(t.target)?!0:void 0})),this.mapRemoves.push(i))});break}}}),V(this,"genAdds",(t,i)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(ii(t,this.mirror,this.slimDOMOptions))return;this.movedSet.add(t);let n=null;i&&this.mirror.hasNode(i)&&(n=this.mirror.getId(i)),n&&n!==-1&&(this.movedMap[nn(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ee(t,this.blockClass,this.blockSelector,!1)||(w.childNodes(t).forEach(n=>this.genAdds(n)),bi(t)&&w.childNodes(w.shadowRoot(t)).forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,t)}))}})}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(i=>{this[i]=t[i]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Zi(e,t){e.delete(t),w.childNodes(t).forEach(i=>Zi(e,i))}function sn(e,t,i){return e.length===0?!1:vo(e,t,i)}function vo(e,t,i){let n=w.parentNode(t);for(;n;){const s=i.getId(n);if(e.some(l=>l.id===s))return!0;n=w.parentNode(n)}return!1}function ln(e,t){return e.size===0?!1:cs(e,t)}function cs(e,t){const i=w.parentNode(t);return i?e.has(i)?!0:cs(e,i):!1}let st;function Yo(e){st=e}function Lo(){st=void 0}const F=e=>st?(...t)=>{try{return e(...t)}catch(i){if(st&&st(i)===!0)return;throw i}}:e,Le=[];function dt(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function ds(e,t){const i=new ko;Le.push(i),i.init(e);const n=new($n())(F(i.processMutations.bind(i)));return n.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function Jo({mousemoveCb:e,sampling:t,doc:i,mirror:n}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,l=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let a=[],r;const o=rt(F(u=>{const h=Date.now()-r;e(a.map(p=>(p.timeOffset-=h,p)),u),a=[],r=null}),l),c=F(rt(F(u=>{const h=dt(u),{clientX:p,clientY:b}=hi(u)?u.changedTouches[0]:u;r||(r=Jt()),a.push({x:p,y:b,id:n.getId(h),timeOffset:Jt()-r}),o(typeof DragEvent<"u"&&u instanceof DragEvent?U.Drag:u instanceof MouseEvent?U.MouseMove:U.TouchMove)}),s,{trailing:!1})),d=[ne("mousemove",c,i),ne("touchmove",c,i),ne("drag",c,i)];return F(()=>{d.forEach(u=>u())})}function No({mouseInteractionCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,sampling:l}){if(l.mouseInteraction===!1)return()=>{};const a=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,r=[];let o=null;const c=d=>u=>{const h=dt(u);if(ee(h,n,s,!0)||Io(h))return;let p=null,b=d;if("pointerType"in u){switch(u.pointerType){case"mouse":p=Ie.Mouse;break;case"touch":p=Ie.Touch;break;case"pen":p=Ie.Pen;break}p===Ie.Touch&&(le[d]===le.MouseDown?b="TouchStart":le[d]===le.MouseUp&&(b="TouchEnd"))}else hi(u)&&(p=Ie.Touch);p!==null?(o=p,(b.startsWith("Touch")&&p===Ie.Touch||b.startsWith("Mouse")&&p===Ie.Mouse)&&(p=null)):le[d]===le.Click&&(p=o,o=null);const Z=hi(u)?u.changedTouches[0]:u;if(!Z)return;const S=i.getId(h),{clientX:y,clientY:W}=Z;F(e)(f({type:le[b],id:S,x:y,y:W},p!==null&&{pointerType:p}))};return Object.keys(le).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let u=Pe(d);const h=c(d);if(window.PointerEvent)switch(le[d]){case le.MouseDown:case le.MouseUp:u=u.replace("mouse","pointer");break;case le.TouchStart:case le.TouchEnd:return}r.push(ne(u,h,t))}),F(()=>{r.forEach(d=>d())})}function us({scrollCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,sampling:l}){const a=F(rt(F(r=>{const o=dt(r);if(!o||ee(o,n,s,!0))return;const c=i.getId(o);if(o===t&&t.defaultView){const d=es(t.defaultView);e({id:c,x:d.left,y:d.top})}else e({id:c,x:o.scrollLeft,y:o.scrollTop})}),l.scroll||100));return ne("scroll",a,t)}function To({viewportResizeCb:e},{win:t}){let i=-1,n=-1;const s=F(rt(F(()=>{const l=ts(),a=is();(i!==l||n!==a)&&(e({width:Number(a),height:Number(l)}),i=l,n=a)}),200));return ne("resize",s,t)}const wo=["INPUT","TEXTAREA","SELECT"],on=new WeakMap;function xo({inputCb:e,doc:t,mirror:i,blockClass:n,blockSelector:s,ignoreClass:l,ignoreSelector:a,maskInputOptions:r,maskInputFn:o,sampling:c,userTriggeredOnInput:d}){function u(y){let W=dt(y);const I=y.isTrusted,G=W&&W.tagName;if(W&&G==="OPTION"&&(W=w.parentElement(W)),!W||!G||wo.indexOf(G)<0||ee(W,n,s,!0)||W.classList.contains(l)||a&&W.matches(a))return;let x=W.value,K=!1;const g=gi(W)||"",k=W.getAttribute("data-hl-record");g==="radio"||g==="checkbox"?K=W.checked:jn({maskInputOptions:r,type:g,tagName:G,overwriteRecord:k})&&(x=Wi({element:W,maskInputOptions:r,tagName:G,type:g,value:x,overwriteRecord:k,maskInputFn:o})),h(W,d?{text:x,isChecked:K,userTriggered:I}:{text:x,isChecked:K});const M=W.name;g==="radio"&&M&&K&&t.querySelectorAll(`input[type="radio"][name="${M}"]`).forEach(J=>{if(J!==W){const z=J.value;h(J,d?{text:z,isChecked:!K,userTriggered:!1}:{text:z,isChecked:!K})}})}function h(y,W){const I=on.get(y);if(!I||I.text!==W.text||I.isChecked!==W.isChecked){on.set(y,W);const G=i.getId(y);F(e)(Re(f({},W),{id:G}))}}const p=(c.input==="last"?["change"]:["input","change"]).map(y=>ne(y,F(u),t)),b=t.defaultView;if(!b)return()=>{p.forEach(y=>y())};const Z=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),S=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return Z&&Z.set&&p.push(...S.map(y=>Mt(y[0],y[1],{set(){F(u)({target:this,isTrusted:!1})}},!1,b))),F(()=>{p.forEach(y=>y())})}function Nt(e){const t=[];function i(n,s){if(Gt("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||Gt("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||Gt("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||Gt("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const l=Array.from(n.parentRule.cssRules).indexOf(n);s.unshift(l)}else if(n.parentStyleSheet){const l=Array.from(n.parentStyleSheet.cssRules).indexOf(n);s.unshift(l)}return s}return i(e,t)}function We(e,t,i){let n,s;return e?(e.ownerNode?n=t.getId(e.ownerNode):s=i.getId(e),{styleId:s,id:n}):{}}function Ko({styleSheetRuleCb:e,mirror:t,stylesheetManager:i},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const s=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:F((d,u,h)=>{const[p,b]=h,{id:Z,styleId:S}=We(u,t,i.styleMirror);return(Z&&Z!==-1||S&&S!==-1)&&e({id:Z,styleId:S,adds:[{rule:p,index:b}]}),d.apply(u,h)})}),n.CSSStyleSheet.prototype.addRule=function(d,u,h=this.cssRules.length){const p=`${d} { ${u} }`;return n.CSSStyleSheet.prototype.insertRule.apply(this,[p,h])};const l=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(l,{apply:F((d,u,h)=>{const[p]=h,{id:b,styleId:Z}=We(u,t,i.styleMirror);return(b&&b!==-1||Z&&Z!==-1)&&e({id:b,styleId:Z,removes:[{index:p}]}),d.apply(u,h)})}),n.CSSStyleSheet.prototype.removeRule=function(d){return n.CSSStyleSheet.prototype.deleteRule.apply(this,[d])};let a;n.CSSStyleSheet.prototype.replace&&(a=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:F((d,u,h)=>{const[p]=h,{id:b,styleId:Z}=We(u,t,i.styleMirror);return(b&&b!==-1||Z&&Z!==-1)&&e({id:b,styleId:Z,replace:p}),d.apply(u,h)})}));let r;n.CSSStyleSheet.prototype.replaceSync&&(r=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(r,{apply:F((d,u,h)=>{const[p]=h,{id:b,styleId:Z}=We(u,t,i.styleMirror);return(b&&b!==-1||Z&&Z!==-1)&&e({id:b,styleId:Z,replaceSync:p}),d.apply(u,h)})}));const o={};Xt("CSSGroupingRule")?o.CSSGroupingRule=n.CSSGroupingRule:(Xt("CSSMediaRule")&&(o.CSSMediaRule=n.CSSMediaRule),Xt("CSSConditionRule")&&(o.CSSConditionRule=n.CSSConditionRule),Xt("CSSSupportsRule")&&(o.CSSSupportsRule=n.CSSSupportsRule));const c={};return Object.entries(o).forEach(([d,u])=>{c[d]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(c[d].insertRule,{apply:F((h,p,b)=>{const[Z,S]=b,{id:y,styleId:W}=We(p.parentStyleSheet,t,i.styleMirror);return(y&&y!==-1||W&&W!==-1)&&e({id:y,styleId:W,adds:[{rule:Z,index:[...Nt(p),S||0]}]}),h.apply(p,b)})}),u.prototype.deleteRule=new Proxy(c[d].deleteRule,{apply:F((h,p,b)=>{const[Z]=b,{id:S,styleId:y}=We(p.parentStyleSheet,t,i.styleMirror);return(S&&S!==-1||y&&y!==-1)&&e({id:S,styleId:y,removes:[{index:[...Nt(p),Z]}]}),h.apply(p,b)})})}),F(()=>{n.CSSStyleSheet.prototype.insertRule=s,n.CSSStyleSheet.prototype.deleteRule=l,a&&(n.CSSStyleSheet.prototype.replace=a),r&&(n.CSSStyleSheet.prototype.replaceSync=r),Object.entries(o).forEach(([d,u])=>{u.prototype.insertRule=c[d].insertRule,u.prototype.deleteRule=c[d].deleteRule})})}function ms({mirror:e,stylesheetManager:t},i){var n,s,l;let a=null;i.nodeName==="#document"?a=e.getId(i):a=e.getId(w.host(i));const r=i.nodeName==="#document"?(n=i.defaultView)==null?void 0:n.Document:(l=(s=i.ownerDocument)==null?void 0:s.defaultView)==null?void 0:l.ShadowRoot,o=r!=null&&r.prototype?Object.getOwnPropertyDescriptor(r==null?void 0:r.prototype,"adoptedStyleSheets"):void 0;return a===null||a===-1||!r||!o?()=>{}:(Object.defineProperty(i,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){var c;return(c=o.get)==null?void 0:c.call(this)},set(c){var d;const u=(d=o.set)==null?void 0:d.call(this,c);if(a!==null&&a!==-1)try{t.adoptStyleSheets(c,a)}catch{}return u}}),F(()=>{Object.defineProperty(i,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function Uo({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:i,stylesheetManager:n},{win:s}){const l=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(l,{apply:F((r,o,c)=>{var d;const[u,h,p]=c;if(i.has(u))return l.apply(o,[u,h,p]);const{id:b,styleId:Z}=We((d=o.parentRule)==null?void 0:d.parentStyleSheet,t,n.styleMirror);return(b&&b!==-1||Z&&Z!==-1)&&e({id:b,styleId:Z,set:{property:u,value:h,priority:p},index:Nt(o.parentRule)}),r.apply(o,c)})});const a=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:F((r,o,c)=>{var d;const[u]=c;if(i.has(u))return a.apply(o,[u]);const{id:h,styleId:p}=We((d=o.parentRule)==null?void 0:d.parentStyleSheet,t,n.styleMirror);return(h&&h!==-1||p&&p!==-1)&&e({id:h,styleId:p,remove:{property:u},index:Nt(o.parentRule)}),r.apply(o,c)})}),F(()=>{s.CSSStyleDeclaration.prototype.setProperty=l,s.CSSStyleDeclaration.prototype.removeProperty=a})}function Fo({mediaInteractionCb:e,blockClass:t,blockSelector:i,mirror:n,sampling:s,doc:l}){const a=F(o=>rt(F(c=>{const d=dt(c);if(!d||ee(d,t,i,!0))return;const{currentTime:u,volume:h,muted:p,playbackRate:b,loop:Z}=d;e({type:o,id:n.getId(d),currentTime:u,volume:h,muted:p,playbackRate:b,loop:Z})}),s.media||500)),r=[ne("play",a(He.Play),l),ne("pause",a(He.Pause),l),ne("seeked",a(He.Seeked),l),ne("volumechange",a(He.VolumeChange),l),ne("ratechange",a(He.RateChange),l)];return F(()=>{r.forEach(o=>o())})}function Ho({fontCb:e,doc:t}){const i=t.defaultView;if(!i)return()=>{};const n=[],s=new WeakMap,l=i.FontFace;i.FontFace=function(r,o,c){const d=new l(r,o,c);return s.set(d,{family:r,buffer:typeof o!="string",descriptors:c,fontSource:typeof o=="string"?o:JSON.stringify(Array.from(new Uint8Array(o)))}),d};const a=Qe(t.fonts,"add",function(r){return function(o){return setTimeout(F(()=>{const c=s.get(o);c&&(e(c),s.delete(o))}),0),r.apply(this,[o])}});return n.push(()=>{i.FontFace=l}),n.push(a),F(()=>{n.forEach(r=>r())})}function Mo(e){const{doc:t,mirror:i,blockClass:n,blockSelector:s,selectionCb:l}=e;let a=!0;const r=F(()=>{const o=t.getSelection();if(!o||a&&o!=null&&o.isCollapsed)return;a=o.isCollapsed||!1;const c=[],d=o.rangeCount||0;for(let u=0;u<d;u++){const h=o.getRangeAt(u),{startContainer:p,startOffset:b,endContainer:Z,endOffset:S}=h;ee(p,n,s,!0)||ee(Z,n,s,!0)||c.push({start:i.getId(p),startOffset:b,end:i.getId(Z),endOffset:S})}l({ranges:c})});return r(),ne("selectionchange",r)}function zo({doc:e,customElementCb:t}){const i=e.defaultView;return!i||!i.customElements?()=>{}:Qe(i.customElements,"define",function(n){return function(s,l,a){try{t({define:{name:s}})}catch{console.warn(`Custom element callback failed for ${s}`)}return n.apply(this,[s,l,a])}})}function Bo(e,t){const{mutationCb:i,mousemoveCb:n,mouseInteractionCb:s,scrollCb:l,viewportResizeCb:a,inputCb:r,mediaInteractionCb:o,styleSheetRuleCb:c,styleDeclarationCb:d,canvasMutationCb:u,fontCb:h,selectionCb:p,customElementCb:b}=e;e.mutationCb=(...Z)=>{t.mutation&&t.mutation(...Z),i(...Z)},e.mousemoveCb=(...Z)=>{t.mousemove&&t.mousemove(...Z),n(...Z)},e.mouseInteractionCb=(...Z)=>{t.mouseInteraction&&t.mouseInteraction(...Z),s(...Z)},e.scrollCb=(...Z)=>{t.scroll&&t.scroll(...Z),l(...Z)},e.viewportResizeCb=(...Z)=>{t.viewportResize&&t.viewportResize(...Z),a(...Z)},e.inputCb=(...Z)=>{t.input&&t.input(...Z),r(...Z)},e.mediaInteractionCb=(...Z)=>{t.mediaInteaction&&t.mediaInteaction(...Z),o(...Z)},e.styleSheetRuleCb=(...Z)=>{t.styleSheetRule&&t.styleSheetRule(...Z),c(...Z)},e.styleDeclarationCb=(...Z)=>{t.styleDeclaration&&t.styleDeclaration(...Z),d(...Z)},e.canvasMutationCb=(...Z)=>{t.canvasMutation&&t.canvasMutation(...Z),u(...Z)},e.fontCb=(...Z)=>{t.font&&t.font(...Z),h(...Z)},e.selectionCb=(...Z)=>{t.selection&&t.selection(...Z),p(...Z)},e.customElementCb=(...Z)=>{t.customElement&&t.customElement(...Z),b(...Z)}}function Oo(e,t={}){const i=e.doc.defaultView;if(!i)return()=>{};Bo(e,t);let n;e.recordDOM&&(n=ds(e,e.doc));const s=Jo(e),l=No(e),a=us(e),r=To(e,{win:i}),o=xo(e),c=Fo(e);let d=()=>{},u=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(d=Ko(e,{win:i}),u=ms(e,e.doc),h=Uo(e,{win:i}),e.collectFonts&&(p=Ho(e)));const b=Mo(e),Z=zo(e),S=[];for(const y of e.plugins)S.push(y.observer(y.callback,i,y.options));return F(()=>{Le.forEach(y=>y.reset()),n==null||n.disconnect(),s(),l(),a(),r(),o(),c(),d(),u(),h(),p(),b(),Z(),S.forEach(y=>y())})}function Gt(e){return typeof window[e]<"u"}function Xt(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class an{constructor(t){V(this,"iframeIdToRemoteIdMap",new WeakMap),V(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=t}getId(t,i,n,s){const l=n||this.getIdToRemoteIdMap(t),a=s||this.getRemoteIdToIdMap(t);let r=l.get(i);return r||(r=this.generateIdFn(),l.set(i,r),a.set(r,i)),r}getIds(t,i){const n=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return i.map(l=>this.getId(t,l,n,s))}getRemoteId(t,i,n){const s=n||this.getRemoteIdToIdMap(t);return typeof i!="number"?i:s.get(i)||-1}getRemoteIds(t,i){const n=this.getRemoteIdToIdMap(t);return i.map(s=>this.getRemoteId(t,s,n))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let i=this.iframeIdToRemoteIdMap.get(t);return i||(i=new Map,this.iframeIdToRemoteIdMap.set(t,i)),i}getRemoteIdToIdMap(t){let i=this.iframeRemoteIdToIdMap.get(t);return i||(i=new Map,this.iframeRemoteIdToIdMap.set(t,i)),i}}class Po{constructor(t){V(this,"iframes",new WeakMap),V(this,"crossOriginIframeMap",new WeakMap),V(this,"crossOriginIframeMirror",new an(Qn)),V(this,"crossOriginIframeStyleMirror"),V(this,"crossOriginIframeRootIdMap",new WeakMap),V(this,"mirror"),V(this,"mutationCb"),V(this,"wrappedEmit"),V(this,"loadListener"),V(this,"stylesheetManager"),V(this,"recordCrossOriginIframes"),this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new an(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,i){var n,s;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:i}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((n=t.contentWindow)==null||n.addEventListener("message",this.handleMessage.bind(this))),(s=this.loadListener)==null||s.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const i=t;if(i.data.type!=="rrweb"||i.origin!==i.data.origin)return;const n=t.source;if(!n)return;const s=this.crossOriginIframeMap.get(n);if(!s)return;const l=this.transformCrossOriginEvent(s,i.data.event);l&&this.wrappedEmit(l,i.data.isCheckout)}transformCrossOriginEvent(t,i){var n;switch(i.type){case H.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(i.data.node,t);const s=i.data.node.id;return this.crossOriginIframeRootIdMap.set(t,s),this.patchRootIdOnNode(i.data.node,s),{timestamp:i.timestamp,type:H.IncrementalSnapshot,data:{source:U.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:i.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case H.Meta:case H.Load:case H.DomContentLoaded:return!1;case H.Plugin:return i;case H.Custom:return this.replaceIds(i.data.payload,t,["id","parentId","previousId","nextId"]),i;case H.IncrementalSnapshot:switch(i.data.source){case U.Mutation:return i.data.adds.forEach(s=>{this.replaceIds(s,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,t);const l=this.crossOriginIframeRootIdMap.get(t);l&&this.patchRootIdOnNode(s.node,l)}),i.data.removes.forEach(s=>{this.replaceIds(s,t,["parentId","id"])}),i.data.attributes.forEach(s=>{this.replaceIds(s,t,["id"])}),i.data.texts.forEach(s=>{this.replaceIds(s,t,["id"])}),i;case U.Drag:case U.TouchMove:case U.MouseMove:return i.data.positions.forEach(s=>{this.replaceIds(s,t,["id"])}),i;case U.ViewportResize:return!1;case U.MediaInteraction:case U.MouseInteraction:case U.Scroll:case U.CanvasMutation:case U.Input:return this.replaceIds(i.data,t,["id"]),i;case U.StyleSheetRule:case U.StyleDeclaration:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleId"]),i;case U.Font:return i;case U.Selection:return i.data.ranges.forEach(s=>{this.replaceIds(s,t,["start","end"])}),i;case U.AdoptedStyleSheet:return this.replaceIds(i.data,t,["id"]),this.replaceStyleIds(i.data,t,["styleIds"]),(n=i.data.styles)==null||n.forEach(s=>{this.replaceStyleIds(s,t,["styleId"])}),i}}return!1}replace(t,i,n,s){for(const l of s)!Array.isArray(i[l])&&typeof i[l]!="number"||(Array.isArray(i[l])?i[l]=t.getIds(n,i[l]):i[l]=t.getId(n,i[l]));return i}replaceIds(t,i,n){return this.replace(this.crossOriginIframeMirror,t,i,n)}replaceStyleIds(t,i,n){return this.replace(this.crossOriginIframeStyleMirror,t,i,n)}replaceIdOnNode(t,i){this.replaceIds(t,i,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(n=>{this.replaceIdOnNode(n,i)})}patchRootIdOnNode(t,i){t.type!==_.Document&&!t.rootId&&(t.rootId=i),"childNodes"in t&&t.childNodes.forEach(n=>{this.patchRootIdOnNode(n,i)})}}class Eo{constructor(t){V(this,"shadowDoms",new WeakSet),V(this,"mutationCb"),V(this,"scrollCb"),V(this,"bypassOptions"),V(this,"mirror"),V(this,"restoreHandlers",[]),this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,i){if(!nt(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=ds(Re(f({},this.bypassOptions),{doc:i,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(us(Re(f({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(w.host(t))),this.restoreHandlers.push(ms({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,i){const n=this;this.restoreHandlers.push(Qe(t.prototype,"attachShadow",function(s){return function(l){const a=s.call(this,l),r=w.shadowRoot(this);return r&&rs(this)&&n.addShadowRoot(r,i),a}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}var ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vt=0;Vt<ze.length;Vt++)jo[ze.charCodeAt(Vt)]=Vt;var Qo=function(e){var t=new Uint8Array(e),i,n=t.length,s="";for(i=0;i<n;i+=3)s+=ze[t[i]>>2],s+=ze[(t[i]&3)<<4|t[i+1]>>4],s+=ze[(t[i+1]&15)<<2|t[i+2]>>6],s+=ze[t[i+2]&63];return n%3===2?s=s.substring(0,s.length-1)+"=":n%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const rn=new Map;function Do(e,t){let i=rn.get(e);return i||(i=new Map,rn.set(e,i)),i.has(t)||i.set(t,[]),i.get(t)}const ps=(e,t,i)=>{if(!e||!(bs(e,t)||typeof e=="object"))return;const n=e.constructor.name,s=Do(i,n);let l=s.indexOf(e);return l===-1&&(l=s.length,s.push(e)),l};function gt(e,t,i){if(e instanceof Array)return e.map(n=>gt(n,t,i));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const n=e.constructor.name,s=Qo(e);return{rr_type:n,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[gt(e.buffer,t,i),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const n=e.constructor.name,{src:s}=e;return{rr_type:n,src:s}}else if(e instanceof HTMLCanvasElement){const n="HTMLImageElement",s=e.toDataURL();return{rr_type:n,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[gt(e.data,t,i),e.width,e.height]};if(bs(e,t)||typeof e=="object"){const n=e.constructor.name,s=ps(e,t,i);return{rr_type:n,index:s}}}}return e}const hs=(e,t,i)=>e.map(n=>gt(n,t,i)),bs=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof t[i]=="function").find(i=>e instanceof t[i]);function Ao(e,t,i,n){const s=[],l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of l)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const r=Qe(t.CanvasRenderingContext2D.prototype,a,function(o){return function(...c){return ee(this.canvas,i,n,!0)||setTimeout(()=>{const d=hs(c,t,this);e(this.canvas,{type:Ee["2D"],property:a,args:d})},0),o.apply(this,c)}});s.push(r)}catch{const o=Mt(t.CanvasRenderingContext2D.prototype,a,{set(c){e(this.canvas,{type:Ee["2D"],property:a,args:[c],setter:!0})}});s.push(o)}return()=>{s.forEach(a=>a())}}function _o(e){return e==="experimental-webgl"?"webgl":e}function cn(e,t,i,n){const s=[];try{const l=Qe(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(r,...o){if(!ee(this,t,i,!0)){const c=_o(r);if("__context"in this||(this.__context=c),n&&["webgl","webgl2"].includes(c))if(o[0]&&typeof o[0]=="object"){const d=o[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[r,...o])}});s.push(l)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(l=>l())}}function dn(e,t,i,n,s,l){const a=[],r=Object.getOwnPropertyNames(e);for(const o of r)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(o))try{if(typeof e[o]!="function")continue;const c=Qe(e,o,function(d){return function(...u){const h=d.apply(this,u);if(ps(h,l,this),"tagName"in this.canvas&&!ee(this.canvas,n,s,!0)){const p=hs(u,l,this),b={type:t,property:o,args:p};i(this.canvas,b)}return h}});a.push(c)}catch{const d=Mt(e,o,{set(u){i(this.canvas,{type:t,property:o,args:[u],setter:!0})}});a.push(d)}return a}function qo(e,t,i,n){const s=[];return s.push(...dn(t.WebGLRenderingContext.prototype,Ee.WebGL,e,i,n,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...dn(t.WebGL2RenderingContext.prototype,Ee.WebGL2,e,i,n,t)),()=>{s.forEach(l=>l())}}const Zs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgbGV0IGxvZ0RlYnVnID0gZmFsc2U7CiAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4gewogICAgaWYgKGxvZ0RlYnVnKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7CiAgICB9CiAgfTsKICB3b3JrZXIub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24oZSkgewogICAgbG9nRGVidWcgPSAhIWUuZGF0YS5sb2dEZWJ1ZzsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZHgsIGR5LCBkdywgZGgsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBjYW52YXMgYml0bWFwIGlzIHRyYW5zcGFyZW50IiwgewogICAgICAgICAgaWQsCiAgICAgICAgICBiYXNlNjQKICAgICAgICB9KTsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICJ0cmFuc3BhcmVudCIgfSk7CiAgICAgIH0KICAgICAgaWYgKGxhc3RCbG9iTWFwLmdldChpZCkgPT09IGJhc2U2NCkgewogICAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBpcyB1bmNoYW5nZWQiLCB7CiAgICAgICAgICBpZCwKICAgICAgICAgIGJhc2U2NAogICAgICAgIH0pOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgc3RhdHVzOiAidW5jaGFuZ2VkIiB9KTsKICAgICAgfQogICAgICBjb25zdCBtc2cgPSB7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGR4LAogICAgICAgIGR5LAogICAgICAgIGR3LAogICAgICAgIGRoCiAgICAgIH07CiAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBwcm9jZXNzZWQiLCBtc2cpOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBubyBvZmZzY3JlZW5jYW52YXMgc3VwcG9ydCIsIHsKICAgICAgICBpZDogZS5kYXRhLmlkCiAgICAgIH0pOwogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCwgc3RhdHVzOiAidW5zdXBwb3J0ZWQiIH0pOwogICAgfQogIH07Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYWdlLWJpdG1hcC1kYXRhLXVybC13b3JrZXItS0tvQ2VrWjEuanMubWFwCg==",$o=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),un=typeof window<"u"&&window.Blob&&new Blob([$o(Zs)],{type:"text/javascript;charset=utf-8"});function ea(e){let t;try{if(t=un&&(window.URL||window.webkitURL).createObjectURL(un),!t)throw"";const i=new Worker(t,{name:e==null?void 0:e.name});return i.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),i}catch{return new Worker("data:text/javascript;base64,"+Zs,{name:e==null?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class ta{constructor(t){V(this,"pendingCanvasMutations",new Map),V(this,"rafStamps",{latestId:0,invokeId:null}),V(this,"mirror"),V(this,"logger"),V(this,"worker"),V(this,"snapshotInProgressMap",new Map),V(this,"lastSnapshotTime",new Map),V(this,"options"),V(this,"mutationCb"),V(this,"resetObservers"),V(this,"frozen",!1),V(this,"locked",!1),V(this,"processMutation",(d,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(u)});const{sampling:i,win:n,blockClass:s,blockSelector:l,recordCanvas:a,recordVideos:r,initialSnapshotDelay:o,dataURLOptions:c}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.logger=t.logger,this.worker=new ea,this.worker.onmessage=d=>{const{id:u}=d.data;if(this.snapshotInProgressMap.set(u,!1),!("base64"in d.data)){this.debug(null,"canvas worker received empty message",{data:d.data,status:d.data.status});return}const{base64:h,type:p,dx:b,dy:Z,dw:S,dh:y}=d.data,W={id:u,type:Ee["2D"],commands:[{property:"clearRect",args:[b,Z,S,y]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:h}],type:p}]},b,Z,S,y]}]};this.debug(null,"canvas worker recording mutation",W),this.mutationCb(W)},this.options=t,a&&i==="all"?(this.debug(null,"initializing canvas mutation observer",{sampling:i}),this.initCanvasMutationObserver(n,s,l)):a&&typeof i=="number"&&(this.debug(null,"initializing canvas fps observer",{sampling:i}),this.initCanvasFPSObserver(r,i,n,s,l,{initialSnapshotDelay:o,dataURLOptions:c},t.resizeFactor,t.maxSnapshotDimension))}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}debug(t,...i){if(!this.logger)return;const n=this.mirror.getId(t);let s="[highlight-canvas-manager]";t&&(s=`[highlight-canvas] [id:${n}]`,t.tagName.toLowerCase()==="canvas"&&(s+=` [ctx:${t.__context}]`)),this.logger.debug(s,t,...i)}snapshot(t){return A(this,null,function*(){var i;const n=this.mirror.getId(t);if(this.snapshotInProgressMap.get(n)){this.debug(t,"snapshotting already in progress for",n);return}const s=1e3/(typeof this.options.samplingManual=="number"?this.options.samplingManual:1),l=this.lastSnapshotTime.get(n);if(!(l&&new Date().getTime()-l<s)){if(this.debug(t,"starting snapshotting"),t.width===0||t.height===0){this.debug(t,"not yet ready",{width:t.width,height:t.height});return}this.lastSnapshotTime.set(n,new Date().getTime()),this.snapshotInProgressMap.set(n,!0);try{if(this.options.clearWebGLBuffer!==!1&&["webgl","webgl2"].includes(t.__context)){const d=t.getContext(t.__context);((i=d==null?void 0:d.getContextAttributes())==null?void 0:i.preserveDrawingBuffer)===!1&&(d.clear(d.COLOR_BUFFER_BIT),this.debug(t,"cleared webgl canvas to load it into memory",{attributes:d==null?void 0:d.getContextAttributes()}))}if(t.width===0||t.height===0){this.debug(t,"not yet ready",{width:t.width,height:t.height});return}let a=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const d=Math.max(t.width,t.height);a=Math.min(a,this.options.maxSnapshotDimension/d)}const r=t.width*a,o=t.height*a,c=yield createImageBitmap(t,{resizeWidth:r,resizeHeight:o});this.debug(t,"created image bitmap",{width:c.width,height:c.height}),this.worker.postMessage({id:n,bitmap:c,width:r,height:o,dx:0,dy:0,dw:t.width,dh:t.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[c]),this.debug(t,"sent message")}catch(a){this.debug(t,"failed to snapshot",a)}finally{this.snapshotInProgressMap.set(n,!1)}}})}initCanvasFPSObserver(t,i,n,s,l,a,r,o){const c=cn(n,s,l,!0),d=1e3/i;let u=0,h;const p=new Map,b=y=>{const W=[];return n.document.querySelectorAll("canvas").forEach(I=>{if(!ee(I,s,l,!0)){this.debug(I,"discovered canvas"),W.push(I);const G=this.mirror.getId(I);p.has(G)||p.set(G,y)}}),W},Z=y=>{const W=[];return t&&n.document.querySelectorAll("video").forEach(I=>{if(!(I.src!==""&&I.src.indexOf("blob:")===-1)&&!ee(I,s,l,!0)){W.push(I);const G=this.mirror.getId(I);p.has(G)||p.set(G,y)}}),W},S=y=>A(this,null,function*(){if(u&&y-u<d){h=requestAnimationFrame(S);return}u=y;const W=G=>{const x=this.mirror.getId(G),K=p.get(x),g=!a.initialSnapshotDelay||y-K>a.initialSnapshotDelay;return this.debug(G,{delay:a.initialSnapshotDelay,delta:y-K,hadLoadingTime:g}),g},I=[];I.push(...b(y).filter(W).map(G=>this.snapshot(G))),I.push(...Z(y).filter(W).map(G=>A(this,null,function*(){this.debug(G,"starting video snapshotting");const x=this.mirror.getId(G);if(this.snapshotInProgressMap.get(x)){this.debug(G,"video snapshotting already in progress for",x);return}this.snapshotInProgressMap.set(x,!0);try{const{width:K,height:g}=G.getBoundingClientRect(),{actualWidth:k,actualHeight:M}={actualWidth:G.videoWidth,actualHeight:G.videoHeight},J=Math.max(k,M);if(G.width===0||G.height===0||k===0||M===0||K===0||g===0){this.debug(G,"not yet ready",{width:G.width,height:G.height});return}let z=r||1;o&&(z=Math.min(z,o/J));const se=k*z,Y=M*z,m=yield createImageBitmap(G,{resizeWidth:se,resizeHeight:Y}),X=Math.max(K,g)/J,C=k*X,P=M*X,N=(K-C)/2,v=(g-P)/2;this.debug(G,"created image bitmap",{actualWidth:k,actualHeight:M,boxWidth:K,boxHeight:g,outputWidth:C,outputHeight:P,resizeWidth:se,resizeHeight:Y,scale:z,outputScale:X,offsetX:N,offsetY:v}),this.worker.postMessage({id:x,bitmap:m,width:se,height:Y,dx:N,dy:v,dw:C,dh:P,dataURLOptions:a.dataURLOptions,logDebug:!!this.logger},[m]),this.debug(G,"send message")}catch(K){this.debug(G,"failed to snapshot",K)}finally{this.snapshotInProgressMap.set(x,!1)}}))),yield Promise.all(I).catch(console.error),h=requestAnimationFrame(S)});h=requestAnimationFrame(S),this.resetObservers=()=>{c(),h&&cancelAnimationFrame(h)}}initCanvasMutationObserver(t,i,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=cn(t,i,n,!1),l=Ao(this.processMutation.bind(this),t,i,n),a=qo(this.processMutation.bind(this),t,i,n);this.resetObservers=()=>{s(),l(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=i=>{this.rafStamps.latestId=i,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,i)=>{const n=this.mirror.getId(i);this.flushPendingCanvasMutationFor(i,n)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,i){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||i===-1)return;const s=n.map(a=>Ne(a,["type"])),{type:l}=n[0];this.mutationCb({id:i,type:l,commands:s}),this.pendingCanvasMutations.delete(t)}}class ia{constructor(t){V(this,"trackedLinkElements",new WeakSet),V(this,"mutationCb"),V(this,"adoptedStyleSheetCb"),V(this,"styleMirror",new So),this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,i){"_cssText"in i.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:i.id,attributes:i.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,i){if(t.length===0)return;const n={id:i,styleIds:[]},s=[];for(const l of t){let a;this.styleMirror.has(l)?a=this.styleMirror.getId(l):(a=this.styleMirror.add(l),s.push({styleId:a,rules:Array.from(l.rules||CSSRule,(r,o)=>({rule:Bn(r,l.href),index:o}))})),n.styleIds.push(a)}s.length>0&&(n.styles=s),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class na{constructor(){V(this,"nodeMap",new WeakMap),V(this,"active",!1)}inOtherBuffer(t,i){const n=this.nodeMap.get(t);return n&&Array.from(n).some(s=>s!==i)}add(t,i){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(i))}destroy(){}}let D,St,lt,Tt=!1;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((Oi=e.contentWindow)==null?void 0:Oi.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const me=Ll();function Ve(e={}){var t,i,n,s,l,a,r,o;const{emit:c,checkoutEveryNms:d,checkoutEveryNth:u,blockClass:h="highlight-block",blockSelector:p=null,ignoreClass:b="highlight-ignore",ignoreSelector:Z=null,maskTextClass:S="highlight-mask",maskTextSelector:y=null,inlineStylesheet:W=!0,maskAllInputs:I,maskInputOptions:G,slimDOMOptions:x,maskInputFn:K,maskTextFn:g=Si,hooks:k,packFn:M,sampling:J={},mousemoveWait:z,recordDOM:se=!0,recordCanvas:Y=!1,recordCrossOriginIframes:m=!1,recordAfter:X=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:C=!1,collectFonts:P=!1,inlineImages:N=!1,plugins:v,keepIframeSrcFn:oe=()=>!1,privacySetting:$="default",ignoreCSSAttributes:Ae=new Set([]),errorHandler:Ns,logger:Ts}=e,mt=f(f({},e.dataURLOptions),(i=(t=e.sampling)==null?void 0:t.canvas)==null?void 0:i.dataURLOptions);Yo(Ns);const pt=m?window.parent===window:!0;let _e=!1;if(!pt)try{window.parent.document&&(_e=!1)}catch{_e=!0}if(pt&&!c)throw new Error("emit function is required");if(!pt&&!_e)return()=>{};z!==void 0&&J.mousemove===void 0&&(J.mousemove=z),me.reset();const Ot=I===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:G!==void 0?G:{password:!0},Pt=x===!0||x==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:x==="all",headMetaDescKeywords:x==="all",headTitleMutations:x==="all"}:x||{};go();let Ni,Et=0;const Ti=B=>{for(const de of v||[])de.eventProcessor&&(B=de.eventProcessor(B));return M&&!_e&&(B=M(B)),B};D=(B,de)=>{var j;const Q=B;if(Q.timestamp=Jt(),(j=Le[0])!=null&&j.isFrozen()&&Q.type!==H.FullSnapshot&&!(Q.type===H.IncrementalSnapshot&&Q.data.source===U.Mutation)&&Le.forEach(he=>he.unfreeze()),pt)c==null||c(Ti(Q),de);else if(_e){const he={type:"rrweb",event:Ti(Q),origin:window.location.origin,isCheckout:de};window.parent.postMessage(he,"*")}if(Q.type===H.FullSnapshot)Ni=Q,Et=0;else if(Q.type===H.IncrementalSnapshot){if(Q.data.source===U.Mutation&&Q.data.isAttachIframe)return;Et++;const he=u&&Et>=u,O=d&&Q.timestamp-Ni.timestamp>d;(he||O)&&St(!0)}};const ht=B=>{D({type:H.IncrementalSnapshot,data:f({source:U.Mutation},B)})},wi=B=>D({type:H.IncrementalSnapshot,data:f({source:U.Scroll},B)}),xi=B=>D({type:H.IncrementalSnapshot,data:f({source:U.CanvasMutation},B)}),ws=B=>D({type:H.IncrementalSnapshot,data:f({source:U.AdoptedStyleSheet},B)}),ve=new ia({mutationCb:ht,adoptedStyleSheetCb:ws}),Ye=new Po({mirror:me,mutationCb:ht,stylesheetManager:ve,recordCrossOriginIframes:m,wrappedEmit:D});for(const B of v||[])B.getMirror&&B.getMirror({nodeMirror:me,crossOriginIframeMirror:Ye.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ye.crossOriginIframeStyleMirror});const jt=new na;lt=new ta({recordCanvas:Y,recordVideos:N,mutationCb:xi,win:window,blockClass:h,blockSelector:p,mirror:me,sampling:(n=J==null?void 0:J.canvas)==null?void 0:n.fps,samplingManual:(s=J==null?void 0:J.canvas)==null?void 0:s.fpsManual,clearWebGLBuffer:(l=J==null?void 0:J.canvas)==null?void 0:l.clearWebGLBuffer,initialSnapshotDelay:(a=J==null?void 0:J.canvas)==null?void 0:a.initialSnapshotDelay,dataURLOptions:mt,resizeFactor:(r=J==null?void 0:J.canvas)==null?void 0:r.resizeFactor,maxSnapshotDimension:(o=J==null?void 0:J.canvas)==null?void 0:o.maxSnapshotDimension,logger:Ts});const bt=new Eo({mutationCb:ht,scrollCb:wi,bypassOptions:{blockClass:h,blockSelector:p,maskTextClass:S,maskTextSelector:y,inlineStylesheet:W,maskInputOptions:Ot,dataURLOptions:mt,maskTextFn:g,maskInputFn:K,recordCanvas:Y,inlineImages:N,privacySetting:$,sampling:J,slimDOMOptions:Pt,iframeManager:Ye,stylesheetManager:ve,canvasManager:lt,keepIframeSrcFn:oe,processedNodeManager:jt},mirror:me});St=(B=!1)=>{if(!se)return;D({type:H.Meta,data:{href:window.location.href,width:is(),height:ts()}},B),ve.reset(),bt.init(),Le.forEach(j=>j.lock());const de=oo(document,{mirror:me,blockClass:h,blockSelector:p,maskTextClass:S,maskTextSelector:y,inlineStylesheet:W,maskAllInputs:Ot,maskTextFn:g,maskInputFn:K,slimDOM:Pt,dataURLOptions:mt,recordCanvas:Y,inlineImages:N,privacySetting:$,onSerialize:j=>{ls(j,me)&&Ye.addIframe(j),os(j,me)&&ve.trackLinkElement(j),bi(j)&&bt.addShadowRoot(w.shadowRoot(j),document)},onIframeLoad:(j,Q)=>{Ye.attachIframe(j,Q),bt.observeAttachShadow(j)},onStylesheetLoad:(j,Q)=>{ve.attachLinkElement(j,Q)},keepIframeSrcFn:oe});if(!de)return console.warn("Failed to snapshot the document");D({type:H.FullSnapshot,data:{node:de,initialOffset:es(window)}},B),Le.forEach(j=>j.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ve.adoptStyleSheets(document.adoptedStyleSheets,me.getId(document))};try{const B=[],de=Q=>{var he;return F(Oo)({mutationCb:ht,mousemoveCb:(O,Qt)=>D({type:H.IncrementalSnapshot,data:{source:Qt,positions:O}}),mouseInteractionCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.MouseInteraction},O)}),scrollCb:wi,viewportResizeCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.ViewportResize},O)}),inputCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.Input},O)}),mediaInteractionCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.MediaInteraction},O)}),styleSheetRuleCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.StyleSheetRule},O)}),styleDeclarationCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.StyleDeclaration},O)}),canvasMutationCb:xi,fontCb:O=>D({type:H.IncrementalSnapshot,data:f({source:U.Font},O)}),selectionCb:O=>{D({type:H.IncrementalSnapshot,data:f({source:U.Selection},O)})},customElementCb:O=>{D({type:H.IncrementalSnapshot,data:f({source:U.CustomElement},O)})},blockClass:h,ignoreClass:b,ignoreSelector:Z,maskTextClass:S,maskTextSelector:y,maskInputOptions:Ot,inlineStylesheet:W,sampling:J,recordDOM:se,recordCanvas:Y,inlineImages:N,userTriggeredOnInput:C,collectFonts:P,doc:Q,maskInputFn:K,maskTextFn:g,keepIframeSrcFn:oe,blockSelector:p,slimDOMOptions:Pt,dataURLOptions:mt,mirror:me,iframeManager:Ye,stylesheetManager:ve,shadowDomManager:bt,processedNodeManager:jt,canvasManager:lt,ignoreCSSAttributes:Ae,privacySetting:$,plugins:((he=v==null?void 0:v.filter(O=>O.observer))==null?void 0:he.map(O=>({observer:O.observer,options:O.options,callback:Qt=>D({type:H.Plugin,data:{plugin:O.name,payload:Qt}})})))||[]},k)};Ye.addLoadListener(Q=>{try{B.push(de(Q.contentDocument))}catch(he){console.warn(he)}});const j=()=>{St(),B.push(de(document)),Tt=!0};return document.readyState==="interactive"||document.readyState==="complete"?j():(B.push(ne("DOMContentLoaded",()=>{D({type:H.DomContentLoaded,data:{}}),X==="DOMContentLoaded"&&j()})),B.push(ne("load",()=>{D({type:H.Load,data:{}}),X==="load"&&j()},window))),()=>{B.forEach(Q=>Q()),jt.destroy(),Tt=!1,Lo()}}catch(B){console.warn(B)}}Ve.addCustomEvent=(e,t)=>{Tt&&D({type:H.Custom,data:{tag:e,payload:t}})};Ve.freezePage=()=>{Le.forEach(e=>e.freeze())};Ve.takeFullSnapshot=e=>{if(!Tt)throw new Error("please take full snapshot after start recording");St(e)};Ve.snapshotCanvas=e=>A(void 0,null,function*(){if(!lt)throw new Error("canvas manager is not initialized");yield lt.snapshot(e)});Ve.mirror=me;var mn;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(mn||(mn={}));const{addCustomEvent:pn}=Ve,hn={key:"_sid"},sa="rrweb/sequential-id@1",la=e=>{const t=e?Object.assign({},hn,e):hn;let i=0;return{name:sa,eventProcessor(n){return Object.assign(n,{[t.key]:++i}),n},options:t}},oa=e=>{e(window.location.href);const t=history.pushState;history.pushState=(l=>function(){var a=l.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),a})(history.pushState);const i=history.replaceState;history.replaceState=(l=>function(){var a=l.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),a})(history.replaceState);const n=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",n);const s=function(){e(window.location.href)};return window.addEventListener("locationchange",s),()=>{window.removeEventListener("popstate",n),window.removeEventListener("locationchange",s),history.pushState=t,history.replaceState=i}},ki=JSON,aa=e=>e.toUpperCase(),ra=e=>{const t={};return e.forEach((i,n)=>{t[n]=i}),t},ca=(e,t,i)=>e.document?e:{document:e,variables:t,requestHeaders:i,signal:void 0},da=(e,t,i)=>e.query?e:{query:e,variables:t,requestHeaders:i,signal:void 0},ua=(e,t)=>e.documents?e:{documents:e,requestHeaders:t,signal:void 0},bn=e=>{var t,i;let n;const s=e.definitions.filter(l=>l.kind==="OperationDefinition");return s.length===1&&(n=(i=(t=s[0])==null?void 0:t.name)==null?void 0:i.value),n},ni=e=>{if(typeof e=="string"){let i;try{const n=Kn(e);i=bn(n)}catch{}return{query:e,operationName:i}}const t=bn(e);return{query:Hn(e),operationName:t}};class Oe extends Error{constructor(t,i){const n=`${Oe.extractMessage(t)}: ${JSON.stringify({response:t,request:i})}`;super(n),Object.setPrototypeOf(this,Oe.prototype),this.response=t,this.request=i,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Oe)}static extractMessage(t){var i,n,s;return(s=(n=(i=t.errors)==null?void 0:i[0])==null?void 0:n.message)!=null?s:`GraphQL Error (Code: ${t.status})`}}var yi={exports:{}};(function(e,t){var i=typeof self<"u"?self:Os,n=function(){function l(){this.fetch=!1,this.DOMException=i.DOMException}return l.prototype=i,new l}();(function(l){(function(a){var r={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function o(m){return m&&DataView.prototype.isPrototypeOf(m)}if(r.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(m){return m&&c.indexOf(Object.prototype.toString.call(m))>-1};function u(m){if(typeof m!="string"&&(m=String(m)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(m))throw new TypeError("Invalid character in header field name");return m.toLowerCase()}function h(m){return typeof m!="string"&&(m=String(m)),m}function p(m){var X={next:function(){var C=m.shift();return{done:C===void 0,value:C}}};return r.iterable&&(X[Symbol.iterator]=function(){return X}),X}function b(m){this.map={},m instanceof b?m.forEach(function(X,C){this.append(C,X)},this):Array.isArray(m)?m.forEach(function(X){this.append(X[0],X[1])},this):m&&Object.getOwnPropertyNames(m).forEach(function(X){this.append(X,m[X])},this)}b.prototype.append=function(m,X){m=u(m),X=h(X);var C=this.map[m];this.map[m]=C?C+", "+X:X},b.prototype.delete=function(m){delete this.map[u(m)]},b.prototype.get=function(m){return m=u(m),this.has(m)?this.map[m]:null},b.prototype.has=function(m){return this.map.hasOwnProperty(u(m))},b.prototype.set=function(m,X){this.map[u(m)]=h(X)},b.prototype.forEach=function(m,X){for(var C in this.map)this.map.hasOwnProperty(C)&&m.call(X,this.map[C],C,this)},b.prototype.keys=function(){var m=[];return this.forEach(function(X,C){m.push(C)}),p(m)},b.prototype.values=function(){var m=[];return this.forEach(function(X){m.push(X)}),p(m)},b.prototype.entries=function(){var m=[];return this.forEach(function(X,C){m.push([C,X])}),p(m)},r.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function Z(m){if(m.bodyUsed)return Promise.reject(new TypeError("Already read"));m.bodyUsed=!0}function S(m){return new Promise(function(X,C){m.onload=function(){X(m.result)},m.onerror=function(){C(m.error)}})}function y(m){var X=new FileReader,C=S(X);return X.readAsArrayBuffer(m),C}function W(m){var X=new FileReader,C=S(X);return X.readAsText(m),C}function I(m){for(var X=new Uint8Array(m),C=new Array(X.length),P=0;P<X.length;P++)C[P]=String.fromCharCode(X[P]);return C.join("")}function G(m){if(m.slice)return m.slice(0);var X=new Uint8Array(m.byteLength);return X.set(new Uint8Array(m)),X.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(m){this._bodyInit=m,m?typeof m=="string"?this._bodyText=m:r.blob&&Blob.prototype.isPrototypeOf(m)?this._bodyBlob=m:r.formData&&FormData.prototype.isPrototypeOf(m)?this._bodyFormData=m:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)?this._bodyText=m.toString():r.arrayBuffer&&r.blob&&o(m)?(this._bodyArrayBuffer=G(m.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(m)||d(m))?this._bodyArrayBuffer=G(m):this._bodyText=m=Object.prototype.toString.call(m):this._bodyText="",this.headers.get("content-type")||(typeof m=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(m)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var m=Z(this);if(m)return m;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var m=Z(this);if(m)return m;if(this._bodyBlob)return W(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var K=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(m){var X=m.toUpperCase();return K.indexOf(X)>-1?X:m}function k(m,X){X=X||{};var C=X.body;if(m instanceof k){if(m.bodyUsed)throw new TypeError("Already read");this.url=m.url,this.credentials=m.credentials,X.headers||(this.headers=new b(m.headers)),this.method=m.method,this.mode=m.mode,this.signal=m.signal,!C&&m._bodyInit!=null&&(C=m._bodyInit,m.bodyUsed=!0)}else this.url=String(m);if(this.credentials=X.credentials||this.credentials||"same-origin",(X.headers||!this.headers)&&(this.headers=new b(X.headers)),this.method=g(X.method||this.method||"GET"),this.mode=X.mode||this.mode||null,this.signal=X.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(C)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})};function M(m){var X=new FormData;return m.trim().split("&").forEach(function(C){if(C){var P=C.split("="),N=P.shift().replace(/\+/g," "),v=P.join("=").replace(/\+/g," ");X.append(decodeURIComponent(N),decodeURIComponent(v))}}),X}function J(m){var X=new b,C=m.replace(/\r?\n[\t ]+/g," ");return C.split(/\r?\n/).forEach(function(P){var N=P.split(":"),v=N.shift().trim();if(v){var oe=N.join(":").trim();X.append(v,oe)}}),X}x.call(k.prototype);function z(m,X){X||(X={}),this.type="default",this.status=X.status===void 0?200:X.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in X?X.statusText:"OK",this.headers=new b(X.headers),this.url=X.url||"",this._initBody(m)}x.call(z.prototype),z.prototype.clone=function(){return new z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},z.error=function(){var m=new z(null,{status:0,statusText:""});return m.type="error",m};var se=[301,302,303,307,308];z.redirect=function(m,X){if(se.indexOf(X)===-1)throw new RangeError("Invalid status code");return new z(null,{status:X,headers:{location:m}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(X,C){this.message=X,this.name=C;var P=Error(X);this.stack=P.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function Y(m,X){return new Promise(function(C,P){var N=new k(m,X);if(N.signal&&N.signal.aborted)return P(new a.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function oe(){v.abort()}v.onload=function(){var $={status:v.status,statusText:v.statusText,headers:J(v.getAllResponseHeaders()||"")};$.url="responseURL"in v?v.responseURL:$.headers.get("X-Request-URL");var Ae="response"in v?v.response:v.responseText;C(new z(Ae,$))},v.onerror=function(){P(new TypeError("Network request failed"))},v.ontimeout=function(){P(new TypeError("Network request failed"))},v.onabort=function(){P(new a.DOMException("Aborted","AbortError"))},v.open(N.method,N.url,!0),N.credentials==="include"?v.withCredentials=!0:N.credentials==="omit"&&(v.withCredentials=!1),"responseType"in v&&r.blob&&(v.responseType="blob"),N.headers.forEach(function($,Ae){v.setRequestHeader(Ae,$)}),N.signal&&(N.signal.addEventListener("abort",oe),v.onreadystatechange=function(){v.readyState===4&&N.signal.removeEventListener("abort",oe)}),v.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return Y.polyfill=!0,l.fetch||(l.fetch=Y,l.Headers=b,l.Request=k,l.Response=z),a.Headers=b,a.Request=k,a.Response=z,a.fetch=Y,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t})(yi,yi.exports);var wt=yi.exports;const Rt=Ps(wt),ma=el({__proto__:null,default:Rt},[wt]),Ue=e=>{let t={};return e&&(typeof Headers<"u"&&e instanceof Headers||ma&&wt.Headers&&e instanceof wt.Headers?t=ra(e):Array.isArray(e)?e.forEach(([i,n])=>{i&&n!==void 0&&(t[i]=n)}):t=e),t},Zn=e=>e.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),pa=e=>{if(!Array.isArray(e.query)){const n=e,s=[`query=${encodeURIComponent(Zn(n.query))}`];return e.variables&&s.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&s.push(`operationName=${encodeURIComponent(n.operationName)}`),s.join("&")}if(typeof e.variables<"u"&&!Array.isArray(e.variables))throw new Error("Cannot create query with given variable type, array expected");const t=e,i=e.query.reduce((n,s,l)=>(n.push({query:Zn(s),variables:t.variables?t.jsonSerializer.stringify(t.variables[l]):void 0}),n),[]);return`query=${encodeURIComponent(t.jsonSerializer.stringify(i))}`},ha=e=>t=>A(void 0,null,function*(){var i;const{url:n,query:s,variables:l,operationName:a,fetch:r,fetchOptions:o,middleware:c}=t,d=f({},t.headers);let u="",h;e==="POST"?(h=Za(s,l,a,o.jsonSerializer),typeof h=="string"&&(d["Content-Type"]="application/json")):u=pa({query:s,variables:l,operationName:a,jsonSerializer:(i=o.jsonSerializer)!=null?i:ki});const p=f({method:e,headers:d,body:h},o);let b=n,Z=p;if(c){const S=yield Promise.resolve(c(Re(f({},p),{url:n,operationName:a,variables:l}))),{url:y}=S,W=Ne(S,["url"]);b=y,Z=W}return u&&(b=`${b}?${u}`),yield r(b,Z)});class ba{constructor(t,i={}){this.url=t,this.requestConfig=i,this.rawRequest=(...n)=>A(this,null,function*(){const[s,l,a]=n,r=da(s,l,a),o=this.requestConfig,{headers:c,fetch:d=Rt,method:u="POST",requestMiddleware:h,responseMiddleware:p}=o,b=Ne(o,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:Z}=this;r.signal!==void 0&&(b.signal=r.signal);const{operationName:S}=ni(r.query);return si({url:Z,query:r.query,variables:r.variables,headers:f(f({},Ue(li(c))),Ue(r.requestHeaders)),operationName:S,fetch:d,method:u,fetchOptions:b,middleware:h}).then(y=>(p&&p(y),y)).catch(y=>{throw p&&p(y),y})})}request(t,...i){return A(this,null,function*(){const[n,s]=i,l=ca(t,n,s),a=this.requestConfig,{headers:r,fetch:o=Rt,method:c="POST",requestMiddleware:d,responseMiddleware:u}=a,h=Ne(a,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:p}=this;l.signal!==void 0&&(h.signal=l.signal);const{query:b,operationName:Z}=ni(l.document);return si({url:p,query:b,variables:l.variables,headers:f(f({},Ue(li(r))),Ue(l.requestHeaders)),operationName:Z,fetch:o,method:c,fetchOptions:h,middleware:d}).then(S=>(u&&u(S),S.data)).catch(S=>{throw u&&u(S),S})})}batchRequests(t,i){var n;const s=ua(t,i),l=this.requestConfig,{headers:a}=l,r=Ne(l,["headers"]);s.signal!==void 0&&(r.signal=s.signal);const o=s.documents.map(({document:d})=>ni(d).query),c=s.documents.map(({variables:d})=>d);return si({url:this.url,query:o,variables:c,headers:f(f({},Ue(li(a))),Ue(s.requestHeaders)),operationName:void 0,fetch:(n=this.requestConfig.fetch)!=null?n:Rt,method:this.requestConfig.method||"POST",fetchOptions:r,middleware:this.requestConfig.requestMiddleware}).then(d=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(d),d.data)).catch(d=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(d),d})}setHeaders(t){return this.requestConfig.headers=t,this}setHeader(t,i){const{headers:n}=this.requestConfig;return n?n[t]=i:this.requestConfig.headers={[t]:i},this}setEndpoint(t){return this.url=t,this}}const si=e=>A(void 0,null,function*(){var t,i;const{query:n,variables:s,fetchOptions:l}=e,a=ha(aa((t=e.method)!=null?t:"post")),r=Array.isArray(e.query),o=yield a(e),c=yield ya(o,(i=l.jsonSerializer)!=null?i:ki),d=Array.isArray(c)?!c.some(({data:h})=>!h):!!c.data,u=Array.isArray(c)||!c.errors||Array.isArray(c.errors)&&!c.errors.length||l.errorPolicy==="all"||l.errorPolicy==="ignore";if(o.ok&&u&&d){const h=c,p=Ne(h,["errors"]),b=l.errorPolicy==="ignore"?p:c;return Re(f({},r?{data:b}:b),{headers:o.headers,status:o.status})}else{const h=typeof c=="string"?{error:c}:c;throw new Oe(Re(f({},h),{status:o.status,headers:o.headers}),{query:n,variables:s})}}),Za=(e,t,i,n)=>{const s=n??ki;if(!Array.isArray(e))return s.stringify({query:e,variables:t,operationName:i});if(typeof t<"u"&&!Array.isArray(t))throw new Error("Cannot create request body with given variable type, array expected");const l=e.reduce((a,r,o)=>(a.push({query:r,variables:t?t[o]:void 0}),a),[]);return s.stringify(l)},ya=(e,t)=>A(void 0,null,function*(){let i;return e.headers.forEach((n,s)=>{s.toLowerCase()==="content-type"&&(i=n)}),i&&(i.toLowerCase().startsWith("application/json")||i.toLowerCase().startsWith("application/graphql+json")||i.toLowerCase().startsWith("application/graphql-response+json"))?t.parse(yield e.text()):e.text()}),li=e=>typeof e=="function"?e():e;var xt=function(){return xt=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},xt.apply(this,arguments)},ft=new Map,Gi=new Map,ys=!0,Kt=!1;function Gs(e){return e.replace(/[\s,]+/g," ").trim()}function Ga(e){return Gs(e.source.body.substring(e.start,e.end))}function Xa(e){var t=new Set,i=[];return e.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var s=n.name.value,l=Ga(n.loc),a=Gi.get(s);a&&!a.has(l)?ys&&console.warn("Warning: fragment with name "+s+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):a||Gi.set(s,a=new Set),a.add(l),t.has(l)||(t.add(l),i.push(n))}else i.push(n)}),xt(xt({},e),{definitions:i})}function Va(e){var t=new Set(e.definitions);t.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(s){var l=n[s];l&&typeof l=="object"&&t.add(l)})});var i=e.loc;return i&&(delete i.startToken,delete i.endToken),e}function Ia(e){var t=Gs(e);if(!ft.has(t)){var i=Kn(e,{experimentalFragmentVariables:Kt,allowLegacyFragmentVariables:Kt});if(!i||i.kind!=="Document")throw new Error("Not a valid GraphQL document.");ft.set(t,Va(Xa(i)))}return ft.get(t)}function je(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];typeof e=="string"&&(e=[e]);var n=e[0];return t.forEach(function(s,l){s&&s.kind==="Document"?n+=s.loc.source.body:n+=s,n+=e[l+1]}),Ia(n)}function Wa(){ft.clear(),Gi.clear()}function ga(){ys=!1}function Sa(){Kt=!0}function Ra(){Kt=!1}var $e={gql:je,resetCaches:Wa,disableFragmentWarnings:ga,enableExperimentalFragmentVariables:Sa,disableExperimentalFragmentVariables:Ra};(function(e){e.gql=$e.gql,e.resetCaches=$e.resetCaches,e.disableFragmentWarnings=$e.disableFragmentWarnings,e.enableExperimentalFragmentVariables=$e.enableExperimentalFragmentVariables,e.disableExperimentalFragmentVariables=$e.disableExperimentalFragmentVariables})(je||(je={}));je.default=je;const ke=je;var yn;(function(e){e.BillingQuotaExceeded="BillingQuotaExceeded"})(yn||(yn={}));const Xs=ke`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,fa=ke`
	mutation PushPayloadCompressed(
		$session_secure_id: String!
		$payload_id: ID!
		$data: String!
	) {
		pushPayloadCompressed(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,Ca=ke`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,ka=ke`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,va=ke`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,Ya=ke`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,La=ke`
	mutation initializeSession(
		$session_secure_id: String!
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
		}
	}
`,Ja=ke`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,Na=(e,t,i,n)=>e();function Ta(e,t=Na){return{PushPayload(i,n){return t(s=>e.request(Xs,i,f(f({},n),s)),"PushPayload","mutation",i)},PushPayloadCompressed(i,n){return t(s=>e.request(fa,i,f(f({},n),s)),"PushPayloadCompressed","mutation",i)},identifySession(i,n){return t(s=>e.request(Ca,i,f(f({},n),s)),"identifySession","mutation",i)},addSessionProperties(i,n){return t(s=>e.request(ka,i,f(f({},n),s)),"addSessionProperties","mutation",i)},pushMetrics(i,n){return t(s=>e.request(va,i,f(f({},n),s)),"pushMetrics","mutation",i)},addSessionFeedback(i,n){return t(s=>e.request(Ya,i,f(f({},n),s)),"addSessionFeedback","mutation",i)},initializeSession(i,n){return t(s=>e.request(La,i,f(f({},n),s)),"initializeSession","mutation",i)},Ignore(i,n){return t(s=>e.request(Ja,i,f(f({},n),s)),"Ignore","query",i)}}}const wa=e=>{switch(e){case"strict":return[!0,void 0];case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}},xa=e=>{let t;const i=()=>{clearTimeout(t),t=setTimeout(()=>{e({height:window.innerHeight,width:window.innerWidth,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,orientation:window.screen.orientation.angle})},500)};return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)};var Se;(function(e){e.USER_ID="ajs_user_id",e.USER_TRAITS="ajs_user_traits",e.ANONYMOUS_ID="ajs_anonymous_id"})(Se||(Se={}));const Ka=e=>{e(window.location.href);var t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(l){setTimeout(()=>{var a,r;try{r=JSON.parse((a=l==null?void 0:l.toString())!=null?a:"")}catch{return}(r.type==="track"||r.type==="identify")&&oi(r)&&e(r)},100),t.call(this,l)};const i=l=>{if(l.key===Se.USER_ID||l.key===Se.ANONYMOUS_ID||l.key===Se.USER_TRAITS){const{userId:a,userTraits:r}=Gn();if(a){let o={};r&&(o=JSON.parse(r));const c={type:"identify",userId:a.toString(),traits:o};oi(c)&&e(c)}}},{userId:n,userTraits:s}=Gn();if(n){let l={};s&&(l=JSON.parse(s));const a={type:"identify",userId:n.toString(),traits:l};oi(a)&&e(a)}return window.addEventListener("storage",i),Hs(({keyName:l})=>{i({key:l})}),()=>{window.removeEventListener("storage",i),XMLHttpRequest.prototype.send=t}},Gn=()=>{const e=Ge(Se.USER_ID),t=Ge(Se.USER_TRAITS),i=Ge(Se.ANONYMOUS_ID);return{userId:e,userTraits:t,anonymousId:i}},oi=e=>{if(!e)return!1;let t="";try{t=JSON.stringify(e)}catch{return!1}const i=Ua(t),n=Ge(Xe.SEGMENT_LAST_SENT_HASH_KEY);return n===void 0?(Je(Xe.SEGMENT_LAST_SENT_HASH_KEY,i),!0):i!==n?(Je(Xe.SEGMENT_LAST_SENT_HASH_KEY,i),!0):!1},Ua=e=>{var t=0,i=e.length,n=0;if(i>0)for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)|0;return t.toString()};var Xn;(function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"})(Xn||(Xn={}));function Vs(e,t){return e.nodeType,Fa(e)}function Is(e){if(e.id.length)return`#${e.id}`;if(e.classList.length){let t=[];for(const i of e.classList)t.push(`.${i}`);return`${e.nodeName.toLowerCase()}${t.join(",")}`}return e.nodeName.toLowerCase()}const Fa=e=>{let t="";const i=e.getAttribute("class"),n=e.getAttribute("id");return n&&(t=t.concat(Vn(n,"#"))),i&&(t=t.concat(Vn(i,"."))),t===""&&(t=t.concat(e.tagName.toLowerCase())),t},Vn=(e,t)=>`${t}${e.trim().split(" ").join(t)}`,Ha=e=>{const t=i=>{if(i.target){const n=i.target,s=Vs(n);e(s,i)}};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)},Ma=e=>{const t=i=>{if(i.target){const n=Vs(i.target);e(n)}};return window.addEventListener("focusin",t),()=>window.removeEventListener("focusin",t)},za=(e,t)=>{const i=Ba(e);let n=[];const s=!1,l=!0;for(let a=0;a<i.length;a++){let r=i[a].split("+");n=[],r.length>1&&(n=Ea(Ws,r)),r=r[r.length-1],r=r==="*"?"*":Pa(r),r in Ze||(Ze[r]=[]),Ze[r].push({mods:n,shortcut:i[a],key:i[a],method:t,keyup:s,keydown:l,scope:"all",splitKey:"+"})}ja(document,"keydown",a=>{Da(a)})};let te=[];function Ba(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let i=t.lastIndexOf("");for(;i>=0;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}const Ze={},ai=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1,Oa={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":ai?173:189,"=":ai?61:187,";":ai?59:186,"'":222,"[":219,"]":221,"\\":220},In={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ie={16:!1,18:!1,17:!1,91:!1},Ws={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},Pa=e=>Oa[e.toLowerCase()]||Ws[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function Ea(e,t){const i=t.slice(0,t.length-1);for(let n=0;n<i.length;n++)i[n]=e[i[n].toLowerCase()];return i}function ja(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent(`on${t}`,()=>{i(window.event)})}function Qa(e,t,i){let n;if(t.scope===i||t.scope==="all"){n=t.mods.length>0;for(const s in ie)Object.prototype.hasOwnProperty.call(ie,s)&&(!ie[s]&&t.mods.indexOf(+s)>-1||ie[s]&&t.mods.indexOf(+s)===-1)&&(n=!1);(t.mods.length===0&&!ie[16]&&!ie[18]&&!ie[17]&&!ie[91]||n||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function Da(e){const t=Ze["*"];let i=e.keyCode||e.which||e.charCode;if((i===93||i===224)&&(i=91),te.indexOf(i)===-1&&i!==229&&te.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(n=>{const s=In[n];e[n]&&te.indexOf(s)===-1?te.push(s):!e[n]&&te.indexOf(s)>-1?te.splice(te.indexOf(s),1):n==="metaKey"&&e[n]&&te.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(te=te.slice(te.indexOf(s))))}),!(i in ie&&(ie[i]=!0,!t))){for(const n in ie)Object.prototype.hasOwnProperty.call(ie,n)&&(ie[n]=e[In[n]]);if(e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(te.indexOf(17)===-1&&te.push(17),te.indexOf(18)===-1&&te.push(18),ie[17]=!0,ie[18]=!0),i in Ze){for(let n=0;n<Ze[i].length;n++)if((e.type==="keydown"&&Ze[i][n].keydown||e.type==="keyup"&&Ze[i][n].keyup)&&Ze[i][n].key){const s=Ze[i][n];Qa(e,s,"all")}}}}var ge,ot,gs,Ut,Xi,Ss=-1,Te=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ss=t.timeStamp,e(t))},!0)},vi=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},zt=function(){var e=vi();return e&&e.activationStart||0},re=function(e,t){var i=vi(),n="navigate";return Ss>=0?n="back-forward-cache":i&&(document.prerendering||zt()>0?n="prerender":document.wasDiscarded?n="restore":i.type&&(n=i.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},De=function(e,t,i){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver(function(s){Promise.resolve().then(function(){t(s.getEntries())})});return n.observe(Object.assign({type:e,buffered:!0},i||{})),n}}catch{}},ce=function(e,t,i,n){var s,l;return function(a){t.value>=0&&(a||n)&&((l=t.value-(s||0))||s===void 0)&&(s=t.value,t.delta=l,t.rating=function(r,o){return r>o[1]?"poor":r>o[0]?"needs-improvement":"good"}(t.value,i),e(t))}},Yi=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Bt=function(e){var t=function(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||e(i)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Li=function(e){var t=!1;return function(i){t||(e(i),t=!0)}},Be=-1,Wn=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Ft=function(e){document.visibilityState==="hidden"&&Be>-1&&(Be=e.type==="visibilitychange"?e.timeStamp:0,Aa())},gn=function(){addEventListener("visibilitychange",Ft,!0),addEventListener("prerenderingchange",Ft,!0)},Aa=function(){removeEventListener("visibilitychange",Ft,!0),removeEventListener("prerenderingchange",Ft,!0)},Ji=function(){return Be<0&&(Be=Wn(),gn(),Te(function(){setTimeout(function(){Be=Wn(),gn()},0)})),{get firstHiddenTime(){return Be}}},ut=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Sn=[1800,3e3],Rs=function(e,t){t=t||{},ut(function(){var i,n=Ji(),s=re("FCP"),l=De("paint",function(a){a.forEach(function(r){r.name==="first-contentful-paint"&&(l.disconnect(),r.startTime<n.firstHiddenTime&&(s.value=Math.max(r.startTime-zt(),0),s.entries.push(r),i(!0)))})});l&&(i=ce(e,s,Sn,t.reportAllChanges),Te(function(a){s=re("FCP"),i=ce(e,s,Sn,t.reportAllChanges),Yi(function(){s.value=performance.now()-a.timeStamp,i(!0)})}))})},Rn=[.1,.25],_a=function(e,t){t=t||{},Rs(Li(function(){var i,n=re("CLS",0),s=0,l=[],a=function(o){o.forEach(function(c){if(!c.hadRecentInput){var d=l[0],u=l[l.length-1];s&&c.startTime-u.startTime<1e3&&c.startTime-d.startTime<5e3?(s+=c.value,l.push(c)):(s=c.value,l=[c])}}),s>n.value&&(n.value=s,n.entries=l,i())},r=De("layout-shift",a);r&&(i=ce(e,n,Rn,t.reportAllChanges),Bt(function(){a(r.takeRecords()),i(!0)}),Te(function(){s=0,n=re("CLS",0),i=ce(e,n,Rn,t.reportAllChanges),Yi(function(){return i()})}),setTimeout(i,0))}))},tt={passive:!0,capture:!0},qa=new Date,fn=function(e,t){ge||(ge=t,ot=e,gs=new Date,Cs(removeEventListener),fs())},fs=function(){if(ot>=0&&ot<gs-qa){var e={entryType:"first-input",name:ge.type,target:ge.target,cancelable:ge.cancelable,startTime:ge.timeStamp,processingStart:ge.timeStamp+ot};Ut.forEach(function(t){t(e)}),Ut=[]}},$a=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(i,n){var s=function(){fn(i,n),a()},l=function(){a()},a=function(){removeEventListener("pointerup",s,tt),removeEventListener("pointercancel",l,tt)};addEventListener("pointerup",s,tt),addEventListener("pointercancel",l,tt)}(t,e):fn(t,e)}},Cs=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,$a,tt)})},Cn=[100,300],er=function(e,t){t=t||{},ut(function(){var i,n=Ji(),s=re("FID"),l=function(o){o.startTime<n.firstHiddenTime&&(s.value=o.processingStart-o.startTime,s.entries.push(o),i(!0))},a=function(o){o.forEach(l)},r=De("first-input",a);i=ce(e,s,Cn,t.reportAllChanges),r&&Bt(Li(function(){a(r.takeRecords()),r.disconnect()})),r&&Te(function(){var o;s=re("FID"),i=ce(e,s,Cn,t.reportAllChanges),Ut=[],ot=-1,ge=null,Cs(addEventListener),o=l,Ut.push(o),fs()})})},ks=0,ri=1/0,It=0,tr=function(e){e.forEach(function(t){t.interactionId&&(ri=Math.min(ri,t.interactionId),It=Math.max(It,t.interactionId),ks=It?(It-ri)/7+1:0)})},vs=function(){return Xi?ks:performance.interactionCount||0},ir=function(){"interactionCount"in performance||Xi||(Xi=De("event",tr,{type:"event",buffered:!0,durationThreshold:0}))},kn=[200,500],Ys=0,vn=function(){return vs()-Ys},ye=[],ci={},Yn=function(e){var t=ye[ye.length-1],i=ci[e.interactionId];if(i||ye.length<10||e.duration>t.latency){if(i)i.entries.push(e),i.latency=Math.max(i.latency,e.duration);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};ci[n.id]=n,ye.push(n)}ye.sort(function(s,l){return l.latency-s.latency}),ye.splice(10).forEach(function(s){delete ci[s.id]})}},nr=function(e,t){t=t||{},ut(function(){var i;ir();var n,s=re("INP"),l=function(r){r.forEach(function(d){d.interactionId&&Yn(d),d.entryType==="first-input"&&!ye.some(function(u){return u.entries.some(function(h){return d.duration===h.duration&&d.startTime===h.startTime})})&&Yn(d)});var o,c=(o=Math.min(ye.length-1,Math.floor(vn()/50)),ye[o]);c&&c.latency!==s.value&&(s.value=c.latency,s.entries=c.entries,n())},a=De("event",l,{durationThreshold:(i=t.durationThreshold)!==null&&i!==void 0?i:40});n=ce(e,s,kn,t.reportAllChanges),a&&("interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),Bt(function(){l(a.takeRecords()),s.value<0&&vn()>0&&(s.value=0,s.entries=[]),n(!0)}),Te(function(){ye=[],Ys=vs(),s=re("INP"),n=ce(e,s,kn,t.reportAllChanges)}))})},Ln=[2500,4e3],di={},sr=function(e,t){t=t||{},ut(function(){var i,n=Ji(),s=re("LCP"),l=function(o){var c=o[o.length-1];c&&c.startTime<n.firstHiddenTime&&(s.value=Math.max(c.startTime-zt(),0),s.entries=[c],i())},a=De("largest-contentful-paint",l);if(a){i=ce(e,s,Ln,t.reportAllChanges);var r=Li(function(){di[s.id]||(l(a.takeRecords()),a.disconnect(),di[s.id]=!0,i(!0))});["keydown","click"].forEach(function(o){addEventListener(o,function(){return setTimeout(r,0)},!0)}),Bt(r),Te(function(o){s=re("LCP"),i=ce(e,s,Ln,t.reportAllChanges),Yi(function(){s.value=performance.now()-o.timeStamp,di[s.id]=!0,i(!0)})})}})},Jn=[800,1800],lr=function e(t){document.prerendering?ut(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},or=function(e,t){t=t||{};var i=re("TTFB"),n=ce(e,i,Jn,t.reportAllChanges);lr(function(){var s=vi();if(s){var l=s.responseStart;if(l<=0||l>performance.now())return;i.value=Math.max(l-zt(),0),i.entries=[s],n(!0),Te(function(){i=re("TTFB",0),(n=ce(e,i,Jn,t.reportAllChanges))(!0)})}})};const ar=e=>(_a(e),Rs(e),er(e),sr(e),or(e),nr(e),()=>{}),rr=()=>{if(!("performance"in window&&"memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const e=window.performance;return{getDeviceDetails:()=>({deviceMemory:cr(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>{const t=ui(e.memory.jsHeapSizeLimit),i=ui(e.memory.totalJSHeapSize),n=ui(e.memory.usedJSHeapSize);return{jsHeapSizeLimit:t,totalJSHeapSize:i,usedJSHeapSize:n}}}},ui=e=>e/Math.pow(1e3,2),cr=e=>1024*e,dr=typeof window<"u",Nn=dr&&"performance"in window&&"memory"in performance?performance:{memory:{}},ur=(e,t)=>{let i=0,n=0;const s=()=>{const c=(new Date().getTime()-t)/1e3,d=Nn.memory.jsHeapSizeLimit||0,u=Nn.memory.usedJSHeapSize||0;e({jsHeapSizeLimit:d,usedJSHeapSize:u,relativeTimestamp:c,fps:i})};s();let l;l=setInterval(()=>{s()},1e3*5);let a=0,r=Date.now();const o=function(){var c=Date.now();a++,c>1e3+r&&(i=Math.round(a*1e3/(c-r)),a=0,r=c),n=requestAnimationFrame(o)};return o(),()=>{clearInterval(l),cancelAnimationFrame(n)}},mr=e=>{let t,i;if(typeof document.hidden<"u"?(t="hidden",i="visibilitychange"):typeof document.msHidden<"u"?(t="msHidden",i="msvisibilitychange"):typeof document.webkitHidden<"u"&&(t="webkitHidden",i="webkitvisibilitychange"),i===void 0)return()=>{};if(t===void 0)return()=>{};const n=t,s=()=>{const a=document[n];e(!!a)};document.addEventListener(i,s);const l=i;return()=>document.removeEventListener(l,s)},ct="highlightLogs",pr=e=>{let t=Ge(ct)||"";t=t+"["+new Date().getTime()+"] "+e+`
`,Je(ct,t)},hr=()=>Ge(ct)||"",br=e=>{if(!e)return;let t=Ge(ct)||"";t&&(t.startsWith(e)?(t=t.slice(e.length),Je(ct,t)):pr("Unable to clear logs "+e.replace(`
`," ")+" from "+t.replace(`
`," ")))},Ls="dmFyIFZyPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxqcj1PYmplY3QuZGVmaW5lUHJvcGVydGllczt2YXIgcXI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7dmFyIEJlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7dmFyIFh0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksV3Q9T2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZTt2YXIgZnQ9KEIsRCxGKT0+RCBpbiBCP1ZyKEIsRCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Rn0pOkJbRF09RixrPShCLEQpPT57Zm9yKHZhciBGIGluIER8fChEPXt9KSlYdC5jYWxsKEQsRikmJmZ0KEIsRixEW0ZdKTtpZihCZSlmb3IodmFyIEYgb2YgQmUoRCkpV3QuY2FsbChELEYpJiZmdChCLEYsRFtGXSk7cmV0dXJuIEJ9LE1lPShCLEQpPT5qcihCLHFyKEQpKTt2YXIgRWU9KEIsRCk9Pnt2YXIgRj17fTtmb3IodmFyIEogaW4gQilYdC5jYWxsKEIsSikmJkQuaW5kZXhPZihKKTwwJiYoRltKXT1CW0pdKTtpZihCIT1udWxsJiZCZSlmb3IodmFyIEogb2YgQmUoQikpRC5pbmRleE9mKEopPDAmJld0LmNhbGwoQixKKSYmKEZbSl09QltKXSk7cmV0dXJuIEZ9O3ZhciBodD0oQixELEYpPT4oZnQoQix0eXBlb2YgRCE9InN5bWJvbCI/RCsiIjpELEYpLEYpO3ZhciBYPShCLEQsRik9Pm5ldyBQcm9taXNlKChKLGZlKT0+e3ZhciAkZT1LPT57dHJ5e3NlKEYubmV4dChLKSl9Y2F0Y2goX2Upe2ZlKF9lKX19LG5lPUs9Pnt0cnl7c2UoRi50aHJvdyhLKSl9Y2F0Y2goX2Upe2ZlKF9lKX19LHNlPUs9PksuZG9uZT9KKEsudmFsdWUpOlByb21pc2UucmVzb2x2ZShLLnZhbHVlKS50aGVuKCRlLG5lKTtzZSgoRj1GLmFwcGx5KEIsRCkpLm5leHQoKSl9KTsoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gQihlLHQpe3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24obil7biYmdHlwZW9mIG4hPSJzdHJpbmciJiYhQXJyYXkuaXNBcnJheShuKSYmT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihyKXtpZihyIT09ImRlZmF1bHQiJiYhKHIgaW4gZSkpe3ZhciBpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixyKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLGkuZ2V0P2k6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG5bcl19fSl9fSl9KSxPYmplY3QuZnJlZXplKGUpfXZhciBEOyhmdW5jdGlvbihlKXtlW2UuSW5pdGlhbGl6ZT0wXT0iSW5pdGlhbGl6ZSIsZVtlLkFzeW5jRXZlbnRzPTFdPSJBc3luY0V2ZW50cyIsZVtlLklkZW50aWZ5PTJdPSJJZGVudGlmeSIsZVtlLlByb3BlcnRpZXM9M109IlByb3BlcnRpZXMiLGVbZS5NZXRyaWNzPTRdPSJNZXRyaWNzIixlW2UuRmVlZGJhY2s9NV09IkZlZWRiYWNrIixlW2UuQ3VzdG9tRXZlbnQ9Nl09IkN1c3RvbUV2ZW50IixlW2UuU3RvcD03XT0iU3RvcCJ9KShEfHwoRD17fSkpO3ZhciBGPXR5cGVvZiBnbG9iYWxUaGlzIT0idW5kZWZpbmVkIj9nbG9iYWxUaGlzOnR5cGVvZiB3aW5kb3chPSJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsIT0idW5kZWZpbmVkIj9nbG9iYWw6dHlwZW9mIHNlbGYhPSJ1bmRlZmluZWQiP3NlbGY6e307ZnVuY3Rpb24gSihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwiZGVmYXVsdCIpP2UuZGVmYXVsdDplfXZhciBmZT17ZXhwb3J0czp7fX07KGZ1bmN0aW9uKGUsdCl7dD1lLmV4cG9ydHM9bix0LmdldFNlcmlhbGl6ZT1yO2Z1bmN0aW9uIG4oaSxzLG8sYyl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGkscihzLGMpLG8pfWZ1bmN0aW9uIHIoaSxzKXt2YXIgbz1bXSxjPVtdO3JldHVybiBzPT1udWxsJiYocz1mdW5jdGlvbihkLGYpe3JldHVybiBvWzBdPT09Zj8iW0NpcmN1bGFyIH5dIjoiW0NpcmN1bGFyIH4uIitjLnNsaWNlKDAsby5pbmRleE9mKGYpKS5qb2luKCIuIikrIl0ifSksZnVuY3Rpb24oZCxmKXtpZihvLmxlbmd0aD4wKXt2YXIgdT1vLmluZGV4T2YodGhpcyk7fnU/by5zcGxpY2UodSsxKTpvLnB1c2godGhpcyksfnU/Yy5zcGxpY2UodSwxLzAsZCk6Yy5wdXNoKGQpLH5vLmluZGV4T2YoZikmJihmPXMuY2FsbCh0aGlzLGQsZikpfWVsc2Ugby5wdXNoKGYpO3JldHVybiBpPT1udWxsP2Y6aS5jYWxsKHRoaXMsZCxmKX19fSkoZmUsZmUuZXhwb3J0cyk7dmFyICRlPWZlLmV4cG9ydHMsbmU9SigkZSksc2U9ZnVuY3Rpb24oKXtyZXR1cm4gc2U9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBuLHI9MSxpPWFyZ3VtZW50cy5sZW5ndGg7cjxpO3IrKyl7bj1hcmd1bWVudHNbcl07Zm9yKHZhciBzIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scykmJih0W3NdPW5bc10pfXJldHVybiB0fSxzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIEsoZSx0KXtpZighISFlKXRocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBfZShlKXtyZXR1cm4gdHlwZW9mIGU9PSJvYmplY3QiJiZlIT09bnVsbH1mdW5jdGlvbiBadChlLHQpe2lmKCEhIWUpdGhyb3cgbmV3IEVycm9yKHQhPW51bGw/dDoiVW5leHBlY3RlZCBpbnZhcmlhbnQgdHJpZ2dlcmVkLiIpfWNvbnN0IEt0PS9cclxufFtcblxyXS9nO2Z1bmN0aW9uIFVlKGUsdCl7bGV0IG49MCxyPTE7Zm9yKGNvbnN0IGkgb2YgZS5ib2R5Lm1hdGNoQWxsKEt0KSl7aWYodHlwZW9mIGkuaW5kZXg9PSJudW1iZXIifHxadCghMSksaS5pbmRleD49dClicmVhaztuPWkuaW5kZXgraVswXS5sZW5ndGgscis9MX1yZXR1cm57bGluZTpyLGNvbHVtbjp0KzEtbn19ZnVuY3Rpb24gZW4oZSl7cmV0dXJuIGR0KGUuc291cmNlLFVlKGUuc291cmNlLGUuc3RhcnQpKX1mdW5jdGlvbiBkdChlLHQpe2NvbnN0IG49ZS5sb2NhdGlvbk9mZnNldC5jb2x1bW4tMSxyPSIiLnBhZFN0YXJ0KG4pK2UuYm9keSxpPXQubGluZS0xLHM9ZS5sb2NhdGlvbk9mZnNldC5saW5lLTEsbz10LmxpbmUrcyxjPXQubGluZT09PTE/bjowLGQ9dC5jb2x1bW4rYyxmPWAke2UubmFtZX06JHtvfToke2R9CmAsdT1yLnNwbGl0KC9cclxufFtcblxyXS9nKSxnPXVbaV07aWYoZy5sZW5ndGg+MTIwKXtjb25zdCBFPU1hdGguZmxvb3IoZC84MCksYj1kJTgwLHk9W107Zm9yKGxldCBwPTA7cDxnLmxlbmd0aDtwKz04MCl5LnB1c2goZy5zbGljZShwLHArODApKTtyZXR1cm4gZitwdChbW2Ake299IHxgLHlbMF1dLC4uLnkuc2xpY2UoMSxFKzEpLm1hcChwPT5bInwiLHBdKSxbInwiLCJeIi5wYWRTdGFydChiKV0sWyJ8Iix5W0UrMV1dXSl9cmV0dXJuIGYrcHQoW1tgJHtvLTF9IHxgLHVbaS0xXV0sW2Ake299IHxgLGddLFsifCIsIl4iLnBhZFN0YXJ0KGQpXSxbYCR7bysxfSB8YCx1W2krMV1dXSl9ZnVuY3Rpb24gcHQoZSl7Y29uc3QgdD1lLmZpbHRlcigoW3IsaV0pPT5pIT09dm9pZCAwKSxuPU1hdGgubWF4KC4uLnQubWFwKChbcl0pPT5yLmxlbmd0aCkpO3JldHVybiB0Lm1hcCgoW3IsaV0pPT5yLnBhZFN0YXJ0KG4pKyhpPyIgIitpOiIiKSkuam9pbihgCmApfWZ1bmN0aW9uIHRuKGUpe2NvbnN0IHQ9ZVswXTtyZXR1cm4gdD09bnVsbHx8ImtpbmQiaW4gdHx8Imxlbmd0aCJpbiB0P3tub2Rlczp0LHNvdXJjZTplWzFdLHBvc2l0aW9uczplWzJdLHBhdGg6ZVszXSxvcmlnaW5hbEVycm9yOmVbNF0sZXh0ZW5zaW9uczplWzVdfTp0fWNsYXNzIFZlIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IodCwuLi5uKXt2YXIgcixpLHM7Y29uc3R7bm9kZXM6byxzb3VyY2U6Yyxwb3NpdGlvbnM6ZCxwYXRoOmYsb3JpZ2luYWxFcnJvcjp1LGV4dGVuc2lvbnM6Z309dG4obik7c3VwZXIodCksdGhpcy5uYW1lPSJHcmFwaFFMRXJyb3IiLHRoaXMucGF0aD1mIT1udWxsP2Y6dm9pZCAwLHRoaXMub3JpZ2luYWxFcnJvcj11IT1udWxsP3U6dm9pZCAwLHRoaXMubm9kZXM9bXQoQXJyYXkuaXNBcnJheShvKT9vOm8/W29dOnZvaWQgMCk7Y29uc3QgRT1tdCgocj10aGlzLm5vZGVzKT09PW51bGx8fHI9PT12b2lkIDA/dm9pZCAwOnIubWFwKHk9PnkubG9jKS5maWx0ZXIoeT0+eSE9bnVsbCkpO3RoaXMuc291cmNlPWMhPW51bGw/YzpFPT1udWxsfHwoaT1FWzBdKT09PW51bGx8fGk9PT12b2lkIDA/dm9pZCAwOmkuc291cmNlLHRoaXMucG9zaXRpb25zPWQhPW51bGw/ZDpFPT1udWxsP3ZvaWQgMDpFLm1hcCh5PT55LnN0YXJ0KSx0aGlzLmxvY2F0aW9ucz1kJiZjP2QubWFwKHk9PlVlKGMseSkpOkU9PW51bGw/dm9pZCAwOkUubWFwKHk9PlVlKHkuc291cmNlLHkuc3RhcnQpKTtjb25zdCBiPV9lKHU9PW51bGw/dm9pZCAwOnUuZXh0ZW5zaW9ucyk/dT09bnVsbD92b2lkIDA6dS5leHRlbnNpb25zOnZvaWQgMDt0aGlzLmV4dGVuc2lvbnM9KHM9ZyE9bnVsbD9nOmIpIT09bnVsbCYmcyE9PXZvaWQgMD9zOk9iamVjdC5jcmVhdGUobnVsbCksT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7bWVzc2FnZTp7d3JpdGFibGU6ITAsZW51bWVyYWJsZTohMH0sbmFtZTp7ZW51bWVyYWJsZTohMX0sbm9kZXM6e2VudW1lcmFibGU6ITF9LHNvdXJjZTp7ZW51bWVyYWJsZTohMX0scG9zaXRpb25zOntlbnVtZXJhYmxlOiExfSxvcmlnaW5hbEVycm9yOntlbnVtZXJhYmxlOiExfX0pLHUhPW51bGwmJnUuc3RhY2s/T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsInN0YWNrIix7dmFsdWU6dS5zdGFjayx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9KTpFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLFZlKTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTpFcnJvcigpLnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkdyYXBoUUxFcnJvciJ9dG9TdHJpbmcoKXtsZXQgdD10aGlzLm1lc3NhZ2U7aWYodGhpcy5ub2Rlcylmb3IoY29uc3QgbiBvZiB0aGlzLm5vZGVzKW4ubG9jJiYodCs9YAoKYCtlbihuLmxvYykpO2Vsc2UgaWYodGhpcy5zb3VyY2UmJnRoaXMubG9jYXRpb25zKWZvcihjb25zdCBuIG9mIHRoaXMubG9jYXRpb25zKXQrPWAKCmArZHQodGhpcy5zb3VyY2Usbik7cmV0dXJuIHR9dG9KU09OKCl7Y29uc3QgdD17bWVzc2FnZTp0aGlzLm1lc3NhZ2V9O3JldHVybiB0aGlzLmxvY2F0aW9ucyE9bnVsbCYmKHQubG9jYXRpb25zPXRoaXMubG9jYXRpb25zKSx0aGlzLnBhdGghPW51bGwmJih0LnBhdGg9dGhpcy5wYXRoKSx0aGlzLmV4dGVuc2lvbnMhPW51bGwmJk9iamVjdC5rZXlzKHRoaXMuZXh0ZW5zaW9ucykubGVuZ3RoPjAmJih0LmV4dGVuc2lvbnM9dGhpcy5leHRlbnNpb25zKSx0fX1mdW5jdGlvbiBtdChlKXtyZXR1cm4gZT09PXZvaWQgMHx8ZS5sZW5ndGg9PT0wP3ZvaWQgMDplfWZ1bmN0aW9uIEcoZSx0LG4pe3JldHVybiBuZXcgVmUoYFN5bnRheCBFcnJvcjogJHtufWAse3NvdXJjZTplLHBvc2l0aW9uczpbdF19KX1jbGFzcyBubntjb25zdHJ1Y3Rvcih0LG4scil7dGhpcy5zdGFydD10LnN0YXJ0LHRoaXMuZW5kPW4uZW5kLHRoaXMuc3RhcnRUb2tlbj10LHRoaXMuZW5kVG9rZW49bix0aGlzLnNvdXJjZT1yfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkxvY2F0aW9uIn10b0pTT04oKXtyZXR1cm57c3RhcnQ6dGhpcy5zdGFydCxlbmQ6dGhpcy5lbmR9fX1jbGFzcyB5dHtjb25zdHJ1Y3Rvcih0LG4scixpLHMsbyl7dGhpcy5raW5kPXQsdGhpcy5zdGFydD1uLHRoaXMuZW5kPXIsdGhpcy5saW5lPWksdGhpcy5jb2x1bW49cyx0aGlzLnZhbHVlPW8sdGhpcy5wcmV2PW51bGwsdGhpcy5uZXh0PW51bGx9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iVG9rZW4ifXRvSlNPTigpe3JldHVybntraW5kOnRoaXMua2luZCx2YWx1ZTp0aGlzLnZhbHVlLGxpbmU6dGhpcy5saW5lLGNvbHVtbjp0aGlzLmNvbHVtbn19fWNvbnN0IHZ0PXtOYW1lOltdLERvY3VtZW50OlsiZGVmaW5pdGlvbnMiXSxPcGVyYXRpb25EZWZpbml0aW9uOlsibmFtZSIsInZhcmlhYmxlRGVmaW5pdGlvbnMiLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sVmFyaWFibGVEZWZpbml0aW9uOlsidmFyaWFibGUiLCJ0eXBlIiwiZGVmYXVsdFZhbHVlIiwiZGlyZWN0aXZlcyJdLFZhcmlhYmxlOlsibmFtZSJdLFNlbGVjdGlvblNldDpbInNlbGVjdGlvbnMiXSxGaWVsZDpbImFsaWFzIiwibmFtZSIsImFyZ3VtZW50cyIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxBcmd1bWVudDpbIm5hbWUiLCJ2YWx1ZSJdLEZyYWdtZW50U3ByZWFkOlsibmFtZSIsImRpcmVjdGl2ZXMiXSxJbmxpbmVGcmFnbWVudDpbInR5cGVDb25kaXRpb24iLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sRnJhZ21lbnREZWZpbml0aW9uOlsibmFtZSIsInZhcmlhYmxlRGVmaW5pdGlvbnMiLCJ0eXBlQ29uZGl0aW9uIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEludFZhbHVlOltdLEZsb2F0VmFsdWU6W10sU3RyaW5nVmFsdWU6W10sQm9vbGVhblZhbHVlOltdLE51bGxWYWx1ZTpbXSxFbnVtVmFsdWU6W10sTGlzdFZhbHVlOlsidmFsdWVzIl0sT2JqZWN0VmFsdWU6WyJmaWVsZHMiXSxPYmplY3RGaWVsZDpbIm5hbWUiLCJ2YWx1ZSJdLERpcmVjdGl2ZTpbIm5hbWUiLCJhcmd1bWVudHMiXSxOYW1lZFR5cGU6WyJuYW1lIl0sTGlzdFR5cGU6WyJ0eXBlIl0sTm9uTnVsbFR5cGU6WyJ0eXBlIl0sU2NoZW1hRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwiZGlyZWN0aXZlcyIsIm9wZXJhdGlvblR5cGVzIl0sT3BlcmF0aW9uVHlwZURlZmluaXRpb246WyJ0eXBlIl0sU2NhbGFyVHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIl0sT2JqZWN0VHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLEZpZWxkRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImFyZ3VtZW50cyIsInR5cGUiLCJkaXJlY3RpdmVzIl0sSW5wdXRWYWx1ZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJ0eXBlIiwiZGVmYXVsdFZhbHVlIiwiZGlyZWN0aXZlcyJdLEludGVyZmFjZVR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxVbmlvblR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyIsInR5cGVzIl0sRW51bVR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyIsInZhbHVlcyJdLEVudW1WYWx1ZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIl0sSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxEaXJlY3RpdmVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiYXJndW1lbnRzIiwibG9jYXRpb25zIl0sU2NoZW1hRXh0ZW5zaW9uOlsiZGlyZWN0aXZlcyIsIm9wZXJhdGlvblR5cGVzIl0sU2NhbGFyVHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIl0sT2JqZWN0VHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJpbnRlcmZhY2VzIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdLEludGVyZmFjZVR5cGVFeHRlbnNpb246WyJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxVbmlvblR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyIsInR5cGVzIl0sRW51bVR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyIsInZhbHVlcyJdLElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbjpbIm5hbWUiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl19LHJuPW5ldyBTZXQoT2JqZWN0LmtleXModnQpKTtmdW5jdGlvbiBndChlKXtjb25zdCB0PWU9PW51bGw/dm9pZCAwOmUua2luZDtyZXR1cm4gdHlwZW9mIHQ9PSJzdHJpbmciJiZybi5oYXModCl9dmFyIGhlOyhmdW5jdGlvbihlKXtlLlFVRVJZPSJxdWVyeSIsZS5NVVRBVElPTj0ibXV0YXRpb24iLGUuU1VCU0NSSVBUSU9OPSJzdWJzY3JpcHRpb24ifSkoaGV8fChoZT17fSkpO3ZhciBqZTsoZnVuY3Rpb24oZSl7ZS5RVUVSWT0iUVVFUlkiLGUuTVVUQVRJT049Ik1VVEFUSU9OIixlLlNVQlNDUklQVElPTj0iU1VCU0NSSVBUSU9OIixlLkZJRUxEPSJGSUVMRCIsZS5GUkFHTUVOVF9ERUZJTklUSU9OPSJGUkFHTUVOVF9ERUZJTklUSU9OIixlLkZSQUdNRU5UX1NQUkVBRD0iRlJBR01FTlRfU1BSRUFEIixlLklOTElORV9GUkFHTUVOVD0iSU5MSU5FX0ZSQUdNRU5UIixlLlZBUklBQkxFX0RFRklOSVRJT049IlZBUklBQkxFX0RFRklOSVRJT04iLGUuU0NIRU1BPSJTQ0hFTUEiLGUuU0NBTEFSPSJTQ0FMQVIiLGUuT0JKRUNUPSJPQkpFQ1QiLGUuRklFTERfREVGSU5JVElPTj0iRklFTERfREVGSU5JVElPTiIsZS5BUkdVTUVOVF9ERUZJTklUSU9OPSJBUkdVTUVOVF9ERUZJTklUSU9OIixlLklOVEVSRkFDRT0iSU5URVJGQUNFIixlLlVOSU9OPSJVTklPTiIsZS5FTlVNPSJFTlVNIixlLkVOVU1fVkFMVUU9IkVOVU1fVkFMVUUiLGUuSU5QVVRfT0JKRUNUPSJJTlBVVF9PQkpFQ1QiLGUuSU5QVVRfRklFTERfREVGSU5JVElPTj0iSU5QVVRfRklFTERfREVGSU5JVElPTiJ9KShqZXx8KGplPXt9KSk7dmFyIFQ7KGZ1bmN0aW9uKGUpe2UuTkFNRT0iTmFtZSIsZS5ET0NVTUVOVD0iRG9jdW1lbnQiLGUuT1BFUkFUSU9OX0RFRklOSVRJT049Ik9wZXJhdGlvbkRlZmluaXRpb24iLGUuVkFSSUFCTEVfREVGSU5JVElPTj0iVmFyaWFibGVEZWZpbml0aW9uIixlLlNFTEVDVElPTl9TRVQ9IlNlbGVjdGlvblNldCIsZS5GSUVMRD0iRmllbGQiLGUuQVJHVU1FTlQ9IkFyZ3VtZW50IixlLkZSQUdNRU5UX1NQUkVBRD0iRnJhZ21lbnRTcHJlYWQiLGUuSU5MSU5FX0ZSQUdNRU5UPSJJbmxpbmVGcmFnbWVudCIsZS5GUkFHTUVOVF9ERUZJTklUSU9OPSJGcmFnbWVudERlZmluaXRpb24iLGUuVkFSSUFCTEU9IlZhcmlhYmxlIixlLklOVD0iSW50VmFsdWUiLGUuRkxPQVQ9IkZsb2F0VmFsdWUiLGUuU1RSSU5HPSJTdHJpbmdWYWx1ZSIsZS5CT09MRUFOPSJCb29sZWFuVmFsdWUiLGUuTlVMTD0iTnVsbFZhbHVlIixlLkVOVU09IkVudW1WYWx1ZSIsZS5MSVNUPSJMaXN0VmFsdWUiLGUuT0JKRUNUPSJPYmplY3RWYWx1ZSIsZS5PQkpFQ1RfRklFTEQ9Ik9iamVjdEZpZWxkIixlLkRJUkVDVElWRT0iRGlyZWN0aXZlIixlLk5BTUVEX1RZUEU9Ik5hbWVkVHlwZSIsZS5MSVNUX1RZUEU9Ikxpc3RUeXBlIixlLk5PTl9OVUxMX1RZUEU9Ik5vbk51bGxUeXBlIixlLlNDSEVNQV9ERUZJTklUSU9OPSJTY2hlbWFEZWZpbml0aW9uIixlLk9QRVJBVElPTl9UWVBFX0RFRklOSVRJT049Ik9wZXJhdGlvblR5cGVEZWZpbml0aW9uIixlLlNDQUxBUl9UWVBFX0RFRklOSVRJT049IlNjYWxhclR5cGVEZWZpbml0aW9uIixlLk9CSkVDVF9UWVBFX0RFRklOSVRJT049Ik9iamVjdFR5cGVEZWZpbml0aW9uIixlLkZJRUxEX0RFRklOSVRJT049IkZpZWxkRGVmaW5pdGlvbiIsZS5JTlBVVF9WQUxVRV9ERUZJTklUSU9OPSJJbnB1dFZhbHVlRGVmaW5pdGlvbiIsZS5JTlRFUkZBQ0VfVFlQRV9ERUZJTklUSU9OPSJJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbiIsZS5VTklPTl9UWVBFX0RFRklOSVRJT049IlVuaW9uVHlwZURlZmluaXRpb24iLGUuRU5VTV9UWVBFX0RFRklOSVRJT049IkVudW1UeXBlRGVmaW5pdGlvbiIsZS5FTlVNX1ZBTFVFX0RFRklOSVRJT049IkVudW1WYWx1ZURlZmluaXRpb24iLGUuSU5QVVRfT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbiIsZS5ESVJFQ1RJVkVfREVGSU5JVElPTj0iRGlyZWN0aXZlRGVmaW5pdGlvbiIsZS5TQ0hFTUFfRVhURU5TSU9OPSJTY2hlbWFFeHRlbnNpb24iLGUuU0NBTEFSX1RZUEVfRVhURU5TSU9OPSJTY2FsYXJUeXBlRXh0ZW5zaW9uIixlLk9CSkVDVF9UWVBFX0VYVEVOU0lPTj0iT2JqZWN0VHlwZUV4dGVuc2lvbiIsZS5JTlRFUkZBQ0VfVFlQRV9FWFRFTlNJT049IkludGVyZmFjZVR5cGVFeHRlbnNpb24iLGUuVU5JT05fVFlQRV9FWFRFTlNJT049IlVuaW9uVHlwZUV4dGVuc2lvbiIsZS5FTlVNX1RZUEVfRVhURU5TSU9OPSJFbnVtVHlwZUV4dGVuc2lvbiIsZS5JTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT049IklucHV0T2JqZWN0VHlwZUV4dGVuc2lvbiJ9KShUfHwoVD17fSkpO2Z1bmN0aW9uIHFlKGUpe3JldHVybiBlPT09OXx8ZT09PTMyfWZ1bmN0aW9uIFRlKGUpe3JldHVybiBlPj00OCYmZTw9NTd9ZnVuY3Rpb24gRXQoZSl7cmV0dXJuIGU+PTk3JiZlPD0xMjJ8fGU+PTY1JiZlPD05MH1mdW5jdGlvbiBfdChlKXtyZXR1cm4gRXQoZSl8fGU9PT05NX1mdW5jdGlvbiBzbihlKXtyZXR1cm4gRXQoZSl8fFRlKGUpfHxlPT09OTV9ZnVuY3Rpb24gb24oZSl7dmFyIHQ7bGV0IG49TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIscj1udWxsLGk9LTE7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBzO2NvbnN0IGM9ZVtvXSxkPWFuKGMpO2QhPT1jLmxlbmd0aCYmKHI9KHM9cikhPT1udWxsJiZzIT09dm9pZCAwP3M6byxpPW8sbyE9PTAmJmQ8biYmKG49ZCkpfXJldHVybiBlLm1hcCgobyxjKT0+Yz09PTA/bzpvLnNsaWNlKG4pKS5zbGljZSgodD1yKSE9PW51bGwmJnQhPT12b2lkIDA/dDowLGkrMSl9ZnVuY3Rpb24gYW4oZSl7bGV0IHQ9MDtmb3IoO3Q8ZS5sZW5ndGgmJnFlKGUuY2hhckNvZGVBdCh0KSk7KSsrdDtyZXR1cm4gdH1mdW5jdGlvbiBjbihlLHQpe2NvbnN0IG49ZS5yZXBsYWNlKC8iIiIvZywnXFwiIiInKSxyPW4uc3BsaXQoL1xyXG58W1xuXHJdL2cpLGk9ci5sZW5ndGg9PT0xLHM9ci5sZW5ndGg+MSYmci5zbGljZSgxKS5ldmVyeShiPT5iLmxlbmd0aD09PTB8fHFlKGIuY2hhckNvZGVBdCgwKSkpLG89bi5lbmRzV2l0aCgnXFwiIiInKSxjPWUuZW5kc1dpdGgoJyInKSYmIW8sZD1lLmVuZHNXaXRoKCJcXCIpLGY9Y3x8ZCx1PSEodCE9bnVsbCYmdC5taW5pbWl6ZSkmJighaXx8ZS5sZW5ndGg+NzB8fGZ8fHN8fG8pO2xldCBnPSIiO2NvbnN0IEU9aSYmcWUoZS5jaGFyQ29kZUF0KDApKTtyZXR1cm4odSYmIUV8fHMpJiYoZys9YApgKSxnKz1uLCh1fHxmKSYmKGcrPWAKYCksJyIiIicrZysnIiIiJ312YXIgbDsoZnVuY3Rpb24oZSl7ZS5TT0Y9IjxTT0Y+IixlLkVPRj0iPEVPRj4iLGUuQkFORz0iISIsZS5ET0xMQVI9IiQiLGUuQU1QPSImIixlLlBBUkVOX0w9IigiLGUuUEFSRU5fUj0iKSIsZS5TUFJFQUQ9Ii4uLiIsZS5DT0xPTj0iOiIsZS5FUVVBTFM9Ij0iLGUuQVQ9IkAiLGUuQlJBQ0tFVF9MPSJbIixlLkJSQUNLRVRfUj0iXSIsZS5CUkFDRV9MPSJ7IixlLlBJUEU9InwiLGUuQlJBQ0VfUj0ifSIsZS5OQU1FPSJOYW1lIixlLklOVD0iSW50IixlLkZMT0FUPSJGbG9hdCIsZS5TVFJJTkc9IlN0cmluZyIsZS5CTE9DS19TVFJJTkc9IkJsb2NrU3RyaW5nIixlLkNPTU1FTlQ9IkNvbW1lbnQifSkobHx8KGw9e30pKTtjbGFzcyB1bntjb25zdHJ1Y3Rvcih0KXtjb25zdCBuPW5ldyB5dChsLlNPRiwwLDAsMCwwKTt0aGlzLnNvdXJjZT10LHRoaXMubGFzdFRva2VuPW4sdGhpcy50b2tlbj1uLHRoaXMubGluZT0xLHRoaXMubGluZVN0YXJ0PTB9Z2V0W1N5bWJvbC50b1N0cmluZ1RhZ10oKXtyZXR1cm4iTGV4ZXIifWFkdmFuY2UoKXtyZXR1cm4gdGhpcy5sYXN0VG9rZW49dGhpcy50b2tlbix0aGlzLnRva2VuPXRoaXMubG9va2FoZWFkKCl9bG9va2FoZWFkKCl7bGV0IHQ9dGhpcy50b2tlbjtpZih0LmtpbmQhPT1sLkVPRilkbyBpZih0Lm5leHQpdD10Lm5leHQ7ZWxzZXtjb25zdCBuPWZuKHRoaXMsdC5lbmQpO3QubmV4dD1uLG4ucHJldj10LHQ9bn13aGlsZSh0LmtpbmQ9PT1sLkNPTU1FTlQpO3JldHVybiB0fX1mdW5jdGlvbiBsbihlKXtyZXR1cm4gZT09PWwuQkFOR3x8ZT09PWwuRE9MTEFSfHxlPT09bC5BTVB8fGU9PT1sLlBBUkVOX0x8fGU9PT1sLlBBUkVOX1J8fGU9PT1sLlNQUkVBRHx8ZT09PWwuQ09MT058fGU9PT1sLkVRVUFMU3x8ZT09PWwuQVR8fGU9PT1sLkJSQUNLRVRfTHx8ZT09PWwuQlJBQ0tFVF9SfHxlPT09bC5CUkFDRV9MfHxlPT09bC5QSVBFfHxlPT09bC5CUkFDRV9SfWZ1bmN0aW9uIGRlKGUpe3JldHVybiBlPj0wJiZlPD01NTI5NXx8ZT49NTczNDQmJmU8PTExMTQxMTF9ZnVuY3Rpb24gT2UoZSx0KXtyZXR1cm4gVHQoZS5jaGFyQ29kZUF0KHQpKSYmYnQoZS5jaGFyQ29kZUF0KHQrMSkpfWZ1bmN0aW9uIFR0KGUpe3JldHVybiBlPj01NTI5NiYmZTw9NTYzMTl9ZnVuY3Rpb24gYnQoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiB1ZShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keS5jb2RlUG9pbnRBdCh0KTtpZihuPT09dm9pZCAwKXJldHVybiBsLkVPRjtpZihuPj0zMiYmbjw9MTI2KXtjb25zdCByPVN0cmluZy5mcm9tQ29kZVBvaW50KG4pO3JldHVybiByPT09JyInP2AnIidgOmAiJHtyfSJgfXJldHVybiJVKyIrbi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCg0LCIwIil9ZnVuY3Rpb24gVShlLHQsbixyLGkpe2NvbnN0IHM9ZS5saW5lLG89MStuLWUubGluZVN0YXJ0O3JldHVybiBuZXcgeXQodCxuLHIscyxvLGkpfWZ1bmN0aW9uIGZuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dDtmb3IoO2k8cjspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KGkpO3N3aXRjaChzKXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytpO2NvbnRpbnVlO2Nhc2UgMTA6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAxMzpuLmNoYXJDb2RlQXQoaSsxKT09PTEwP2krPTI6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4gaG4oZSxpKTtjYXNlIDMzOnJldHVybiBVKGUsbC5CQU5HLGksaSsxKTtjYXNlIDM2OnJldHVybiBVKGUsbC5ET0xMQVIsaSxpKzEpO2Nhc2UgMzg6cmV0dXJuIFUoZSxsLkFNUCxpLGkrMSk7Y2FzZSA0MDpyZXR1cm4gVShlLGwuUEFSRU5fTCxpLGkrMSk7Y2FzZSA0MTpyZXR1cm4gVShlLGwuUEFSRU5fUixpLGkrMSk7Y2FzZSA0NjppZihuLmNoYXJDb2RlQXQoaSsxKT09PTQ2JiZuLmNoYXJDb2RlQXQoaSsyKT09PTQ2KXJldHVybiBVKGUsbC5TUFJFQUQsaSxpKzMpO2JyZWFrO2Nhc2UgNTg6cmV0dXJuIFUoZSxsLkNPTE9OLGksaSsxKTtjYXNlIDYxOnJldHVybiBVKGUsbC5FUVVBTFMsaSxpKzEpO2Nhc2UgNjQ6cmV0dXJuIFUoZSxsLkFULGksaSsxKTtjYXNlIDkxOnJldHVybiBVKGUsbC5CUkFDS0VUX0wsaSxpKzEpO2Nhc2UgOTM6cmV0dXJuIFUoZSxsLkJSQUNLRVRfUixpLGkrMSk7Y2FzZSAxMjM6cmV0dXJuIFUoZSxsLkJSQUNFX0wsaSxpKzEpO2Nhc2UgMTI0OnJldHVybiBVKGUsbC5QSVBFLGksaSsxKTtjYXNlIDEyNTpyZXR1cm4gVShlLGwuQlJBQ0VfUixpLGkrMSk7Y2FzZSAzNDpyZXR1cm4gbi5jaGFyQ29kZUF0KGkrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KGkrMik9PT0zND9nbihlLGkpOnBuKGUsaSl9aWYoVGUocyl8fHM9PT00NSlyZXR1cm4gZG4oZSxpLHMpO2lmKF90KHMpKXJldHVybiBFbihlLGkpO3Rocm93IEcoZS5zb3VyY2UsaSxzPT09Mzk/YFVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKCIpP2A6ZGUocyl8fE9lKG4saSk/YFVuZXhwZWN0ZWQgY2hhcmFjdGVyOiAke3VlKGUsaSl9LmA6YEludmFsaWQgY2hhcmFjdGVyOiAke3VlKGUsaSl9LmApfXJldHVybiBVKGUsbC5FT0YscixyKX1mdW5jdGlvbiBobihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPXQrMTtmb3IoO2k8cjspe2NvbnN0IHM9bi5jaGFyQ29kZUF0KGkpO2lmKHM9PT0xMHx8cz09PTEzKWJyZWFrO2lmKGRlKHMpKSsraTtlbHNlIGlmKE9lKG4saSkpaSs9MjtlbHNlIGJyZWFrfXJldHVybiBVKGUsbC5DT01NRU5ULHQsaSxuLnNsaWNlKHQrMSxpKSl9ZnVuY3Rpb24gZG4oZSx0LG4pe2NvbnN0IHI9ZS5zb3VyY2UuYm9keTtsZXQgaT10LHM9bixvPSExO2lmKHM9PT00NSYmKHM9ci5jaGFyQ29kZUF0KCsraSkpLHM9PT00OCl7aWYocz1yLmNoYXJDb2RlQXQoKytpKSxUZShzKSl0aHJvdyBHKGUuc291cmNlLGksYEludmFsaWQgbnVtYmVyLCB1bmV4cGVjdGVkIGRpZ2l0IGFmdGVyIDA6ICR7dWUoZSxpKX0uYCl9ZWxzZSBpPUdlKGUsaSxzKSxzPXIuY2hhckNvZGVBdChpKTtpZihzPT09NDYmJihvPSEwLHM9ci5jaGFyQ29kZUF0KCsraSksaT1HZShlLGkscykscz1yLmNoYXJDb2RlQXQoaSkpLChzPT09Njl8fHM9PT0xMDEpJiYobz0hMCxzPXIuY2hhckNvZGVBdCgrK2kpLChzPT09NDN8fHM9PT00NSkmJihzPXIuY2hhckNvZGVBdCgrK2kpKSxpPUdlKGUsaSxzKSxzPXIuY2hhckNvZGVBdChpKSkscz09PTQ2fHxfdChzKSl0aHJvdyBHKGUuc291cmNlLGksYEludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiAke3VlKGUsaSl9LmApO3JldHVybiBVKGUsbz9sLkZMT0FUOmwuSU5ULHQsaSxyLnNsaWNlKHQsaSkpfWZ1bmN0aW9uIEdlKGUsdCxuKXtpZighVGUobikpdGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHt1ZShlLHQpfS5gKTtjb25zdCByPWUuc291cmNlLmJvZHk7bGV0IGk9dCsxO2Zvcig7VGUoci5jaGFyQ29kZUF0KGkpKTspKytpO3JldHVybiBpfWZ1bmN0aW9uIHBuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxLHM9aSxvPSIiO2Zvcig7aTxyOyl7Y29uc3QgYz1uLmNoYXJDb2RlQXQoaSk7aWYoYz09PTM0KXJldHVybiBvKz1uLnNsaWNlKHMsaSksVShlLGwuU1RSSU5HLHQsaSsxLG8pO2lmKGM9PT05Mil7bys9bi5zbGljZShzLGkpO2NvbnN0IGQ9bi5jaGFyQ29kZUF0KGkrMSk9PT0xMTc/bi5jaGFyQ29kZUF0KGkrMik9PT0xMjM/bW4oZSxpKTp5bihlLGkpOnZuKGUsaSk7bys9ZC52YWx1ZSxpKz1kLnNpemUscz1pO2NvbnRpbnVlfWlmKGM9PT0xMHx8Yz09PTEzKWJyZWFrO2lmKGRlKGMpKSsraTtlbHNlIGlmKE9lKG4saSkpaSs9MjtlbHNlIHRocm93IEcoZS5zb3VyY2UsaSxgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHt1ZShlLGkpfS5gKX10aHJvdyBHKGUuc291cmNlLGksIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gbW4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IHI9MCxpPTM7Zm9yKDtpPDEyOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQodCtpKyspO2lmKHM9PT0xMjUpe2lmKGk8NXx8IWRlKHIpKWJyZWFrO3JldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyKSxzaXplOml9fWlmKHI9cjw8NHxiZShzKSxyPDApYnJlYWt9dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCtpKX0iLmApfWZ1bmN0aW9uIHluKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9TnQobix0KzIpO2lmKGRlKHIpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyKSxzaXplOjZ9O2lmKFR0KHIpJiZuLmNoYXJDb2RlQXQodCs2KT09PTkyJiZuLmNoYXJDb2RlQXQodCs3KT09PTExNyl7Y29uc3QgaT1OdChuLHQrOCk7aWYoYnQoaSkpcmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KHIsaSksc2l6ZToxMn19dGhyb3cgRyhlLnNvdXJjZSx0LGBJbnZhbGlkIFVuaWNvZGUgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCs2KX0iLmApfWZ1bmN0aW9uIE50KGUsdCl7cmV0dXJuIGJlKGUuY2hhckNvZGVBdCh0KSk8PDEyfGJlKGUuY2hhckNvZGVBdCh0KzEpKTw8OHxiZShlLmNoYXJDb2RlQXQodCsyKSk8PDR8YmUoZS5jaGFyQ29kZUF0KHQrMykpfWZ1bmN0aW9uIGJlKGUpe3JldHVybiBlPj00OCYmZTw9NTc/ZS00ODplPj02NSYmZTw9NzA/ZS01NTplPj05NyYmZTw9MTAyP2UtODc6LTF9ZnVuY3Rpb24gdm4oZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOmAKYCxzaXplOjJ9O2Nhc2UgMTE0OnJldHVybnt2YWx1ZToiXHIiLHNpemU6Mn07Y2FzZSAxMTY6cmV0dXJue3ZhbHVlOiIJIixzaXplOjJ9fXRocm93IEcoZS5zb3VyY2UsdCxgSW52YWxpZCBjaGFyYWN0ZXIgZXNjYXBlIHNlcXVlbmNlOiAiJHtuLnNsaWNlKHQsdCsyKX0iLmApfWZ1bmN0aW9uIGduKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9ZS5saW5lU3RhcnQscz10KzMsbz1zLGM9IiI7Y29uc3QgZD1bXTtmb3IoO3M8cjspe2NvbnN0IGY9bi5jaGFyQ29kZUF0KHMpO2lmKGY9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCl7Yys9bi5zbGljZShvLHMpLGQucHVzaChjKTtjb25zdCB1PVUoZSxsLkJMT0NLX1NUUklORyx0LHMrMyxvbihkKS5qb2luKGAKYCkpO3JldHVybiBlLmxpbmUrPWQubGVuZ3RoLTEsZS5saW5lU3RhcnQ9aSx1fWlmKGY9PT05MiYmbi5jaGFyQ29kZUF0KHMrMSk9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMik9PT0zNCYmbi5jaGFyQ29kZUF0KHMrMyk9PT0zNCl7Yys9bi5zbGljZShvLHMpLG89cysxLHMrPTQ7Y29udGludWV9aWYoZj09PTEwfHxmPT09MTMpe2MrPW4uc2xpY2UobyxzKSxkLnB1c2goYyksZj09PTEzJiZuLmNoYXJDb2RlQXQocysxKT09PTEwP3MrPTI6KytzLGM9IiIsbz1zLGk9cztjb250aW51ZX1pZihkZShmKSkrK3M7ZWxzZSBpZihPZShuLHMpKXMrPTI7ZWxzZSB0aHJvdyBHKGUuc291cmNlLHMsYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7dWUoZSxzKX0uYCl9dGhyb3cgRyhlLnNvdXJjZSxzLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIEVuKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxO2Zvcig7aTxyOyl7Y29uc3Qgcz1uLmNoYXJDb2RlQXQoaSk7aWYoc24ocykpKytpO2Vsc2UgYnJlYWt9cmV0dXJuIFUoZSxsLk5BTUUsdCxpLG4uc2xpY2UodCxpKSl9Y29uc3QgX249MTAseHQ9MjtmdW5jdGlvbiBIZShlKXtyZXR1cm4gU2UoZSxbXSl9ZnVuY3Rpb24gU2UoZSx0KXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7Y2FzZSJmdW5jdGlvbiI6cmV0dXJuIGUubmFtZT9gW2Z1bmN0aW9uICR7ZS5uYW1lfV1gOiJbZnVuY3Rpb25dIjtjYXNlIm9iamVjdCI6cmV0dXJuIFRuKGUsdCk7ZGVmYXVsdDpyZXR1cm4gU3RyaW5nKGUpfX1mdW5jdGlvbiBUbihlLHQpe2lmKGU9PT1udWxsKXJldHVybiJudWxsIjtpZih0LmluY2x1ZGVzKGUpKXJldHVybiJbQ2lyY3VsYXJdIjtjb25zdCBuPVsuLi50LGVdO2lmKGJuKGUpKXtjb25zdCByPWUudG9KU09OKCk7aWYociE9PWUpcmV0dXJuIHR5cGVvZiByPT0ic3RyaW5nIj9yOlNlKHIsbil9ZWxzZSBpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiB4bihlLG4pO3JldHVybiBObihlLG4pfWZ1bmN0aW9uIGJuKGUpe3JldHVybiB0eXBlb2YgZS50b0pTT049PSJmdW5jdGlvbiJ9ZnVuY3Rpb24gTm4oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO3JldHVybiBuLmxlbmd0aD09PTA/Int9Ijp0Lmxlbmd0aD54dD8iWyIrQW4oZSkrIl0iOiJ7ICIrbi5tYXAoKFtpLHNdKT0+aSsiOiAiK1NlKHMsdCkpLmpvaW4oIiwgIikrIiB9In1mdW5jdGlvbiB4bihlLHQpe2lmKGUubGVuZ3RoPT09MClyZXR1cm4iW10iO2lmKHQubGVuZ3RoPnh0KXJldHVybiJbQXJyYXldIjtjb25zdCBuPU1hdGgubWluKF9uLGUubGVuZ3RoKSxyPWUubGVuZ3RoLW4saT1bXTtmb3IobGV0IHM9MDtzPG47KytzKWkucHVzaChTZShlW3NdLHQpKTtyZXR1cm4gcj09PTE/aS5wdXNoKCIuLi4gMSBtb3JlIGl0ZW0iKTpyPjEmJmkucHVzaChgLi4uICR7cn0gbW9yZSBpdGVtc2ApLCJbIitpLmpvaW4oIiwgIikrIl0ifWZ1bmN0aW9uIEFuKGUpe2NvbnN0IHQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLnJlcGxhY2UoL15cW29iamVjdCAvLCIiKS5yZXBsYWNlKC9dJC8sIiIpO2lmKHQ9PT0iT2JqZWN0IiYmdHlwZW9mIGUuY29uc3RydWN0b3I9PSJmdW5jdGlvbiIpe2NvbnN0IG49ZS5jb25zdHJ1Y3Rvci5uYW1lO2lmKHR5cGVvZiBuPT0ic3RyaW5nIiYmbiE9PSIiKXJldHVybiBufXJldHVybiB0fWNvbnN0IEluPWdsb2JhbFRoaXMucHJvY2VzcyYmZ2xvYmFsVGhpcy5wcm9jZXNzLmVudi5OT0RFX0VOVj09PSJwcm9kdWN0aW9uIj9mdW5jdGlvbih0LG4pe3JldHVybiB0IGluc3RhbmNlb2Ygbn06ZnVuY3Rpb24odCxuKXtpZih0IGluc3RhbmNlb2YgbilyZXR1cm4hMDtpZih0eXBlb2YgdD09Im9iamVjdCImJnQhPT1udWxsKXt2YXIgcjtjb25zdCBpPW4ucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ10scz1TeW1ib2wudG9TdHJpbmdUYWcgaW4gdD90W1N5bWJvbC50b1N0cmluZ1RhZ106KHI9dC5jb25zdHJ1Y3Rvcik9PT1udWxsfHxyPT09dm9pZCAwP3ZvaWQgMDpyLm5hbWU7aWYoaT09PXMpe2NvbnN0IG89SGUodCk7dGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgdXNlICR7aX0gIiR7b30iIGZyb20gYW5vdGhlciBtb2R1bGUgb3IgcmVhbG0uCgpFbnN1cmUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiAiZ3JhcGhxbCIgaW4gdGhlIG5vZGVfbW9kdWxlcwpkaXJlY3RvcnkuIElmIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiAiZ3JhcGhxbCIgYXJlIHRoZSBkZXBlbmRlbmNpZXMgb2Ygb3RoZXIKcmVsaWVkIG9uIG1vZHVsZXMsIHVzZSAicmVzb2x1dGlvbnMiIHRvIGVuc3VyZSBvbmx5IG9uZSB2ZXJzaW9uIGlzIGluc3RhbGxlZC4KCmh0dHBzOi8veWFybnBrZy5jb20vZW4vZG9jcy9zZWxlY3RpdmUtdmVyc2lvbi1yZXNvbHV0aW9ucwoKRHVwbGljYXRlICJncmFwaHFsIiBtb2R1bGVzIGNhbm5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUgc2luY2UgZGlmZmVyZW50CnZlcnNpb25zIG1heSBoYXZlIGRpZmZlcmVudCBjYXBhYmlsaXRpZXMgYW5kIGJlaGF2aW9yLiBUaGUgZGF0YSBmcm9tIG9uZQp2ZXJzaW9uIHVzZWQgaW4gdGhlIGZ1bmN0aW9uIGZyb20gYW5vdGhlciBjb3VsZCBwcm9kdWNlIGNvbmZ1c2luZyBhbmQKc3B1cmlvdXMgcmVzdWx0cy5gKX19cmV0dXJuITF9O2NsYXNzIEF0e2NvbnN0cnVjdG9yKHQsbj0iR3JhcGhRTCByZXF1ZXN0IixyPXtsaW5lOjEsY29sdW1uOjF9KXt0eXBlb2YgdD09InN0cmluZyJ8fEsoITEsYEJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6ICR7SGUodCl9LmApLHRoaXMuYm9keT10LHRoaXMubmFtZT1uLHRoaXMubG9jYXRpb25PZmZzZXQ9cix0aGlzLmxvY2F0aW9uT2Zmc2V0LmxpbmU+MHx8SyghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8SyghMSwiY29sdW1uIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4iKX1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJTb3VyY2UifX1mdW5jdGlvbiBPbihlKXtyZXR1cm4gSW4oZSxBdCl9ZnVuY3Rpb24gSXQoZSx0KXtyZXR1cm4gbmV3IFNuKGUsdCkucGFyc2VEb2N1bWVudCgpfWNsYXNzIFNue2NvbnN0cnVjdG9yKHQsbj17fSl7Y29uc3Qgcj1Pbih0KT90Om5ldyBBdCh0KTt0aGlzLl9sZXhlcj1uZXcgdW4ociksdGhpcy5fb3B0aW9ucz1uLHRoaXMuX3Rva2VuQ291bnRlcj0wfXBhcnNlTmFtZSgpe2NvbnN0IHQ9dGhpcy5leHBlY3RUb2tlbihsLk5BTUUpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk5BTUUsdmFsdWU6dC52YWx1ZX0pfXBhcnNlRG9jdW1lbnQoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuRE9DVU1FTlQsZGVmaW5pdGlvbnM6dGhpcy5tYW55KGwuU09GLHRoaXMucGFyc2VEZWZpbml0aW9uLGwuRU9GKX0pfXBhcnNlRGVmaW5pdGlvbigpe2lmKHRoaXMucGVlayhsLkJSQUNFX0wpKXJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2NvbnN0IHQ9dGhpcy5wZWVrRGVzY3JpcHRpb24oKSxuPXQ/dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk6dGhpcy5fbGV4ZXIudG9rZW47aWYobi5raW5kPT09bC5OQU1FKXtzd2l0Y2gobi52YWx1ZSl7Y2FzZSJzY2hlbWEiOnJldHVybiB0aGlzLnBhcnNlU2NoZW1hRGVmaW5pdGlvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnRlcmZhY2UiOnJldHVybiB0aGlzLnBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnB1dCI6cmV0dXJuIHRoaXMucGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJkaXJlY3RpdmUiOnJldHVybiB0aGlzLnBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpfWlmKHQpdGhyb3cgRyh0aGlzLl9sZXhlci5zb3VyY2UsdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsIlVuZXhwZWN0ZWQgZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9ucyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gdHlwZSBkZWZpbml0aW9ucy4iKTtzd2l0Y2gobi52YWx1ZSl7Y2FzZSJxdWVyeSI6Y2FzZSJtdXRhdGlvbiI6Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2Nhc2UiZnJhZ21lbnQiOnJldHVybiB0aGlzLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCk7Y2FzZSJleHRlbmQiOnJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpfX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQobil9cGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtpZih0aGlzLnBlZWsobC5CUkFDRV9MKSlyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5PUEVSQVRJT05fREVGSU5JVElPTixvcGVyYXRpb246aGUuUVVFUlksbmFtZTp2b2lkIDAsdmFyaWFibGVEZWZpbml0aW9uczpbXSxkaXJlY3RpdmVzOltdLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KTtjb25zdCBuPXRoaXMucGFyc2VPcGVyYXRpb25UeXBlKCk7bGV0IHI7cmV0dXJuIHRoaXMucGVlayhsLk5BTUUpJiYocj10aGlzLnBhcnNlTmFtZSgpKSx0aGlzLm5vZGUodCx7a2luZDpULk9QRVJBVElPTl9ERUZJTklUSU9OLG9wZXJhdGlvbjpuLG5hbWU6cix2YXJpYWJsZURlZmluaXRpb25zOnRoaXMucGFyc2VWYXJpYWJsZURlZmluaXRpb25zKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSksc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pfXBhcnNlT3BlcmF0aW9uVHlwZSgpe2NvbnN0IHQ9dGhpcy5leHBlY3RUb2tlbihsLk5BTUUpO3N3aXRjaCh0LnZhbHVlKXtjYXNlInF1ZXJ5IjpyZXR1cm4gaGUuUVVFUlk7Y2FzZSJtdXRhdGlvbiI6cmV0dXJuIGhlLk1VVEFUSU9OO2Nhc2Uic3Vic2NyaXB0aW9uIjpyZXR1cm4gaGUuU1VCU0NSSVBUSU9OfXRocm93IHRoaXMudW5leHBlY3RlZCh0KX1wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKXtyZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkobC5QQVJFTl9MLHRoaXMucGFyc2VWYXJpYWJsZURlZmluaXRpb24sbC5QQVJFTl9SKX1wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6VC5WQVJJQUJMRV9ERUZJTklUSU9OLHZhcmlhYmxlOnRoaXMucGFyc2VWYXJpYWJsZSgpLHR5cGU6KHRoaXMuZXhwZWN0VG9rZW4obC5DT0xPTiksdGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKSksZGVmYXVsdFZhbHVlOnRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihsLkVRVUFMUyk/dGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCk6dm9pZCAwLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpfSl9cGFyc2VWYXJpYWJsZSgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4obC5ET0xMQVIpLHRoaXMubm9kZSh0LHtraW5kOlQuVkFSSUFCTEUsbmFtZTp0aGlzLnBhcnNlTmFtZSgpfSl9cGFyc2VTZWxlY3Rpb25TZXQoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuU0VMRUNUSU9OX1NFVCxzZWxlY3Rpb25zOnRoaXMubWFueShsLkJSQUNFX0wsdGhpcy5wYXJzZVNlbGVjdGlvbixsLkJSQUNFX1IpfSl9cGFyc2VTZWxlY3Rpb24oKXtyZXR1cm4gdGhpcy5wZWVrKGwuU1BSRUFEKT90aGlzLnBhcnNlRnJhZ21lbnQoKTp0aGlzLnBhcnNlRmllbGQoKX1wYXJzZUZpZWxkKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VOYW1lKCk7bGV0IHIsaTtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuQ09MT04pPyhyPW4saT10aGlzLnBhcnNlTmFtZSgpKTppPW4sdGhpcy5ub2RlKHQse2tpbmQ6VC5GSUVMRCxhbGlhczpyLG5hbWU6aSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cyghMSksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSksc2VsZWN0aW9uU2V0OnRoaXMucGVlayhsLkJSQUNFX0wpP3RoaXMucGFyc2VTZWxlY3Rpb25TZXQoKTp2b2lkIDB9KX1wYXJzZUFyZ3VtZW50cyh0KXtjb25zdCBuPXQ/dGhpcy5wYXJzZUNvbnN0QXJndW1lbnQ6dGhpcy5wYXJzZUFyZ3VtZW50O3JldHVybiB0aGlzLm9wdGlvbmFsTWFueShsLlBBUkVOX0wsbixsLlBBUkVOX1IpfXBhcnNlQXJndW1lbnQodD0hMSl7Y29uc3Qgbj10aGlzLl9sZXhlci50b2tlbixyPXRoaXMucGFyc2VOYW1lKCk7cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4obC5DT0xPTiksdGhpcy5ub2RlKG4se2tpbmQ6VC5BUkdVTUVOVCxuYW1lOnIsdmFsdWU6dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0KX0pfXBhcnNlQ29uc3RBcmd1bWVudCgpe3JldHVybiB0aGlzLnBhcnNlQXJndW1lbnQoITApfXBhcnNlRnJhZ21lbnQoKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0VG9rZW4obC5TUFJFQUQpO2NvbnN0IG49dGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoIm9uIik7cmV0dXJuIW4mJnRoaXMucGVlayhsLk5BTUUpP3RoaXMubm9kZSh0LHtraW5kOlQuRlJBR01FTlRfU1BSRUFELG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpfSk6dGhpcy5ub2RlKHQse2tpbmQ6VC5JTkxJTkVfRlJBR01FTlQsdHlwZUNvbmRpdGlvbjpuP3RoaXMucGFyc2VOYW1lZFR5cGUoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSksc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pfXBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RLZXl3b3JkKCJmcmFnbWVudCIpLHRoaXMuX29wdGlvbnMuYWxsb3dMZWdhY3lGcmFnbWVudFZhcmlhYmxlcz09PSEwP3RoaXMubm9kZSh0LHtraW5kOlQuRlJBR01FTlRfREVGSU5JVElPTixuYW1lOnRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSx2YXJpYWJsZURlZmluaXRpb25zOnRoaXMucGFyc2VWYXJpYWJsZURlZmluaXRpb25zKCksdHlwZUNvbmRpdGlvbjoodGhpcy5leHBlY3RLZXl3b3JkKCJvbiIpLHRoaXMucGFyc2VOYW1lZFR5cGUoKSksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSksc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pOnRoaXMubm9kZSh0LHtraW5kOlQuRlJBR01FTlRfREVGSU5JVElPTixuYW1lOnRoaXMucGFyc2VGcmFnbWVudE5hbWUoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudE5hbWUoKXtpZih0aGlzLl9sZXhlci50b2tlbi52YWx1ZT09PSJvbiIpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMucGFyc2VOYW1lKCl9cGFyc2VWYWx1ZUxpdGVyYWwodCl7Y29uc3Qgbj10aGlzLl9sZXhlci50b2tlbjtzd2l0Y2gobi5raW5kKXtjYXNlIGwuQlJBQ0tFVF9MOnJldHVybiB0aGlzLnBhcnNlTGlzdCh0KTtjYXNlIGwuQlJBQ0VfTDpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdCh0KTtjYXNlIGwuSU5UOnJldHVybiB0aGlzLmFkdmFuY2VMZXhlcigpLHRoaXMubm9kZShuLHtraW5kOlQuSU5ULHZhbHVlOm4udmFsdWV9KTtjYXNlIGwuRkxPQVQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKG4se2tpbmQ6VC5GTE9BVCx2YWx1ZTpuLnZhbHVlfSk7Y2FzZSBsLlNUUklORzpjYXNlIGwuQkxPQ0tfU1RSSU5HOnJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpO2Nhc2UgbC5OQU1FOnN3aXRjaCh0aGlzLmFkdmFuY2VMZXhlcigpLG4udmFsdWUpe2Nhc2UidHJ1ZSI6cmV0dXJuIHRoaXMubm9kZShuLHtraW5kOlQuQk9PTEVBTix2YWx1ZTohMH0pO2Nhc2UiZmFsc2UiOnJldHVybiB0aGlzLm5vZGUobix7a2luZDpULkJPT0xFQU4sdmFsdWU6ITF9KTtjYXNlIm51bGwiOnJldHVybiB0aGlzLm5vZGUobix7a2luZDpULk5VTEx9KTtkZWZhdWx0OnJldHVybiB0aGlzLm5vZGUobix7a2luZDpULkVOVU0sdmFsdWU6bi52YWx1ZX0pfWNhc2UgbC5ET0xMQVI6aWYodClpZih0aGlzLmV4cGVjdFRva2VuKGwuRE9MTEFSKSx0aGlzLl9sZXhlci50b2tlbi5raW5kPT09bC5OQU1FKXtjb25zdCByPXRoaXMuX2xleGVyLnRva2VuLnZhbHVlO3Rocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYFVuZXhwZWN0ZWQgdmFyaWFibGUgIiQke3J9IiBpbiBjb25zdGFudCB2YWx1ZS5gKX1lbHNlIHRocm93IHRoaXMudW5leHBlY3RlZChuKTtyZXR1cm4gdGhpcy5wYXJzZVZhcmlhYmxlKCk7ZGVmYXVsdDp0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKX19cGFyc2VDb25zdFZhbHVlTGl0ZXJhbCgpe3JldHVybiB0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKCEwKX1wYXJzZVN0cmluZ0xpdGVyYWwoKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmFkdmFuY2VMZXhlcigpLHRoaXMubm9kZSh0LHtraW5kOlQuU1RSSU5HLHZhbHVlOnQudmFsdWUsYmxvY2s6dC5raW5kPT09bC5CTE9DS19TVFJJTkd9KX1wYXJzZUxpc3QodCl7Y29uc3Qgbj0oKT0+dGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0KTtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuTElTVCx2YWx1ZXM6dGhpcy5hbnkobC5CUkFDS0VUX0wsbixsLkJSQUNLRVRfUil9KX1wYXJzZU9iamVjdCh0KXtjb25zdCBuPSgpPT50aGlzLnBhcnNlT2JqZWN0RmllbGQodCk7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpULk9CSkVDVCxmaWVsZHM6dGhpcy5hbnkobC5CUkFDRV9MLG4sbC5CUkFDRV9SKX0pfXBhcnNlT2JqZWN0RmllbGQodCl7Y29uc3Qgbj10aGlzLl9sZXhlci50b2tlbixyPXRoaXMucGFyc2VOYW1lKCk7cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4obC5DT0xPTiksdGhpcy5ub2RlKG4se2tpbmQ6VC5PQkpFQ1RfRklFTEQsbmFtZTpyLHZhbHVlOnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwodCl9KX1wYXJzZURpcmVjdGl2ZXModCl7Y29uc3Qgbj1bXTtmb3IoO3RoaXMucGVlayhsLkFUKTspbi5wdXNoKHRoaXMucGFyc2VEaXJlY3RpdmUodCkpO3JldHVybiBufXBhcnNlQ29uc3REaXJlY3RpdmVzKCl7cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVzKCEwKX1wYXJzZURpcmVjdGl2ZSh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKGwuQVQpLHRoaXMubm9kZShuLHtraW5kOlQuRElSRUNUSVZFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cyh0KX0pfXBhcnNlVHlwZVJlZmVyZW5jZSgpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47bGV0IG47aWYodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuQlJBQ0tFVF9MKSl7Y29uc3Qgcj10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO3RoaXMuZXhwZWN0VG9rZW4obC5CUkFDS0VUX1IpLG49dGhpcy5ub2RlKHQse2tpbmQ6VC5MSVNUX1RZUEUsdHlwZTpyfSl9ZWxzZSBuPXRoaXMucGFyc2VOYW1lZFR5cGUoKTtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuQkFORyk/dGhpcy5ub2RlKHQse2tpbmQ6VC5OT05fTlVMTF9UWVBFLHR5cGU6bn0pOm59cGFyc2VOYW1lZFR5cGUoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOlQuTkFNRURfVFlQRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wZWVrRGVzY3JpcHRpb24oKXtyZXR1cm4gdGhpcy5wZWVrKGwuU1RSSU5HKXx8dGhpcy5wZWVrKGwuQkxPQ0tfU1RSSU5HKX1wYXJzZURlc2NyaXB0aW9uKCl7aWYodGhpcy5wZWVrRGVzY3JpcHRpb24oKSlyZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKX1wYXJzZVNjaGVtYURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJzY2hlbWEiKTtjb25zdCByPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMubWFueShsLkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLGwuQlJBQ0VfUik7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuU0NIRU1BX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixkaXJlY3RpdmVzOnIsb3BlcmF0aW9uVHlwZXM6aX0pfXBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTt0aGlzLmV4cGVjdFRva2VuKGwuQ09MT04pO2NvbnN0IHI9dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk9QRVJBVElPTl9UWVBFX0RFRklOSVRJT04sb3BlcmF0aW9uOm4sdHlwZTpyfSl9cGFyc2VTY2FsYXJUeXBlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IHI9dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTpyLGRpcmVjdGl2ZXM6aX0pfXBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgcj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkscz10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksbz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk9CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOnIsaW50ZXJmYWNlczppLGRpcmVjdGl2ZXM6cyxmaWVsZHM6b30pfXBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKXtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoImltcGxlbWVudHMiKT90aGlzLmRlbGltaXRlZE1hbnkobC5BTVAsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlRmllbGREZWZpbml0aW9uLGwuQlJBQ0VfUil9cGFyc2VGaWVsZERlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCkscj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpO3RoaXMuZXhwZWN0VG9rZW4obC5DT0xPTik7Y29uc3Qgcz10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpLG89dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULkZJRUxEX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOnIsYXJndW1lbnRzOmksdHlwZTpzLGRpcmVjdGl2ZXM6b30pfXBhcnNlQXJndW1lbnREZWZzKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuUEFSRU5fTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZixsLlBBUkVOX1IpfXBhcnNlSW5wdXRWYWx1ZURlZigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxyPXRoaXMucGFyc2VOYW1lKCk7dGhpcy5leHBlY3RUb2tlbihsLkNPTE9OKTtjb25zdCBpPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7bGV0IHM7dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGwuRVFVQUxTKSYmKHM9dGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCkpO2NvbnN0IG89dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOUFVUX1ZBTFVFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOnIsdHlwZTppLGRlZmF1bHRWYWx1ZTpzLGRpcmVjdGl2ZXM6b30pfXBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnRlcmZhY2UiKTtjb25zdCByPXRoaXMucGFyc2VOYW1lKCksaT10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxzPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxvPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6cixpbnRlcmZhY2VzOmksZGlyZWN0aXZlczpzLGZpZWxkczpvfSl9cGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCByPXRoaXMucGFyc2VOYW1lKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlVOSU9OX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6cixkaXJlY3RpdmVzOmksdHlwZXM6c30pfXBhcnNlVW5pb25NZW1iZXJUeXBlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obC5FUVVBTFMpP3RoaXMuZGVsaW1pdGVkTWFueShsLlBJUEUsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VFbnVtVHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3Qgcj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRU5VTV9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOnIsZGlyZWN0aXZlczppLHZhbHVlczpzfSl9cGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueShsLkJSQUNFX0wsdGhpcy5wYXJzZUVudW1WYWx1ZURlZmluaXRpb24sbC5CUkFDRV9SKX1wYXJzZUVudW1WYWx1ZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCkscj10aGlzLnBhcnNlRW51bVZhbHVlTmFtZSgpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULkVOVU1fVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjpuLG5hbWU6cixkaXJlY3RpdmVzOml9KX1wYXJzZUVudW1WYWx1ZU5hbWUoKXtpZih0aGlzLl9sZXhlci50b2tlbi52YWx1ZT09PSJ0cnVlInx8dGhpcy5fbGV4ZXIudG9rZW4udmFsdWU9PT0iZmFsc2UifHx0aGlzLl9sZXhlci50b2tlbi52YWx1ZT09PSJudWxsIil0aHJvdyBHKHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCxgJHt3ZSh0aGlzLl9sZXhlci50b2tlbil9IGlzIHJlc2VydmVkIGFuZCBjYW5ub3QgYmUgdXNlZCBmb3IgYW4gZW51bSB2YWx1ZS5gKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IHI9dGhpcy5wYXJzZU5hbWUoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOm4sbmFtZTpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KGwuQlJBQ0VfTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZixsLkJSQUNFX1IpfXBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk7aWYodC5raW5kPT09bC5OQU1FKXN3aXRjaCh0LnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFFeHRlbnNpb24oKTtjYXNlInNjYWxhciI6cmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ1bmlvbiI6cmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVFeHRlbnNpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpfXRocm93IHRoaXMudW5leHBlY3RlZCh0KX1wYXJzZVNjaGVtYUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5vcHRpb25hbE1hbnkobC5CUkFDRV9MLHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbixsLkJSQUNFX1IpO2lmKG4ubGVuZ3RoPT09MCYmci5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlNDSEVNQV9FWFRFTlNJT04sZGlyZWN0aXZlczpuLG9wZXJhdGlvblR5cGVzOnJ9KX1wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJzY2FsYXIiKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7aWYoci5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlNDQUxBUl9UWVBFX0VYVEVOU0lPTixuYW1lOm4sZGlyZWN0aXZlczpyfSl9cGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidHlwZSIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZihyLmxlbmd0aD09PTAmJmkubGVuZ3RoPT09MCYmcy5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULk9CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOm4saW50ZXJmYWNlczpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlSW50ZXJmYWNlVHlwZUV4dGVuc2lvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLGk9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHM9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZihyLmxlbmd0aD09PTAmJmkubGVuZ3RoPT09MCYmcy5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixuYW1lOm4saW50ZXJmYWNlczpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uKCl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO2lmKHIubGVuZ3RoPT09MCYmaS5sZW5ndGg9PT0wKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUodCx7a2luZDpULlVOSU9OX1RZUEVfRVhURU5TSU9OLG5hbWU6bixkaXJlY3RpdmVzOnIsdHlwZXM6aX0pfXBhcnNlRW51bVR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7aWYoci5sZW5ndGg9PT0wJiZpLmxlbmd0aD09PTApdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRU5VTV9UWVBFX0VYVEVOU0lPTixuYW1lOm4sZGlyZWN0aXZlczpyLHZhbHVlczppfSl9cGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtpZihyLmxlbmd0aD09PTAmJmkubGVuZ3RoPT09MCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6VC5JTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT04sbmFtZTpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW4sbj10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImRpcmVjdGl2ZSIpLHRoaXMuZXhwZWN0VG9rZW4obC5BVCk7Y29uc3Qgcj10aGlzLnBhcnNlTmFtZSgpLGk9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpLHM9dGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoInJlcGVhdGFibGUiKTt0aGlzLmV4cGVjdEtleXdvcmQoIm9uIik7Y29uc3Qgbz10aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOlQuRElSRUNUSVZFX0RFRklOSVRJT04sZGVzY3JpcHRpb246bixuYW1lOnIsYXJndW1lbnRzOmkscmVwZWF0YWJsZTpzLGxvY2F0aW9uczpvfSl9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKXtyZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KGwuUElQRSx0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pfXBhcnNlRGlyZWN0aXZlTG9jYXRpb24oKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoamUsbi52YWx1ZSkpcmV0dXJuIG47dGhyb3cgdGhpcy51bmV4cGVjdGVkKHQpfW5vZGUodCxuKXtyZXR1cm4gdGhpcy5fb3B0aW9ucy5ub0xvY2F0aW9uIT09ITAmJihuLmxvYz1uZXcgbm4odCx0aGlzLl9sZXhlci5sYXN0VG9rZW4sdGhpcy5fbGV4ZXIuc291cmNlKSksbn1wZWVrKHQpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09dH1leHBlY3RUb2tlbih0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO2lmKG4ua2luZD09PXQpcmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksbjt0aHJvdyBHKHRoaXMuX2xleGVyLnNvdXJjZSxuLnN0YXJ0LGBFeHBlY3RlZCAke090KHQpfSwgZm91bmQgJHt3ZShuKX0uYCl9ZXhwZWN0T3B0aW9uYWxUb2tlbih0KXtyZXR1cm4gdGhpcy5fbGV4ZXIudG9rZW4ua2luZD09PXQ/KHRoaXMuYWR2YW5jZUxleGVyKCksITApOiExfWV4cGVjdEtleXdvcmQodCl7Y29uc3Qgbj10aGlzLl9sZXhlci50b2tlbjtpZihuLmtpbmQ9PT1sLk5BTUUmJm4udmFsdWU9PT10KXRoaXMuYWR2YW5jZUxleGVyKCk7ZWxzZSB0aHJvdyBHKHRoaXMuX2xleGVyLnNvdXJjZSxuLnN0YXJ0LGBFeHBlY3RlZCAiJHt0fSIsIGZvdW5kICR7d2Uobil9LmApfWV4cGVjdE9wdGlvbmFsS2V5d29yZCh0KXtjb25zdCBuPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiBuLmtpbmQ9PT1sLk5BTUUmJm4udmFsdWU9PT10Pyh0aGlzLmFkdmFuY2VMZXhlcigpLCEwKTohMX11bmV4cGVjdGVkKHQpe2NvbnN0IG49dCE9bnVsbD90OnRoaXMuX2xleGVyLnRva2VuO3JldHVybiBHKHRoaXMuX2xleGVyLnNvdXJjZSxuLnN0YXJ0LGBVbmV4cGVjdGVkICR7d2Uobil9LmApfWFueSh0LG4scil7dGhpcy5leHBlY3RUb2tlbih0KTtjb25zdCBpPVtdO2Zvcig7IXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihyKTspaS5wdXNoKG4uY2FsbCh0aGlzKSk7cmV0dXJuIGl9b3B0aW9uYWxNYW55KHQsbixyKXtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4odCkpe2NvbnN0IGk9W107ZG8gaS5wdXNoKG4uY2FsbCh0aGlzKSk7d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihyKSk7cmV0dXJuIGl9cmV0dXJuW119bWFueSh0LG4scil7dGhpcy5leHBlY3RUb2tlbih0KTtjb25zdCBpPVtdO2RvIGkucHVzaChuLmNhbGwodGhpcykpO3doaWxlKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4ocikpO3JldHVybiBpfWRlbGltaXRlZE1hbnkodCxuKXt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4odCk7Y29uc3Qgcj1bXTtkbyByLnB1c2gobi5jYWxsKHRoaXMpKTt3aGlsZSh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4odCkpO3JldHVybiByfWFkdmFuY2VMZXhlcigpe2NvbnN0e21heFRva2Vuczp0fT10aGlzLl9vcHRpb25zLG49dGhpcy5fbGV4ZXIuYWR2YW5jZSgpO2lmKHQhPT12b2lkIDAmJm4ua2luZCE9PWwuRU9GJiYoKyt0aGlzLl90b2tlbkNvdW50ZXIsdGhpcy5fdG9rZW5Db3VudGVyPnQpKXRocm93IEcodGhpcy5fbGV4ZXIuc291cmNlLG4uc3RhcnQsYERvY3VtZW50IGNvbnRhaW5zIG1vcmUgdGhhdCAke3R9IHRva2Vucy4gUGFyc2luZyBhYm9ydGVkLmApfX1mdW5jdGlvbiB3ZShlKXtjb25zdCB0PWUudmFsdWU7cmV0dXJuIE90KGUua2luZCkrKHQhPW51bGw/YCAiJHt0fSJgOiIiKX1mdW5jdGlvbiBPdChlKXtyZXR1cm4gbG4oZSk/YCIke2V9ImA6ZX1mdW5jdGlvbiB3bihlKXtyZXR1cm5gIiR7ZS5yZXBsYWNlKERuLENuKX0iYH1jb25zdCBEbj0vW1x4MDAtXHgxZlx4MjJceDVjXHg3Zi1ceDlmXS9nO2Z1bmN0aW9uIENuKGUpe3JldHVybiBrbltlLmNoYXJDb2RlQXQoMCldfWNvbnN0IGtuPVsiXFx1MDAwMCIsIlxcdTAwMDEiLCJcXHUwMDAyIiwiXFx1MDAwMyIsIlxcdTAwMDQiLCJcXHUwMDA1IiwiXFx1MDAwNiIsIlxcdTAwMDciLCJcXGIiLCJcXHQiLCJcXG4iLCJcXHUwMDBCIiwiXFxmIiwiXFxyIiwiXFx1MDAwRSIsIlxcdTAwMEYiLCJcXHUwMDEwIiwiXFx1MDAxMSIsIlxcdTAwMTIiLCJcXHUwMDEzIiwiXFx1MDAxNCIsIlxcdTAwMTUiLCJcXHUwMDE2IiwiXFx1MDAxNyIsIlxcdTAwMTgiLCJcXHUwMDE5IiwiXFx1MDAxQSIsIlxcdTAwMUIiLCJcXHUwMDFDIiwiXFx1MDAxRCIsIlxcdTAwMUUiLCJcXHUwMDFGIiwiIiwiIiwnXFwiJywiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFxcXCIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIlxcdTAwN0YiLCJcXHUwMDgwIiwiXFx1MDA4MSIsIlxcdTAwODIiLCJcXHUwMDgzIiwiXFx1MDA4NCIsIlxcdTAwODUiLCJcXHUwMDg2IiwiXFx1MDA4NyIsIlxcdTAwODgiLCJcXHUwMDg5IiwiXFx1MDA4QSIsIlxcdTAwOEIiLCJcXHUwMDhDIiwiXFx1MDA4RCIsIlxcdTAwOEUiLCJcXHUwMDhGIiwiXFx1MDA5MCIsIlxcdTAwOTEiLCJcXHUwMDkyIiwiXFx1MDA5MyIsIlxcdTAwOTQiLCJcXHUwMDk1IiwiXFx1MDA5NiIsIlxcdTAwOTciLCJcXHUwMDk4IiwiXFx1MDA5OSIsIlxcdTAwOUEiLCJcXHUwMDlCIiwiXFx1MDA5QyIsIlxcdTAwOUQiLCJcXHUwMDlFIiwiXFx1MDA5RiJdLFJuPU9iamVjdC5mcmVlemUoe30pO2Z1bmN0aW9uIExuKGUsdCxuPXZ0KXtjb25zdCByPW5ldyBNYXA7Zm9yKGNvbnN0IE4gb2YgT2JqZWN0LnZhbHVlcyhUKSlyLnNldChOLFBuKHQsTikpO2xldCBpLHM9QXJyYXkuaXNBcnJheShlKSxvPVtlXSxjPS0xLGQ9W10sZj1lLHUsZztjb25zdCBFPVtdLGI9W107ZG97YysrO2NvbnN0IE49Yz09PW8ubGVuZ3RoLEM9TiYmZC5sZW5ndGghPT0wO2lmKE4pe2lmKHU9Yi5sZW5ndGg9PT0wP3ZvaWQgMDpFW0UubGVuZ3RoLTFdLGY9ZyxnPWIucG9wKCksQylpZihzKXtmPWYuc2xpY2UoKTtsZXQgTD0wO2Zvcihjb25zdFtNLEhdb2YgZCl7Y29uc3QgJD1NLUw7SD09PW51bGw/KGYuc3BsaWNlKCQsMSksTCsrKTpmWyRdPUh9fWVsc2V7Zj1PYmplY3QuZGVmaW5lUHJvcGVydGllcyh7fSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhmKSk7Zm9yKGNvbnN0W0wsTV1vZiBkKWZbTF09TX1jPWkuaW5kZXgsbz1pLmtleXMsZD1pLmVkaXRzLHM9aS5pbkFycmF5LGk9aS5wcmV2fWVsc2UgaWYoZyl7aWYodT1zP2M6b1tjXSxmPWdbdV0sZj09bnVsbCljb250aW51ZTtFLnB1c2godSl9bGV0IFI7aWYoIUFycmF5LmlzQXJyYXkoZikpe3ZhciB5LHA7Z3QoZil8fEsoITEsYEludmFsaWQgQVNUIE5vZGU6ICR7SGUoZil9LmApO2NvbnN0IEw9Tj8oeT1yLmdldChmLmtpbmQpKT09PW51bGx8fHk9PT12b2lkIDA/dm9pZCAwOnkubGVhdmU6KHA9ci5nZXQoZi5raW5kKSk9PT1udWxsfHxwPT09dm9pZCAwP3ZvaWQgMDpwLmVudGVyO2lmKFI9TD09bnVsbD92b2lkIDA6TC5jYWxsKHQsZix1LGcsRSxiKSxSPT09Um4pYnJlYWs7aWYoUj09PSExKXtpZighTil7RS5wb3AoKTtjb250aW51ZX19ZWxzZSBpZihSIT09dm9pZCAwJiYoZC5wdXNoKFt1LFJdKSwhTikpaWYoZ3QoUikpZj1SO2Vsc2V7RS5wb3AoKTtjb250aW51ZX19aWYoUj09PXZvaWQgMCYmQyYmZC5wdXNoKFt1LGZdKSxOKUUucG9wKCk7ZWxzZXt2YXIgdjtpPXtpbkFycmF5OnMsaW5kZXg6YyxrZXlzOm8sZWRpdHM6ZCxwcmV2Oml9LHM9QXJyYXkuaXNBcnJheShmKSxvPXM/Zjoodj1uW2Yua2luZF0pIT09bnVsbCYmdiE9PXZvaWQgMD92OltdLGM9LTEsZD1bXSxnJiZiLnB1c2goZyksZz1mfX13aGlsZShpIT09dm9pZCAwKTtyZXR1cm4gZC5sZW5ndGghPT0wP2RbZC5sZW5ndGgtMV1bMV06ZX1mdW5jdGlvbiBQbihlLHQpe2NvbnN0IG49ZVt0XTtyZXR1cm4gdHlwZW9mIG49PSJvYmplY3QiP246dHlwZW9mIG49PSJmdW5jdGlvbiI/e2VudGVyOm4sbGVhdmU6dm9pZCAwfTp7ZW50ZXI6ZS5lbnRlcixsZWF2ZTplLmxlYXZlfX1mdW5jdGlvbiBGbihlKXtyZXR1cm4gTG4oZSxNbil9Y29uc3QgQm49ODAsTW49e05hbWU6e2xlYXZlOmU9PmUudmFsdWV9LFZhcmlhYmxlOntsZWF2ZTplPT4iJCIrZS5uYW1lfSxEb2N1bWVudDp7bGVhdmU6ZT0+bShlLmRlZmluaXRpb25zLGAKCmApfSxPcGVyYXRpb25EZWZpbml0aW9uOntsZWF2ZShlKXtjb25zdCB0PU8oIigiLG0oZS52YXJpYWJsZURlZmluaXRpb25zLCIsICIpLCIpIiksbj1tKFtlLm9wZXJhdGlvbixtKFtlLm5hbWUsdF0pLG0oZS5kaXJlY3RpdmVzLCIgIildLCIgIik7cmV0dXJuKG49PT0icXVlcnkiPyIiOm4rIiAiKStlLnNlbGVjdGlvblNldH19LFZhcmlhYmxlRGVmaW5pdGlvbjp7bGVhdmU6KHt2YXJpYWJsZTplLHR5cGU6dCxkZWZhdWx0VmFsdWU6bixkaXJlY3RpdmVzOnJ9KT0+ZSsiOiAiK3QrTygiID0gIixuKStPKCIgIixtKHIsIiAiKSl9LFNlbGVjdGlvblNldDp7bGVhdmU6KHtzZWxlY3Rpb25zOmV9KT0+ZWUoZSl9LEZpZWxkOntsZWF2ZSh7YWxpYXM6ZSxuYW1lOnQsYXJndW1lbnRzOm4sZGlyZWN0aXZlczpyLHNlbGVjdGlvblNldDppfSl7Y29uc3Qgcz1PKCIiLGUsIjogIikrdDtsZXQgbz1zK08oIigiLG0obiwiLCAiKSwiKSIpO3JldHVybiBvLmxlbmd0aD5CbiYmKG89cytPKGAoCmAsRGUobShuLGAKYCkpLGAKKWApKSxtKFtvLG0ociwiICIpLGldLCIgIil9fSxBcmd1bWVudDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRnJhZ21lbnRTcHJlYWQ6e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT4iLi4uIitlK08oIiAiLG0odCwiICIpKX0sSW5saW5lRnJhZ21lbnQ6e2xlYXZlOih7dHlwZUNvbmRpdGlvbjplLGRpcmVjdGl2ZXM6dCxzZWxlY3Rpb25TZXQ6bn0pPT5tKFsiLi4uIixPKCJvbiAiLGUpLG0odCwiICIpLG5dLCIgIil9LEZyYWdtZW50RGVmaW5pdGlvbjp7bGVhdmU6KHtuYW1lOmUsdHlwZUNvbmRpdGlvbjp0LHZhcmlhYmxlRGVmaW5pdGlvbnM6bixkaXJlY3RpdmVzOnIsc2VsZWN0aW9uU2V0Oml9KT0+YGZyYWdtZW50ICR7ZX0ke08oIigiLG0obiwiLCAiKSwiKSIpfSBvbiAke3R9ICR7TygiIixtKHIsIiAiKSwiICIpfWAraX0sSW50VmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lfSxGbG9hdFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sU3RyaW5nVmFsdWU6e2xlYXZlOih7dmFsdWU6ZSxibG9jazp0fSk9PnQ/Y24oZSk6d24oZSl9LEJvb2xlYW5WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmU/InRydWUiOiJmYWxzZSJ9LE51bGxWYWx1ZTp7bGVhdmU6KCk9PiJudWxsIn0sRW51bVZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sTGlzdFZhbHVlOntsZWF2ZTooe3ZhbHVlczplfSk9PiJbIittKGUsIiwgIikrIl0ifSxPYmplY3RWYWx1ZTp7bGVhdmU6KHtmaWVsZHM6ZX0pPT4ieyIrbShlLCIsICIpKyJ9In0sT2JqZWN0RmllbGQ6e2xlYXZlOih7bmFtZTplLHZhbHVlOnR9KT0+ZSsiOiAiK3R9LERpcmVjdGl2ZTp7bGVhdmU6KHtuYW1lOmUsYXJndW1lbnRzOnR9KT0+IkAiK2UrTygiKCIsbSh0LCIsICIpLCIpIil9LE5hbWVkVHlwZTp7bGVhdmU6KHtuYW1lOmV9KT0+ZX0sTGlzdFR5cGU6e2xlYXZlOih7dHlwZTplfSk9PiJbIitlKyJdIn0sTm9uTnVsbFR5cGU6e2xlYXZlOih7dHlwZTplfSk9PmUrIiEifSxTY2hlbWFEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsZGlyZWN0aXZlczp0LG9wZXJhdGlvblR5cGVzOm59KT0+TygiIixlLGAKYCkrbShbInNjaGVtYSIsbSh0LCIgIiksZWUobildLCIgIil9LE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOntsZWF2ZTooe29wZXJhdGlvbjplLHR5cGU6dH0pPT5lKyI6ICIrdH0sU2NhbGFyVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpufSk9Pk8oIiIsZSxgCmApK20oWyJzY2FsYXIiLHQsbShuLCIgIildLCIgIil9LE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+TygiIixlLGAKYCkrbShbInR5cGUiLHQsTygiaW1wbGVtZW50cyAiLG0obiwiICYgIikpLG0ociwiICIpLGVlKGkpXSwiICIpfSxGaWVsZERlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4sdHlwZTpyLGRpcmVjdGl2ZXM6aX0pPT5PKCIiLGUsYApgKSt0KyhTdChuKT9PKGAoCmAsRGUobShuLGAKYCkpLGAKKWApOk8oIigiLG0obiwiLCAiKSwiKSIpKSsiOiAiK3IrTygiICIsbShpLCIgIikpfSxJbnB1dFZhbHVlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCx0eXBlOm4sZGVmYXVsdFZhbHVlOnIsZGlyZWN0aXZlczppfSk9Pk8oIiIsZSxgCmApK20oW3QrIjogIituLE8oIj0gIixyKSxtKGksIiAiKV0sIiAiKX0sSW50ZXJmYWNlVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pPT5PKCIiLGUsYApgKSttKFsiaW50ZXJmYWNlIix0LE8oImltcGxlbWVudHMgIixtKG4sIiAmICIpKSxtKHIsIiAiKSxlZShpKV0sIiAiKX0sVW5pb25UeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm4sdHlwZXM6cn0pPT5PKCIiLGUsYApgKSttKFsidW5pb24iLHQsbShuLCIgIiksTygiPSAiLG0ociwiIHwgIikpXSwiICIpfSxFbnVtVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHZhbHVlczpyfSk9Pk8oIiIsZSxgCmApK20oWyJlbnVtIix0LG0obiwiICIpLGVlKHIpXSwiICIpfSxFbnVtVmFsdWVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bn0pPT5PKCIiLGUsYApgKSttKFt0LG0obiwiICIpXSwiICIpfSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5PKCIiLGUsYApgKSttKFsiaW5wdXQiLHQsbShuLCIgIiksZWUocildLCIgIil9LERpcmVjdGl2ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4scmVwZWF0YWJsZTpyLGxvY2F0aW9uczppfSk9Pk8oIiIsZSxgCmApKyJkaXJlY3RpdmUgQCIrdCsoU3Qobik/TyhgKApgLERlKG0obixgCmApKSxgCilgKTpPKCIoIixtKG4sIiwgIiksIikiKSkrKHI/IiByZXBlYXRhYmxlIjoiIikrIiBvbiAiK20oaSwiIHwgIil9LFNjaGVtYUV4dGVuc2lvbjp7bGVhdmU6KHtkaXJlY3RpdmVzOmUsb3BlcmF0aW9uVHlwZXM6dH0pPT5tKFsiZXh0ZW5kIHNjaGVtYSIsbShlLCIgIiksZWUodCldLCIgIil9LFNjYWxhclR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT5tKFsiZXh0ZW5kIHNjYWxhciIsZSxtKHQsIiAiKV0sIiAiKX0sT2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5tKFsiZXh0ZW5kIHR5cGUiLGUsTygiaW1wbGVtZW50cyAiLG0odCwiICYgIikpLG0obiwiICIpLGVlKHIpXSwiICIpfSxJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxpbnRlcmZhY2VzOnQsZGlyZWN0aXZlczpuLGZpZWxkczpyfSk9Pm0oWyJleHRlbmQgaW50ZXJmYWNlIixlLE8oImltcGxlbWVudHMgIixtKHQsIiAmICIpKSxtKG4sIiAiKSxlZShyKV0sIiAiKX0sVW5pb25UeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsdHlwZXM6bn0pPT5tKFsiZXh0ZW5kIHVuaW9uIixlLG0odCwiICIpLE8oIj0gIixtKG4sIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx2YWx1ZXM6bn0pPT5tKFsiZXh0ZW5kIGVudW0iLGUsbSh0LCIgIiksZWUobildLCIgIil9LElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsZGlyZWN0aXZlczp0LGZpZWxkczpufSk9Pm0oWyJleHRlbmQgaW5wdXQiLGUsbSh0LCIgIiksZWUobildLCIgIil9fTtmdW5jdGlvbiBtKGUsdD0iIil7dmFyIG47cmV0dXJuKG49ZT09bnVsbD92b2lkIDA6ZS5maWx0ZXIocj0+cikuam9pbih0KSkhPT1udWxsJiZuIT09dm9pZCAwP246IiJ9ZnVuY3Rpb24gZWUoZSl7cmV0dXJuIE8oYHsKYCxEZShtKGUsYApgKSksYAp9YCl9ZnVuY3Rpb24gTyhlLHQsbj0iIil7cmV0dXJuIHQhPW51bGwmJnQhPT0iIj9lK3QrbjoiIn1mdW5jdGlvbiBEZShlKXtyZXR1cm4gTygiICAiLGUucmVwbGFjZSgvXG4vZyxgCiAgYCkpfWZ1bmN0aW9uIFN0KGUpe3ZhciB0O3JldHVybih0PWU9PW51bGw/dm9pZCAwOmUuc29tZShuPT5uLmluY2x1ZGVzKGAKYCkpKSE9PW51bGwmJnQhPT12b2lkIDA/dDohMX12YXIgQ2U9bmV3IE1hcCx6ZT1uZXcgTWFwLHd0PSEwLGtlPSExO2Z1bmN0aW9uIER0KGUpe3JldHVybiBlLnJlcGxhY2UoL1tccyxdKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uICRuKGUpe3JldHVybiBEdChlLnNvdXJjZS5ib2R5LnN1YnN0cmluZyhlLnN0YXJ0LGUuZW5kKSl9ZnVuY3Rpb24gVW4oZSl7dmFyIHQ9bmV3IFNldCxuPVtdO3JldHVybiBlLmRlZmluaXRpb25zLmZvckVhY2goZnVuY3Rpb24ocil7aWYoci5raW5kPT09IkZyYWdtZW50RGVmaW5pdGlvbiIpe3ZhciBpPXIubmFtZS52YWx1ZSxzPSRuKHIubG9jKSxvPXplLmdldChpKTtvJiYhby5oYXMocyk/d3QmJmNvbnNvbGUud2FybigiV2FybmluZzogZnJhZ21lbnQgd2l0aCBuYW1lICIraStgIGFscmVhZHkgZXhpc3RzLgpncmFwaHFsLXRhZyBlbmZvcmNlcyBhbGwgZnJhZ21lbnQgbmFtZXMgYWNyb3NzIHlvdXIgYXBwbGljYXRpb24gdG8gYmUgdW5pcXVlOyByZWFkIG1vcmUgYWJvdXQKdGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lc2ApOm98fHplLnNldChpLG89bmV3IFNldCksby5hZGQocyksdC5oYXMocyl8fCh0LmFkZChzKSxuLnB1c2gocikpfWVsc2Ugbi5wdXNoKHIpfSksc2Uoc2Uoe30sZSkse2RlZmluaXRpb25zOm59KX1mdW5jdGlvbiBWbihlKXt2YXIgdD1uZXcgU2V0KGUuZGVmaW5pdGlvbnMpO3QuZm9yRWFjaChmdW5jdGlvbihyKXtyLmxvYyYmZGVsZXRlIHIubG9jLE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24oaSl7dmFyIHM9cltpXTtzJiZ0eXBlb2Ygcz09Im9iamVjdCImJnQuYWRkKHMpfSl9KTt2YXIgbj1lLmxvYztyZXR1cm4gbiYmKGRlbGV0ZSBuLnN0YXJ0VG9rZW4sZGVsZXRlIG4uZW5kVG9rZW4pLGV9ZnVuY3Rpb24gam4oZSl7dmFyIHQ9RHQoZSk7aWYoIUNlLmhhcyh0KSl7dmFyIG49SXQoZSx7ZXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6a2UsYWxsb3dMZWdhY3lGcmFnbWVudFZhcmlhYmxlczprZX0pO2lmKCFufHxuLmtpbmQhPT0iRG9jdW1lbnQiKXRocm93IG5ldyBFcnJvcigiTm90IGEgdmFsaWQgR3JhcGhRTCBkb2N1bWVudC4iKTtDZS5zZXQodCxWbihVbihuKSkpfXJldHVybiBDZS5nZXQodCl9ZnVuY3Rpb24gcGUoZSl7Zm9yKHZhciB0PVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07dHlwZW9mIGU9PSJzdHJpbmciJiYoZT1bZV0pO3ZhciByPWVbMF07cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihpLHMpe2kmJmkua2luZD09PSJEb2N1bWVudCI/cis9aS5sb2Muc291cmNlLmJvZHk6cis9aSxyKz1lW3MrMV19KSxqbihyKX1mdW5jdGlvbiBxbigpe0NlLmNsZWFyKCksemUuY2xlYXIoKX1mdW5jdGlvbiBHbigpe3d0PSExfWZ1bmN0aW9uIEhuKCl7a2U9ITB9ZnVuY3Rpb24gem4oKXtrZT0hMX12YXIgTmU9e2dxbDpwZSxyZXNldENhY2hlczpxbixkaXNhYmxlRnJhZ21lbnRXYXJuaW5nczpHbixlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlczpIbixkaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM6em59OyhmdW5jdGlvbihlKXtlLmdxbD1OZS5ncWwsZS5yZXNldENhY2hlcz1OZS5yZXNldENhY2hlcyxlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPU5lLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzLGUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9TmUuZW5hYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXMsZS5kaXNhYmxlRXhwZXJpbWVudGFsRnJhZ21lbnRWYXJpYWJsZXM9TmUuZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzfSkocGV8fChwZT17fSkpLHBlLmRlZmF1bHQ9cGU7dmFyIG9lPXBlLEN0OyhmdW5jdGlvbihlKXtlLkJpbGxpbmdRdW90YUV4Y2VlZGVkPSJCaWxsaW5nUXVvdGFFeGNlZWRlZCJ9KShDdHx8KEN0PXt9KSk7Y29uc3QgWW49b2VgCgltdXRhdGlvbiBQdXNoUGF5bG9hZCgKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkcGF5bG9hZF9pZDogSUQhCgkJJGV2ZW50czogUmVwbGF5RXZlbnRzSW5wdXQhCgkJJG1lc3NhZ2VzOiBTdHJpbmchCgkJJHJlc291cmNlczogU3RyaW5nIQoJCSR3ZWJfc29ja2V0X2V2ZW50czogU3RyaW5nIQoJCSRlcnJvcnM6IFtFcnJvck9iamVjdElucHV0XSEKCQkkaXNfYmVhY29uOiBCb29sZWFuCgkJJGhhc19zZXNzaW9uX3VubG9hZGVkOiBCb29sZWFuCgkJJGhpZ2hsaWdodF9sb2dzOiBTdHJpbmcKCSkgewoJCXB1c2hQYXlsb2FkKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXBheWxvYWRfaWQ6ICRwYXlsb2FkX2lkCgkJCWV2ZW50czogJGV2ZW50cwoJCQltZXNzYWdlczogJG1lc3NhZ2VzCgkJCXJlc291cmNlczogJHJlc291cmNlcwoJCQl3ZWJfc29ja2V0X2V2ZW50czogJHdlYl9zb2NrZXRfZXZlbnRzCgkJCWVycm9yczogJGVycm9ycwoJCQlpc19iZWFjb246ICRpc19iZWFjb24KCQkJaGFzX3Nlc3Npb25fdW5sb2FkZWQ6ICRoYXNfc2Vzc2lvbl91bmxvYWRlZAoJCQloaWdobGlnaHRfbG9nczogJGhpZ2hsaWdodF9sb2dzCgkJKQoJfQpgLEpuPW9lYAoJbXV0YXRpb24gUHVzaFBheWxvYWRDb21wcmVzc2VkKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwYXlsb2FkX2lkOiBJRCEKCQkkZGF0YTogU3RyaW5nIQoJKSB7CgkJcHVzaFBheWxvYWRDb21wcmVzc2VkKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXBheWxvYWRfaWQ6ICRwYXlsb2FkX2lkCgkJCWRhdGE6ICRkYXRhCgkJKQoJfQpgLFFuPW9lYAoJbXV0YXRpb24gaWRlbnRpZnlTZXNzaW9uKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSR1c2VyX2lkZW50aWZpZXI6IFN0cmluZyEKCQkkdXNlcl9vYmplY3Q6IEFueQoJKSB7CgkJaWRlbnRpZnlTZXNzaW9uKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXVzZXJfaWRlbnRpZmllcjogJHVzZXJfaWRlbnRpZmllcgoJCQl1c2VyX29iamVjdDogJHVzZXJfb2JqZWN0CgkJKQoJfQpgLFhuPW9lYAoJbXV0YXRpb24gYWRkU2Vzc2lvblByb3BlcnRpZXMoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHByb3BlcnRpZXNfb2JqZWN0OiBBbnkKCSkgewoJCWFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXByb3BlcnRpZXNfb2JqZWN0OiAkcHJvcGVydGllc19vYmplY3QKCQkpCgl9CmAsV249b2VgCgltdXRhdGlvbiBwdXNoTWV0cmljcygkbWV0cmljczogW01ldHJpY0lucHV0XSEpIHsKCQlwdXNoTWV0cmljcyhtZXRyaWNzOiAkbWV0cmljcykKCX0KYCxabj1vZWAKCW11dGF0aW9uIGFkZFNlc3Npb25GZWVkYmFjaygKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkdXNlcl9uYW1lOiBTdHJpbmcKCQkkdXNlcl9lbWFpbDogU3RyaW5nCgkJJHZlcmJhdGltOiBTdHJpbmchCgkJJHRpbWVzdGFtcDogVGltZXN0YW1wIQoJKSB7CgkJYWRkU2Vzc2lvbkZlZWRiYWNrKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCXVzZXJfbmFtZTogJHVzZXJfbmFtZQoJCQl1c2VyX2VtYWlsOiAkdXNlcl9lbWFpbAoJCQl2ZXJiYXRpbTogJHZlcmJhdGltCgkJCXRpbWVzdGFtcDogJHRpbWVzdGFtcAoJCSkKCX0KYCxLbj1vZWAKCW11dGF0aW9uIGluaXRpYWxpemVTZXNzaW9uKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRvcmdhbml6YXRpb25fdmVyYm9zZV9pZDogU3RyaW5nIQoJCSRlbmFibGVfc3RyaWN0X3ByaXZhY3k6IEJvb2xlYW4hCgkJJHByaXZhY3lfc2V0dGluZzogU3RyaW5nIQoJCSRlbmFibGVfcmVjb3JkaW5nX25ldHdvcmtfY29udGVudHM6IEJvb2xlYW4hCgkJJGNsaWVudFZlcnNpb246IFN0cmluZyEKCQkkZmlyc3Rsb2FkVmVyc2lvbjogU3RyaW5nIQoJCSRjbGllbnRDb25maWc6IFN0cmluZyEKCQkkZW52aXJvbm1lbnQ6IFN0cmluZyEKCQkkaWQ6IFN0cmluZyEKCQkkYXBwVmVyc2lvbjogU3RyaW5nCgkJJHNlcnZpY2VOYW1lOiBTdHJpbmchCgkJJGNsaWVudF9pZDogU3RyaW5nIQoJCSRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zOiBbU3RyaW5nIV0KCQkkZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogQm9vbGVhbgoJKSB7CgkJaW5pdGlhbGl6ZVNlc3Npb24oCgkJCXNlc3Npb25fc2VjdXJlX2lkOiAkc2Vzc2lvbl9zZWN1cmVfaWQKCQkJb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6ICRvcmdhbml6YXRpb25fdmVyYm9zZV9pZAoJCQllbmFibGVfc3RyaWN0X3ByaXZhY3k6ICRlbmFibGVfc3RyaWN0X3ByaXZhY3kKCQkJZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzOiAkZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzCgkJCWNsaWVudFZlcnNpb246ICRjbGllbnRWZXJzaW9uCgkJCWZpcnN0bG9hZFZlcnNpb246ICRmaXJzdGxvYWRWZXJzaW9uCgkJCWNsaWVudENvbmZpZzogJGNsaWVudENvbmZpZwoJCQllbnZpcm9ubWVudDogJGVudmlyb25tZW50CgkJCWFwcFZlcnNpb246ICRhcHBWZXJzaW9uCgkJCXNlcnZpY2VOYW1lOiAkc2VydmljZU5hbWUKCQkJZmluZ2VycHJpbnQ6ICRpZAoJCQljbGllbnRfaWQ6ICRjbGllbnRfaWQKCQkJbmV0d29ya19yZWNvcmRpbmdfZG9tYWluczogJG5ldHdvcmtfcmVjb3JkaW5nX2RvbWFpbnMKCQkJZGlzYWJsZV9zZXNzaW9uX3JlY29yZGluZzogJGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmcKCQkJcHJpdmFjeV9zZXR0aW5nOiAkcHJpdmFjeV9zZXR0aW5nCgkJKSB7CgkJCXNlY3VyZV9pZAoJCQlwcm9qZWN0X2lkCgkJfQoJfQpgLGVyPW9lYAoJcXVlcnkgSWdub3JlKCRpZDogSUQhKSB7CgkJaWdub3JlKGlkOiAkaWQpCgl9CmAsdHI9KGUsdCxuLHIpPT5lKCk7ZnVuY3Rpb24gbnIoZSx0PXRyKXtyZXR1cm57UHVzaFBheWxvYWQobixyKXtyZXR1cm4gdChpPT5lLnJlcXVlc3QoWW4sbixrKGsoe30sciksaSkpLCJQdXNoUGF5bG9hZCIsIm11dGF0aW9uIixuKX0sUHVzaFBheWxvYWRDb21wcmVzc2VkKG4scil7cmV0dXJuIHQoaT0+ZS5yZXF1ZXN0KEpuLG4sayhrKHt9LHIpLGkpKSwiUHVzaFBheWxvYWRDb21wcmVzc2VkIiwibXV0YXRpb24iLG4pfSxpZGVudGlmeVNlc3Npb24obixyKXtyZXR1cm4gdChpPT5lLnJlcXVlc3QoUW4sbixrKGsoe30sciksaSkpLCJpZGVudGlmeVNlc3Npb24iLCJtdXRhdGlvbiIsbil9LGFkZFNlc3Npb25Qcm9wZXJ0aWVzKG4scil7cmV0dXJuIHQoaT0+ZS5yZXF1ZXN0KFhuLG4sayhrKHt9LHIpLGkpKSwiYWRkU2Vzc2lvblByb3BlcnRpZXMiLCJtdXRhdGlvbiIsbil9LHB1c2hNZXRyaWNzKG4scil7cmV0dXJuIHQoaT0+ZS5yZXF1ZXN0KFduLG4sayhrKHt9LHIpLGkpKSwicHVzaE1ldHJpY3MiLCJtdXRhdGlvbiIsbil9LGFkZFNlc3Npb25GZWVkYmFjayhuLHIpe3JldHVybiB0KGk9PmUucmVxdWVzdChabixuLGsoayh7fSxyKSxpKSksImFkZFNlc3Npb25GZWVkYmFjayIsIm11dGF0aW9uIixuKX0saW5pdGlhbGl6ZVNlc3Npb24obixyKXtyZXR1cm4gdChpPT5lLnJlcXVlc3QoS24sbixrKGsoe30sciksaSkpLCJpbml0aWFsaXplU2Vzc2lvbiIsIm11dGF0aW9uIixuKX0sSWdub3JlKG4scil7cmV0dXJuIHQoaT0+ZS5yZXF1ZXN0KGVyLG4sayhrKHt9LHIpLGkpKSwiSWdub3JlIiwicXVlcnkiLG4pfX19Y29uc3QgWWU9SlNPTixycj1lPT5lLnRvVXBwZXJDYXNlKCksaXI9ZT0+e2NvbnN0IHQ9e307cmV0dXJuIGUuZm9yRWFjaCgobixyKT0+e3Rbcl09bn0pLHR9LHNyPShlLHQsbik9PmUuZG9jdW1lbnQ/ZTp7ZG9jdW1lbnQ6ZSx2YXJpYWJsZXM6dCxyZXF1ZXN0SGVhZGVyczpuLHNpZ25hbDp2b2lkIDB9LG9yPShlLHQsbik9PmUucXVlcnk/ZTp7cXVlcnk6ZSx2YXJpYWJsZXM6dCxyZXF1ZXN0SGVhZGVyczpuLHNpZ25hbDp2b2lkIDB9LGFyPShlLHQpPT5lLmRvY3VtZW50cz9lOntkb2N1bWVudHM6ZSxyZXF1ZXN0SGVhZGVyczp0LHNpZ25hbDp2b2lkIDB9LGt0PWU9Pnt2YXIgcixpO2xldCB0O2NvbnN0IG49ZS5kZWZpbml0aW9ucy5maWx0ZXIocz0+cy5raW5kPT09Ik9wZXJhdGlvbkRlZmluaXRpb24iKTtyZXR1cm4gbi5sZW5ndGg9PT0xJiYodD0oaT0ocj1uWzBdKT09bnVsbD92b2lkIDA6ci5uYW1lKT09bnVsbD92b2lkIDA6aS52YWx1ZSksdH0sSmU9ZT0+e2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7bGV0IG47dHJ5e2NvbnN0IHI9SXQoZSk7bj1rdChyKX1jYXRjaChyKXt9cmV0dXJue3F1ZXJ5OmUsb3BlcmF0aW9uTmFtZTpufX1jb25zdCB0PWt0KGUpO3JldHVybntxdWVyeTpGbihlKSxvcGVyYXRpb25OYW1lOnR9fTtjbGFzcyBtZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsbil7Y29uc3Qgcj1gJHttZS5leHRyYWN0TWVzc2FnZSh0KX06ICR7SlNPTi5zdHJpbmdpZnkoe3Jlc3BvbnNlOnQscmVxdWVzdDpufSl9YDtzdXBlcihyKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxtZS5wcm90b3R5cGUpLHRoaXMucmVzcG9uc2U9dCx0aGlzLnJlcXVlc3Q9bix0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U9PSJmdW5jdGlvbiImJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsbWUpfXN0YXRpYyBleHRyYWN0TWVzc2FnZSh0KXt2YXIgbixyLGk7cmV0dXJuKGk9KHI9KG49dC5lcnJvcnMpPT1udWxsP3ZvaWQgMDpuWzBdKT09bnVsbD92b2lkIDA6ci5tZXNzYWdlKSE9bnVsbD9pOmBHcmFwaFFMIEVycm9yIChDb2RlOiAke3Quc3RhdHVzfSlgfX12YXIgUWU9e2V4cG9ydHM6e319OyhmdW5jdGlvbihlLHQpe3ZhciBuPXR5cGVvZiBzZWxmIT0idW5kZWZpbmVkIj9zZWxmOkYscj1mdW5jdGlvbigpe2Z1bmN0aW9uIHMoKXt0aGlzLmZldGNoPSExLHRoaXMuRE9NRXhjZXB0aW9uPW4uRE9NRXhjZXB0aW9ufXJldHVybiBzLnByb3RvdHlwZT1uLG5ldyBzfSgpOyhmdW5jdGlvbihzKXsoZnVuY3Rpb24obyl7dmFyIGM9e3NlYXJjaFBhcmFtczoiVVJMU2VhcmNoUGFyYW1zImluIHMsaXRlcmFibGU6IlN5bWJvbCJpbiBzJiYiaXRlcmF0b3IiaW4gU3ltYm9sLGJsb2I6IkZpbGVSZWFkZXIiaW4gcyYmIkJsb2IiaW4gcyYmZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBCbG9iLCEwfWNhdGNoKGEpe3JldHVybiExfX0oKSxmb3JtRGF0YToiRm9ybURhdGEiaW4gcyxhcnJheUJ1ZmZlcjoiQXJyYXlCdWZmZXIiaW4gc307ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSYmRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYSl9aWYoYy5hcnJheUJ1ZmZlcil2YXIgZj1bIltvYmplY3QgSW50OEFycmF5XSIsIltvYmplY3QgVWludDhBcnJheV0iLCJbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSIsIltvYmplY3QgSW50MTZBcnJheV0iLCJbb2JqZWN0IFVpbnQxNkFycmF5XSIsIltvYmplY3QgSW50MzJBcnJheV0iLCJbb2JqZWN0IFVpbnQzMkFycmF5XSIsIltvYmplY3QgRmxvYXQzMkFycmF5XSIsIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdLHU9QXJyYXlCdWZmZXIuaXNWaWV3fHxmdW5jdGlvbihhKXtyZXR1cm4gYSYmZi5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSk+LTF9O2Z1bmN0aW9uIGcoYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciJiYoYT1TdHJpbmcoYSkpLC9bXmEtejAtOVwtIyQlJicqKy5eX2B8fl0vaS50ZXN0KGEpKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lIik7cmV0dXJuIGEudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBFKGEpe3JldHVybiB0eXBlb2YgYSE9InN0cmluZyImJihhPVN0cmluZyhhKSksYX1mdW5jdGlvbiBiKGEpe3ZhciBoPXtuZXh0OmZ1bmN0aW9uKCl7dmFyIF89YS5zaGlmdCgpO3JldHVybntkb25lOl89PT12b2lkIDAsdmFsdWU6X319fTtyZXR1cm4gYy5pdGVyYWJsZSYmKGhbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiBofSksaH1mdW5jdGlvbiB5KGEpe3RoaXMubWFwPXt9LGEgaW5zdGFuY2VvZiB5P2EuZm9yRWFjaChmdW5jdGlvbihoLF8pe3RoaXMuYXBwZW5kKF8saCl9LHRoaXMpOkFycmF5LmlzQXJyYXkoYSk/YS5mb3JFYWNoKGZ1bmN0aW9uKGgpe3RoaXMuYXBwZW5kKGhbMF0saFsxXSl9LHRoaXMpOmEmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGEpLmZvckVhY2goZnVuY3Rpb24oaCl7dGhpcy5hcHBlbmQoaCxhW2hdKX0sdGhpcyl9eS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKGEsaCl7YT1nKGEpLGg9RShoKTt2YXIgXz10aGlzLm1hcFthXTt0aGlzLm1hcFthXT1fP18rIiwgIitoOmh9LHkucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihhKXtkZWxldGUgdGhpcy5tYXBbZyhhKV19LHkucHJvdG90eXBlLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gYT1nKGEpLHRoaXMuaGFzKGEpP3RoaXMubWFwW2FdOm51bGx9LHkucHJvdG90eXBlLmhhcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkoZyhhKSl9LHkucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGgpe3RoaXMubWFwW2coYSldPUUoaCl9LHkucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oYSxoKXtmb3IodmFyIF8gaW4gdGhpcy5tYXApdGhpcy5tYXAuaGFzT3duUHJvcGVydHkoXykmJmEuY2FsbChoLHRoaXMubWFwW19dLF8sdGhpcyl9LHkucHJvdG90eXBlLmtleXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGgsXyl7YS5wdXNoKF8pfSksYihhKX0seS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihoKXthLnB1c2goaCl9KSxiKGEpfSx5LnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihoLF8pe2EucHVzaChbXyxoXSl9KSxiKGEpfSxjLml0ZXJhYmxlJiYoeS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXT15LnByb3RvdHlwZS5lbnRyaWVzKTtmdW5jdGlvbiBwKGEpe2lmKGEuYm9keVVzZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoIkFscmVhZHkgcmVhZCIpKTthLmJvZHlVc2VkPSEwfWZ1bmN0aW9uIHYoYSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGgsXyl7YS5vbmxvYWQ9ZnVuY3Rpb24oKXtoKGEucmVzdWx0KX0sYS5vbmVycm9yPWZ1bmN0aW9uKCl7XyhhLmVycm9yKX19KX1mdW5jdGlvbiBOKGEpe3ZhciBoPW5ldyBGaWxlUmVhZGVyLF89dihoKTtyZXR1cm4gaC5yZWFkQXNBcnJheUJ1ZmZlcihhKSxffWZ1bmN0aW9uIEMoYSl7dmFyIGg9bmV3IEZpbGVSZWFkZXIsXz12KGgpO3JldHVybiBoLnJlYWRBc1RleHQoYSksX31mdW5jdGlvbiBSKGEpe2Zvcih2YXIgaD1uZXcgVWludDhBcnJheShhKSxfPW5ldyBBcnJheShoLmxlbmd0aCksST0wO0k8aC5sZW5ndGg7SSsrKV9bSV09U3RyaW5nLmZyb21DaGFyQ29kZShoW0ldKTtyZXR1cm4gXy5qb2luKCIiKX1mdW5jdGlvbiBMKGEpe2lmKGEuc2xpY2UpcmV0dXJuIGEuc2xpY2UoMCk7dmFyIGg9bmV3IFVpbnQ4QXJyYXkoYS5ieXRlTGVuZ3RoKTtyZXR1cm4gaC5zZXQobmV3IFVpbnQ4QXJyYXkoYSkpLGguYnVmZmVyfWZ1bmN0aW9uIE0oKXtyZXR1cm4gdGhpcy5ib2R5VXNlZD0hMSx0aGlzLl9pbml0Qm9keT1mdW5jdGlvbihhKXt0aGlzLl9ib2R5SW5pdD1hLGE/dHlwZW9mIGE9PSJzdHJpbmciP3RoaXMuX2JvZHlUZXh0PWE6Yy5ibG9iJiZCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGEpP3RoaXMuX2JvZHlCbG9iPWE6Yy5mb3JtRGF0YSYmRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYSk/dGhpcy5fYm9keUZvcm1EYXRhPWE6Yy5zZWFyY2hQYXJhbXMmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKT90aGlzLl9ib2R5VGV4dD1hLnRvU3RyaW5nKCk6Yy5hcnJheUJ1ZmZlciYmYy5ibG9iJiZkKGEpPyh0aGlzLl9ib2R5QXJyYXlCdWZmZXI9TChhLmJ1ZmZlciksdGhpcy5fYm9keUluaXQ9bmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKTpjLmFycmF5QnVmZmVyJiYoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYSl8fHUoYSkpP3RoaXMuX2JvZHlBcnJheUJ1ZmZlcj1MKGEpOnRoaXMuX2JvZHlUZXh0PWE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpOnRoaXMuX2JvZHlUZXh0PSIiLHRoaXMuaGVhZGVycy5nZXQoImNvbnRlbnQtdHlwZSIpfHwodHlwZW9mIGE9PSJzdHJpbmciP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOCIpOnRoaXMuX2JvZHlCbG9iJiZ0aGlzLl9ib2R5QmxvYi50eXBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsdGhpcy5fYm9keUJsb2IudHlwZSk6Yy5zZWFyY2hQYXJhbXMmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihhKSYmdGhpcy5oZWFkZXJzLnNldCgiY29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgiKSl9LGMuYmxvYiYmKHRoaXMuYmxvYj1mdW5jdGlvbigpe3ZhciBhPXAodGhpcyk7aWYoYSlyZXR1cm4gYTtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKTtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpfSx0aGlzLmFycmF5QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj9wKHRoaXMpfHxQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKTp0aGlzLmJsb2IoKS50aGVuKE4pfSksdGhpcy50ZXh0PWZ1bmN0aW9uKCl7dmFyIGE9cCh0aGlzKTtpZihhKXJldHVybiBhO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBDKHRoaXMuX2JvZHlCbG9iKTtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShSKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCIpO3JldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpfSxjLmZvcm1EYXRhJiYodGhpcy5mb3JtRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQoKS50aGVuKHgpfSksdGhpcy5qc29uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSl9LHRoaXN9dmFyIEg9WyJERUxFVEUiLCJHRVQiLCJIRUFEIiwiT1BUSU9OUyIsIlBPU1QiLCJQVVQiXTtmdW5jdGlvbiAkKGEpe3ZhciBoPWEudG9VcHBlckNhc2UoKTtyZXR1cm4gSC5pbmRleE9mKGgpPi0xP2g6YX1mdW5jdGlvbiBBKGEsaCl7aD1ofHx7fTt2YXIgXz1oLmJvZHk7aWYoYSBpbnN0YW5jZW9mIEEpe2lmKGEuYm9keVVzZWQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIik7dGhpcy51cmw9YS51cmwsdGhpcy5jcmVkZW50aWFscz1hLmNyZWRlbnRpYWxzLGguaGVhZGVyc3x8KHRoaXMuaGVhZGVycz1uZXcgeShhLmhlYWRlcnMpKSx0aGlzLm1ldGhvZD1hLm1ldGhvZCx0aGlzLm1vZGU9YS5tb2RlLHRoaXMuc2lnbmFsPWEuc2lnbmFsLCFfJiZhLl9ib2R5SW5pdCE9bnVsbCYmKF89YS5fYm9keUluaXQsYS5ib2R5VXNlZD0hMCl9ZWxzZSB0aGlzLnVybD1TdHJpbmcoYSk7aWYodGhpcy5jcmVkZW50aWFscz1oLmNyZWRlbnRpYWxzfHx0aGlzLmNyZWRlbnRpYWxzfHwic2FtZS1vcmlnaW4iLChoLmhlYWRlcnN8fCF0aGlzLmhlYWRlcnMpJiYodGhpcy5oZWFkZXJzPW5ldyB5KGguaGVhZGVycykpLHRoaXMubWV0aG9kPSQoaC5tZXRob2R8fHRoaXMubWV0aG9kfHwiR0VUIiksdGhpcy5tb2RlPWgubW9kZXx8dGhpcy5tb2RlfHxudWxsLHRoaXMuc2lnbmFsPWguc2lnbmFsfHx0aGlzLnNpZ25hbCx0aGlzLnJlZmVycmVyPW51bGwsKHRoaXMubWV0aG9kPT09IkdFVCJ8fHRoaXMubWV0aG9kPT09IkhFQUQiKSYmXyl0aHJvdyBuZXcgVHlwZUVycm9yKCJCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cyIpO3RoaXMuX2luaXRCb2R5KF8pfUEucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBKHRoaXMse2JvZHk6dGhpcy5fYm9keUluaXR9KX07ZnVuY3Rpb24geChhKXt2YXIgaD1uZXcgRm9ybURhdGE7cmV0dXJuIGEudHJpbSgpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihfKXtpZihfKXt2YXIgST1fLnNwbGl0KCI9Iiksdz1JLnNoaWZ0KCkucmVwbGFjZSgvXCsvZywiICIpLFM9SS5qb2luKCI9IikucmVwbGFjZSgvXCsvZywiICIpO2guYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudCh3KSxkZWNvZGVVUklDb21wb25lbnQoUykpfX0pLGh9ZnVuY3Rpb24gaihhKXt2YXIgaD1uZXcgeSxfPWEucmVwbGFjZSgvXHI/XG5bXHQgXSsvZywiICIpO3JldHVybiBfLnNwbGl0KC9ccj9cbi8pLmZvckVhY2goZnVuY3Rpb24oSSl7dmFyIHc9SS5zcGxpdCgiOiIpLFM9dy5zaGlmdCgpLnRyaW0oKTtpZihTKXt2YXIgY2U9dy5qb2luKCI6IikudHJpbSgpO2guYXBwZW5kKFMsY2UpfX0pLGh9TS5jYWxsKEEucHJvdG90eXBlKTtmdW5jdGlvbiBWKGEsaCl7aHx8KGg9e30pLHRoaXMudHlwZT0iZGVmYXVsdCIsdGhpcy5zdGF0dXM9aC5zdGF0dXM9PT12b2lkIDA/MjAwOmguc3RhdHVzLHRoaXMub2s9dGhpcy5zdGF0dXM+PTIwMCYmdGhpcy5zdGF0dXM8MzAwLHRoaXMuc3RhdHVzVGV4dD0ic3RhdHVzVGV4dCJpbiBoP2guc3RhdHVzVGV4dDoiT0siLHRoaXMuaGVhZGVycz1uZXcgeShoLmhlYWRlcnMpLHRoaXMudXJsPWgudXJsfHwiIix0aGlzLl9pbml0Qm9keShhKX1NLmNhbGwoVi5wcm90b3R5cGUpLFYucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBWKHRoaXMuX2JvZHlJbml0LHtzdGF0dXM6dGhpcy5zdGF0dXMsc3RhdHVzVGV4dDp0aGlzLnN0YXR1c1RleHQsaGVhZGVyczpuZXcgeSh0aGlzLmhlYWRlcnMpLHVybDp0aGlzLnVybH0pfSxWLmVycm9yPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFYobnVsbCx7c3RhdHVzOjAsc3RhdHVzVGV4dDoiIn0pO3JldHVybiBhLnR5cGU9ImVycm9yIixhfTt2YXIgcT1bMzAxLDMwMiwzMDMsMzA3LDMwOF07Vi5yZWRpcmVjdD1mdW5jdGlvbihhLGgpe2lmKHEuaW5kZXhPZihoKT09PS0xKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHN0YXR1cyBjb2RlIik7cmV0dXJuIG5ldyBWKG51bGwse3N0YXR1czpoLGhlYWRlcnM6e2xvY2F0aW9uOmF9fSl9LG8uRE9NRXhjZXB0aW9uPXMuRE9NRXhjZXB0aW9uO3RyeXtuZXcgby5ET01FeGNlcHRpb259Y2F0Y2goYSl7by5ET01FeGNlcHRpb249ZnVuY3Rpb24oaCxfKXt0aGlzLm1lc3NhZ2U9aCx0aGlzLm5hbWU9Xzt2YXIgST1FcnJvcihoKTt0aGlzLnN0YWNrPUkuc3RhY2t9LG8uRE9NRXhjZXB0aW9uLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksby5ET01FeGNlcHRpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yPW8uRE9NRXhjZXB0aW9ufWZ1bmN0aW9uIFooYSxoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oXyxJKXt2YXIgdz1uZXcgQShhLGgpO2lmKHcuc2lnbmFsJiZ3LnNpZ25hbC5hYm9ydGVkKXJldHVybiBJKG5ldyBvLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSk7dmFyIFM9bmV3IFhNTEh0dHBSZXF1ZXN0O2Z1bmN0aW9uIGNlKCl7Uy5hYm9ydCgpfVMub25sb2FkPWZ1bmN0aW9uKCl7dmFyIHo9e3N0YXR1czpTLnN0YXR1cyxzdGF0dXNUZXh0OlMuc3RhdHVzVGV4dCxoZWFkZXJzOmooUy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8IiIpfTt6LnVybD0icmVzcG9uc2VVUkwiaW4gUz9TLnJlc3BvbnNlVVJMOnouaGVhZGVycy5nZXQoIlgtUmVxdWVzdC1VUkwiKTt2YXIgaWU9InJlc3BvbnNlImluIFM/Uy5yZXNwb25zZTpTLnJlc3BvbnNlVGV4dDtfKG5ldyBWKGllLHopKX0sUy5vbmVycm9yPWZ1bmN0aW9uKCl7SShuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxTLm9udGltZW91dD1mdW5jdGlvbigpe0kobmV3IFR5cGVFcnJvcigiTmV0d29yayByZXF1ZXN0IGZhaWxlZCIpKX0sUy5vbmFib3J0PWZ1bmN0aW9uKCl7SShuZXcgby5ET01FeGNlcHRpb24oIkFib3J0ZWQiLCJBYm9ydEVycm9yIikpfSxTLm9wZW4ody5tZXRob2Qsdy51cmwsITApLHcuY3JlZGVudGlhbHM9PT0iaW5jbHVkZSI/Uy53aXRoQ3JlZGVudGlhbHM9ITA6dy5jcmVkZW50aWFscz09PSJvbWl0IiYmKFMud2l0aENyZWRlbnRpYWxzPSExKSwicmVzcG9uc2VUeXBlImluIFMmJmMuYmxvYiYmKFMucmVzcG9uc2VUeXBlPSJibG9iIiksdy5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oeixpZSl7Uy5zZXRSZXF1ZXN0SGVhZGVyKGllLHopfSksdy5zaWduYWwmJih3LnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsY2UpLFMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7Uy5yZWFkeVN0YXRlPT09NCYmdy5zaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYWJvcnQiLGNlKX0pLFMuc2VuZCh0eXBlb2Ygdy5fYm9keUluaXQ9PSJ1bmRlZmluZWQiP251bGw6dy5fYm9keUluaXQpfSl9cmV0dXJuIFoucG9seWZpbGw9ITAscy5mZXRjaHx8KHMuZmV0Y2g9WixzLkhlYWRlcnM9eSxzLlJlcXVlc3Q9QSxzLlJlc3BvbnNlPVYpLG8uSGVhZGVycz15LG8uUmVxdWVzdD1BLG8uUmVzcG9uc2U9VixvLmZldGNoPVosT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLG99KSh7fSl9KShyKSxyLmZldGNoLnBvbnlmaWxsPSEwLGRlbGV0ZSByLmZldGNoLnBvbHlmaWxsO3ZhciBpPXI7dD1pLmZldGNoLHQuZGVmYXVsdD1pLmZldGNoLHQuZmV0Y2g9aS5mZXRjaCx0LkhlYWRlcnM9aS5IZWFkZXJzLHQuUmVxdWVzdD1pLlJlcXVlc3QsdC5SZXNwb25zZT1pLlJlc3BvbnNlLGUuZXhwb3J0cz10fSkoUWUsUWUuZXhwb3J0cyk7dmFyIFJlPVFlLmV4cG9ydHMsTGU9SihSZSksY3I9Qih7X19wcm90b19fOm51bGwsZGVmYXVsdDpMZX0sW1JlXSk7Y29uc3QgeWU9ZT0+e2xldCB0PXt9O3JldHVybiBlJiYodHlwZW9mIEhlYWRlcnMhPSJ1bmRlZmluZWQiJiZlIGluc3RhbmNlb2YgSGVhZGVyc3x8Y3ImJlJlLkhlYWRlcnMmJmUgaW5zdGFuY2VvZiBSZS5IZWFkZXJzP3Q9aXIoZSk6QXJyYXkuaXNBcnJheShlKT9lLmZvckVhY2goKFtuLHJdKT0+e24mJnIhPT12b2lkIDAmJih0W25dPXIpfSk6dD1lKSx0fSxSdD1lPT5lLnJlcGxhY2UoLyhbXHMsXXwjW15cblxyXSspKy9nLCIgIikudHJpbSgpLHVyPWU9PntpZighQXJyYXkuaXNBcnJheShlLnF1ZXJ5KSl7Y29uc3Qgcj1lLGk9W2BxdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudChSdChyLnF1ZXJ5KSl9YF07cmV0dXJuIGUudmFyaWFibGVzJiZpLnB1c2goYHZhcmlhYmxlcz0ke2VuY29kZVVSSUNvbXBvbmVudChyLmpzb25TZXJpYWxpemVyLnN0cmluZ2lmeShyLnZhcmlhYmxlcykpfWApLHIub3BlcmF0aW9uTmFtZSYmaS5wdXNoKGBvcGVyYXRpb25OYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHIub3BlcmF0aW9uTmFtZSl9YCksaS5qb2luKCImIil9aWYodHlwZW9mIGUudmFyaWFibGVzIT0idW5kZWZpbmVkIiYmIUFycmF5LmlzQXJyYXkoZS52YXJpYWJsZXMpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGNyZWF0ZSBxdWVyeSB3aXRoIGdpdmVuIHZhcmlhYmxlIHR5cGUsIGFycmF5IGV4cGVjdGVkIik7Y29uc3QgdD1lLG49ZS5xdWVyeS5yZWR1Y2UoKHIsaSxzKT0+KHIucHVzaCh7cXVlcnk6UnQoaSksdmFyaWFibGVzOnQudmFyaWFibGVzP3QuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KHQudmFyaWFibGVzW3NdKTp2b2lkIDB9KSxyKSxbXSk7cmV0dXJuYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KG4pKX1gfSxscj1lPT50PT5YKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcDtjb25zdHt1cmw6bixxdWVyeTpyLHZhcmlhYmxlczppLG9wZXJhdGlvbk5hbWU6cyxmZXRjaDpvLGZldGNoT3B0aW9uczpjLG1pZGRsZXdhcmU6ZH09dCxmPWsoe30sdC5oZWFkZXJzKTtsZXQgdT0iIixnO2U9PT0iUE9TVCI/KGc9aHIocixpLHMsYy5qc29uU2VyaWFsaXplciksdHlwZW9mIGc9PSJzdHJpbmciJiYoZlsiQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2pzb24iKSk6dT11cih7cXVlcnk6cix2YXJpYWJsZXM6aSxvcGVyYXRpb25OYW1lOnMsanNvblNlcmlhbGl6ZXI6KHA9Yy5qc29uU2VyaWFsaXplcikhPW51bGw/cDpZZX0pO2NvbnN0IEU9ayh7bWV0aG9kOmUsaGVhZGVyczpmLGJvZHk6Z30sYyk7bGV0IGI9bix5PUU7aWYoZCl7Y29uc3Qgdj15aWVsZCBQcm9taXNlLnJlc29sdmUoZChNZShrKHt9LEUpLHt1cmw6bixvcGVyYXRpb25OYW1lOnMsdmFyaWFibGVzOml9KSkpLHt1cmw6Q309dixSPUVlKHYsWyJ1cmwiXSk7Yj1DLHk9Un1yZXR1cm4gdSYmKGI9YCR7Yn0/JHt1fWApLHlpZWxkIG8oYix5KX0pO2NsYXNzIGZye2NvbnN0cnVjdG9yKHQsbj17fSl7dGhpcy51cmw9dCx0aGlzLnJlcXVlc3RDb25maWc9bix0aGlzLnJhd1JlcXVlc3Q9KC4uLnIpPT5YKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdFtpLHMsb109cixjPW9yKGkscyxvKSx2PXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpkLGZldGNoOmY9TGUsbWV0aG9kOnU9IlBPU1QiLHJlcXVlc3RNaWRkbGV3YXJlOmcscmVzcG9uc2VNaWRkbGV3YXJlOkV9PXYsYj1FZSh2LFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXNwb25zZU1pZGRsZXdhcmUiXSkse3VybDp5fT10aGlzO2Muc2lnbmFsIT09dm9pZCAwJiYoYi5zaWduYWw9Yy5zaWduYWwpO2NvbnN0e29wZXJhdGlvbk5hbWU6cH09SmUoYy5xdWVyeSk7cmV0dXJuIFhlKHt1cmw6eSxxdWVyeTpjLnF1ZXJ5LHZhcmlhYmxlczpjLnZhcmlhYmxlcyxoZWFkZXJzOmsoayh7fSx5ZShXZShkKSkpLHllKGMucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOnAsZmV0Y2g6ZixtZXRob2Q6dSxmZXRjaE9wdGlvbnM6YixtaWRkbGV3YXJlOmd9KS50aGVuKE49PihFJiZFKE4pLE4pKS5jYXRjaChOPT57dGhyb3cgRSYmRShOKSxOfSl9KX1yZXF1ZXN0KHQsLi4ubil7cmV0dXJuIFgodGhpcyxudWxsLGZ1bmN0aW9uKigpe2NvbnN0W3IsaV09bixzPXNyKHQscixpKSxwPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpvLGZldGNoOmM9TGUsbWV0aG9kOmQ9IlBPU1QiLHJlcXVlc3RNaWRkbGV3YXJlOmYscmVzcG9uc2VNaWRkbGV3YXJlOnV9PXAsZz1FZShwLFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXNwb25zZU1pZGRsZXdhcmUiXSkse3VybDpFfT10aGlzO3Muc2lnbmFsIT09dm9pZCAwJiYoZy5zaWduYWw9cy5zaWduYWwpO2NvbnN0e3F1ZXJ5OmIsb3BlcmF0aW9uTmFtZTp5fT1KZShzLmRvY3VtZW50KTtyZXR1cm4gWGUoe3VybDpFLHF1ZXJ5OmIsdmFyaWFibGVzOnMudmFyaWFibGVzLGhlYWRlcnM6ayhrKHt9LHllKFdlKG8pKSkseWUocy5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6eSxmZXRjaDpjLG1ldGhvZDpkLGZldGNoT3B0aW9uczpnLG1pZGRsZXdhcmU6Zn0pLnRoZW4odj0+KHUmJnUodiksdi5kYXRhKSkuY2F0Y2godj0+e3Rocm93IHUmJnUodiksdn0pfSl9YmF0Y2hSZXF1ZXN0cyh0LG4pe3ZhciBmO2NvbnN0IHI9YXIodCxuKSxkPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczppfT1kLHM9RWUoZCxbImhlYWRlcnMiXSk7ci5zaWduYWwhPT12b2lkIDAmJihzLnNpZ25hbD1yLnNpZ25hbCk7Y29uc3Qgbz1yLmRvY3VtZW50cy5tYXAoKHtkb2N1bWVudDp1fSk9PkplKHUpLnF1ZXJ5KSxjPXIuZG9jdW1lbnRzLm1hcCgoe3ZhcmlhYmxlczp1fSk9PnUpO3JldHVybiBYZSh7dXJsOnRoaXMudXJsLHF1ZXJ5Om8sdmFyaWFibGVzOmMsaGVhZGVyczprKGsoe30seWUoV2UoaSkpKSx5ZShyLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTp2b2lkIDAsZmV0Y2g6KGY9dGhpcy5yZXF1ZXN0Q29uZmlnLmZldGNoKSE9bnVsbD9mOkxlLG1ldGhvZDp0aGlzLnJlcXVlc3RDb25maWcubWV0aG9kfHwiUE9TVCIsZmV0Y2hPcHRpb25zOnMsbWlkZGxld2FyZTp0aGlzLnJlcXVlc3RDb25maWcucmVxdWVzdE1pZGRsZXdhcmV9KS50aGVuKHU9Pih0aGlzLnJlcXVlc3RDb25maWcucmVzcG9uc2VNaWRkbGV3YXJlJiZ0aGlzLnJlcXVlc3RDb25maWcucmVzcG9uc2VNaWRkbGV3YXJlKHUpLHUuZGF0YSkpLmNhdGNoKHU9Pnt0aHJvdyB0aGlzLnJlcXVlc3RDb25maWcucmVzcG9uc2VNaWRkbGV3YXJlJiZ0aGlzLnJlcXVlc3RDb25maWcucmVzcG9uc2VNaWRkbGV3YXJlKHUpLHV9KX1zZXRIZWFkZXJzKHQpe3JldHVybiB0aGlzLnJlcXVlc3RDb25maWcuaGVhZGVycz10LHRoaXN9c2V0SGVhZGVyKHQsbil7Y29uc3R7aGVhZGVyczpyfT10aGlzLnJlcXVlc3RDb25maWc7cmV0dXJuIHI/clt0XT1uOnRoaXMucmVxdWVzdENvbmZpZy5oZWFkZXJzPXtbdF06bn0sdGhpc31zZXRFbmRwb2ludCh0KXtyZXR1cm4gdGhpcy51cmw9dCx0aGlzfX1jb25zdCBYZT1lPT5YKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdSxnO2NvbnN0e3F1ZXJ5OnQsdmFyaWFibGVzOm4sZmV0Y2hPcHRpb25zOnJ9PWUsaT1scihycigodT1lLm1ldGhvZCkhPW51bGw/dToicG9zdCIpKSxzPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksbz15aWVsZCBpKGUpLGM9eWllbGQgZHIobywoZz1yLmpzb25TZXJpYWxpemVyKSE9bnVsbD9nOlllKSxkPUFycmF5LmlzQXJyYXkoYyk/IWMuc29tZSgoe2RhdGE6Yn0pPT4hYik6ISFjLmRhdGEsZj1BcnJheS5pc0FycmF5KGMpfHwhYy5lcnJvcnN8fEFycmF5LmlzQXJyYXkoYy5lcnJvcnMpJiYhYy5lcnJvcnMubGVuZ3RofHxyLmVycm9yUG9saWN5PT09ImFsbCJ8fHIuZXJyb3JQb2xpY3k9PT0iaWdub3JlIjtpZihvLm9rJiZmJiZkKXtjb25zdCBFPShBcnJheS5pc0FycmF5KGMpLGMpLHtlcnJvcnM6Yn09RSx5PUVlKEUsWyJlcnJvcnMiXSkscD1yLmVycm9yUG9saWN5PT09Imlnbm9yZSI/eTpjO3JldHVybiBNZShrKHt9LHM/e2RhdGE6cH06cCkse2hlYWRlcnM6by5oZWFkZXJzLHN0YXR1czpvLnN0YXR1c30pfWVsc2V7Y29uc3QgYj10eXBlb2YgYz09InN0cmluZyI/e2Vycm9yOmN9OmM7dGhyb3cgbmV3IG1lKE1lKGsoe30sYikse3N0YXR1czpvLnN0YXR1cyxoZWFkZXJzOm8uaGVhZGVyc30pLHtxdWVyeTp0LHZhcmlhYmxlczpufSl9fSksaHI9KGUsdCxuLHIpPT57Y29uc3QgaT1yIT1udWxsP3I6WWU7aWYoIUFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGkuc3RyaW5naWZ5KHtxdWVyeTplLHZhcmlhYmxlczp0LG9wZXJhdGlvbk5hbWU6bn0pO2lmKHR5cGVvZiB0IT0idW5kZWZpbmVkIiYmIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY3JlYXRlIHJlcXVlc3QgYm9keSB3aXRoIGdpdmVuIHZhcmlhYmxlIHR5cGUsIGFycmF5IGV4cGVjdGVkIik7Y29uc3Qgcz1lLnJlZHVjZSgobyxjLGQpPT4oby5wdXNoKHtxdWVyeTpjLHZhcmlhYmxlczp0P3RbZF06dm9pZCAwfSksbyksW10pO3JldHVybiBpLnN0cmluZ2lmeShzKX0sZHI9KGUsdCk9PlgodGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBuO3JldHVybiBlLmhlYWRlcnMuZm9yRWFjaCgocixpKT0+e2kudG9Mb3dlckNhc2UoKT09PSJjb250ZW50LXR5cGUiJiYobj1yKX0pLG4mJihuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vanNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbCtqc29uIil8fG4udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCJhcHBsaWNhdGlvbi9ncmFwaHFsLXJlc3BvbnNlK2pzb24iKSk/dC5wYXJzZSh5aWVsZCBlLnRleHQoKSk6ZS50ZXh0KCl9KSxXZT1lPT50eXBlb2YgZT09ImZ1bmN0aW9uIj9lKCk6ZTt2YXIgWmU7KGZ1bmN0aW9uKGUpe2UuQmlsbGluZ1F1b3RhRXhjZWVkZWQ9IkJpbGxpbmdRdW90YUV4Y2VlZGVkIn0pKFplfHwoWmU9e30pKTtjb25zdCBwcj0xMCxtcj0xZTMseXI9NTAwLHZyPVtaZS5CaWxsaW5nUXVvdGFFeGNlZWRlZC50b1N0cmluZygpXSxncj1lPT57dmFyIG47cmV0dXJuKChuPWUucmVzcG9uc2UuZXJyb3JzKT09bnVsbD92b2lkIDA6bi5maW5kKHI9PnZyLmluY2x1ZGVzKHIubWVzc2FnZSkpKT09PXZvaWQgMH0sRXI9ZT0+e2NvbnN0IHQ9KG4scixpLHMsbz0wKT0+WCh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e3JldHVybiB5aWVsZCBuKCl9Y2F0Y2goYyl7aWYoYyBpbnN0YW5jZW9mIG1lJiYhZ3IoYykpdGhyb3cgYztpZihvPHByKXJldHVybiB5aWVsZCBuZXcgUHJvbWlzZShkPT5zZXRUaW1lb3V0KGQsbXIreXIqTWF0aC5wb3coMixvKSkpLHlpZWxkIHQobixyLGkscyxvKzEpO3Rocm93IGNvbnNvbGUuZXJyb3IoYGhpZ2hsaWdodC5pbzogWyR7ZXx8ZX1dIGRhdGEgcmVxdWVzdCBmYWlsZWQgYWZ0ZXIgJHtvfSByZXRyaWVzYCksY319KTtyZXR1cm4gdH0sX3I9NSxMdD0yZTMsVHI9WyJudW1iZXIiLCJzdHJpbmciLCJib29sZWFuIl07Y2xhc3MgYnJ7Y29uc3RydWN0b3IodCxuKXtodCh0aGlzLCJkZWJ1ZyIpO2h0KHRoaXMsIm5hbWUiKTt0aGlzLmRlYnVnPXQsdGhpcy5uYW1lPW59bG9nKC4uLnQpe2lmKHRoaXMuZGVidWcpe2xldCBuPWBbJHtEYXRlLm5vdygpfV1gO3RoaXMubmFtZSYmKG4rPWAgLSAke3RoaXMubmFtZX1gKSxjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtuLC4uLnRdKX19fXZhciBRPVVpbnQ4QXJyYXksVz1VaW50MTZBcnJheSxLZT1JbnQzMkFycmF5LGV0PW5ldyBRKFswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDAsMCwwLDBdKSx0dD1uZXcgUShbMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxMywwLDBdKSxQdD1uZXcgUShbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLEZ0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBXKDMxKSxyPTA7cjwzMTsrK3IpbltyXT10Kz0xPDxlW3ItMV07Zm9yKHZhciBpPW5ldyBLZShuWzMwXSkscj0xO3I8MzA7KytyKWZvcih2YXIgcz1uW3JdO3M8bltyKzFdOysrcylpW3NdPXMtbltyXTw8NXxyO3JldHVybntiOm4scjppfX0sQnQ9RnQoZXQsMiksTnI9QnQuYixudD1CdC5yO05yWzI4XT0yNTgsbnRbMjU4XT0yODtmb3IodmFyIHhyPUZ0KHR0LDApLE10PXhyLnIscnQ9bmV3IFcoMzI3NjgpLFA9MDtQPDMyNzY4OysrUCl7dmFyIGFlPShQJjQzNjkwKT4+MXwoUCYyMTg0NSk8PDE7YWU9KGFlJjUyNDI4KT4+MnwoYWUmMTMxMDcpPDwyLGFlPShhZSY2MTY4MCk+PjR8KGFlJjM4NTUpPDw0LHJ0W1BdPSgoYWUmNjUyODApPj44fChhZSYyNTUpPDw4KT4+MX1mb3IodmFyIHhlPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsaT0wLHM9bmV3IFcodCk7aTxyOysraSllW2ldJiYrK3NbZVtpXS0xXTt2YXIgbz1uZXcgVyh0KTtmb3IoaT0xO2k8dDsrK2kpb1tpXT1vW2ktMV0rc1tpLTFdPDwxO3ZhciBjO2lmKG4pe2M9bmV3IFcoMTw8dCk7dmFyIGQ9MTUtdDtmb3IoaT0wO2k8cjsrK2kpaWYoZVtpXSlmb3IodmFyIGY9aTw8NHxlW2ldLHU9dC1lW2ldLGc9b1tlW2ldLTFdKys8PHUsRT1nfCgxPDx1KS0xO2c8PUU7KytnKWNbcnRbZ10+PmRdPWZ9ZWxzZSBmb3IoYz1uZXcgVyhyKSxpPTA7aTxyOysraSllW2ldJiYoY1tpXT1ydFtvW2VbaV0tMV0rK10+PjE1LWVbaV0pO3JldHVybiBjfSxsZT1uZXcgUSgyODgpLFA9MDtQPDE0NDsrK1ApbGVbUF09ODtmb3IodmFyIFA9MTQ0O1A8MjU2OysrUClsZVtQXT05O2Zvcih2YXIgUD0yNTY7UDwyODA7KytQKWxlW1BdPTc7Zm9yKHZhciBQPTI4MDtQPDI4ODsrK1ApbGVbUF09ODtmb3IodmFyIFBlPW5ldyBRKDMyKSxQPTA7UDwzMjsrK1ApUGVbUF09NTt2YXIgQXI9eGUobGUsOSwwKSxJcj14ZShQZSw1LDApLCR0PWZ1bmN0aW9uKGUpe3JldHVybihlKzcpLzh8MH0sVXQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybih0PT1udWxsfHx0PDApJiYodD0wKSwobj09bnVsbHx8bj5lLmxlbmd0aCkmJihuPWUubGVuZ3RoKSxuZXcgUShlLnN1YmFycmF5KHQsbikpfSxyZT1mdW5jdGlvbihlLHQsbil7bjw8PXQmNzt2YXIgcj10Lzh8MDtlW3JdfD1uLGVbcisxXXw9bj4+OH0sQWU9ZnVuY3Rpb24oZSx0LG4pe248PD10Jjc7dmFyIHI9dC84fDA7ZVtyXXw9bixlW3IrMV18PW4+PjgsZVtyKzJdfD1uPj4xNn0saXQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0mJm4ucHVzaCh7czpyLGY6ZVtyXX0pO3ZhciBpPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFpKXJldHVybnt0Okd0LGw6MH07aWYoaT09MSl7dmFyIG89bmV3IFEoblswXS5zKzEpO3JldHVybiBvW25bMF0uc109MSx7dDpvLGw6MX19bi5zb3J0KGZ1bmN0aW9uKE0sSCl7cmV0dXJuIE0uZi1ILmZ9KSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBjPW5bMF0sZD1uWzFdLGY9MCx1PTEsZz0yO2ZvcihuWzBdPXtzOi0xLGY6Yy5mK2QuZixsOmMscjpkfTt1IT1pLTE7KWM9bltuW2ZdLmY8bltnXS5mP2YrKzpnKytdLGQ9bltmIT11JiZuW2ZdLmY8bltnXS5mP2YrKzpnKytdLG5bdSsrXT17czotMSxmOmMuZitkLmYsbDpjLHI6ZH07Zm9yKHZhciBFPXNbMF0ucyxyPTE7cjxpOysrcilzW3JdLnM+RSYmKEU9c1tyXS5zKTt2YXIgYj1uZXcgVyhFKzEpLHk9c3Qoblt1LTFdLGIsMCk7aWYoeT50KXt2YXIgcj0wLHA9MCx2PXktdCxOPTE8PHY7Zm9yKHMuc29ydChmdW5jdGlvbihILCQpe3JldHVybiBiWyQuc10tYltILnNdfHxILmYtJC5mfSk7cjxpOysrcil7dmFyIEM9c1tyXS5zO2lmKGJbQ10+dClwKz1OLSgxPDx5LWJbQ10pLGJbQ109dDtlbHNlIGJyZWFrfWZvcihwPj49djtwPjA7KXt2YXIgUj1zW3JdLnM7YltSXTx0P3AtPTE8PHQtYltSXSsrLTE6KytyfWZvcig7cj49MCYmcDstLXIpe3ZhciBMPXNbcl0ucztiW0xdPT10JiYoLS1iW0xdLCsrcCl9eT10fXJldHVybnt0Om5ldyBRKGIpLGw6eX19LHN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5zPT0tMT9NYXRoLm1heChzdChlLmwsdCxuKzEpLHN0KGUucix0LG4rMSkpOnRbZS5zXT1ufSxWdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGg7dCYmIWVbLS10XTspO2Zvcih2YXIgbj1uZXcgVygrK3QpLHI9MCxpPWVbMF0scz0xLG89ZnVuY3Rpb24oZCl7bltyKytdPWR9LGM9MTtjPD10OysrYylpZihlW2NdPT1pJiZjIT10KSsrcztlbHNle2lmKCFpJiZzPjIpe2Zvcig7cz4xMzg7cy09MTM4KW8oMzI3NTQpO3M+MiYmKG8ocz4xMD9zLTExPDw1fDI4NjkwOnMtMzw8NXwxMjMwNSkscz0wKX1lbHNlIGlmKHM+Myl7Zm9yKG8oaSksLS1zO3M+NjtzLT02KW8oODMwNCk7cz4yJiYobyhzLTM8PDV8ODIwOCkscz0wKX1mb3IoO3MtLTspbyhpKTtzPTEsaT1lW2NdfXJldHVybntjOm4uc3ViYXJyYXkoMCxyKSxuOnR9fSxJZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLHI9MDtyPHQubGVuZ3RoOysrciluKz1lW3JdKnRbcl07cmV0dXJuIG59LGp0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uLmxlbmd0aCxpPSR0KHQrMik7ZVtpXT1yJjI1NSxlW2krMV09cj4+OCxlW2krMl09ZVtpXV4yNTUsZVtpKzNdPWVbaSsxXV4yNTU7Zm9yKHZhciBzPTA7czxyOysrcyllW2krcys0XT1uW3NdO3JldHVybihpKzQrcikqOH0scXQ9ZnVuY3Rpb24oZSx0LG4scixpLHMsbyxjLGQsZix1KXtyZSh0LHUrKyxuKSwrK2lbMjU2XTtmb3IodmFyIGc9aXQoaSwxNSksRT1nLnQsYj1nLmwseT1pdChzLDE1KSxwPXkudCx2PXkubCxOPVZ0KEUpLEM9Ti5jLFI9Ti5uLEw9VnQocCksTT1MLmMsSD1MLm4sJD1uZXcgVygxOSksQT0wO0E8Qy5sZW5ndGg7KytBKSsrJFtDW0FdJjMxXTtmb3IodmFyIEE9MDtBPE0ubGVuZ3RoOysrQSkrKyRbTVtBXSYzMV07Zm9yKHZhciB4PWl0KCQsNyksaj14LnQsVj14LmwscT0xOTtxPjQmJiFqW1B0W3EtMV1dOy0tcSk7dmFyIFo9Zis1PDwzLGE9SWUoaSxsZSkrSWUocyxQZSkrbyxoPUllKGksRSkrSWUocyxwKStvKzE0KzMqcStJZSgkLGopKzIqJFsxNl0rMyokWzE3XSs3KiRbMThdO2lmKGQ+PTAmJlo8PWEmJlo8PWgpcmV0dXJuIGp0KHQsdSxlLnN1YmFycmF5KGQsZCtmKSk7dmFyIF8sSSx3LFM7aWYocmUodCx1LDErKGg8YSkpLHUrPTIsaDxhKXtfPXhlKEUsYiwwKSxJPUUsdz14ZShwLHYsMCksUz1wO3ZhciBjZT14ZShqLFYsMCk7cmUodCx1LFItMjU3KSxyZSh0LHUrNSxILTEpLHJlKHQsdSsxMCxxLTQpLHUrPTE0O2Zvcih2YXIgQT0wO0E8cTsrK0EpcmUodCx1KzMqQSxqW1B0W0FdXSk7dSs9MypxO2Zvcih2YXIgej1bQyxNXSxpZT0wO2llPDI7KytpZSlmb3IodmFyIHZlPXpbaWVdLEE9MDtBPHZlLmxlbmd0aDsrK0Epe3ZhciB0ZT12ZVtBXSYzMTtyZSh0LHUsY2VbdGVdKSx1Kz1qW3RlXSx0ZT4xNSYmKHJlKHQsdSx2ZVtBXT4+NSYxMjcpLHUrPXZlW0FdPj4xMil9fWVsc2UgXz1BcixJPWxlLHc9SXIsUz1QZTtmb3IodmFyIEE9MDtBPGM7KytBKXt2YXIgWT1yW0FdO2lmKFk+MjU1KXt2YXIgdGU9WT4+MTgmMzE7QWUodCx1LF9bdGUrMjU3XSksdSs9SVt0ZSsyNTddLHRlPjcmJihyZSh0LHUsWT4+MjMmMzEpLHUrPWV0W3RlXSk7dmFyIGdlPVkmMzE7QWUodCx1LHdbZ2VdKSx1Kz1TW2dlXSxnZT4zJiYoQWUodCx1LFk+PjUmODE5MSksdSs9dHRbZ2VdKX1lbHNlIEFlKHQsdSxfW1ldKSx1Kz1JW1ldfXJldHVybiBBZSh0LHUsX1syNTZdKSx1K0lbMjU2XX0sT3I9bmV3IEtlKFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLEd0PW5ldyBRKDApLFNyPWZ1bmN0aW9uKGUsdCxuLHIsaSxzKXt2YXIgbz1zLnp8fGUubGVuZ3RoLGM9bmV3IFEocitvKzUqKDErTWF0aC5jZWlsKG8vN2UzKSkraSksZD1jLnN1YmFycmF5KHIsYy5sZW5ndGgtaSksZj1zLmwsdT0ocy5yfHwwKSY3O2lmKHQpe3UmJihkWzBdPXMucj4+Myk7Zm9yKHZhciBnPU9yW3QtMV0sRT1nPj4xMyxiPWcmODE5MSx5PSgxPDxuKS0xLHA9cy5wfHxuZXcgVygzMjc2OCksdj1zLmh8fG5ldyBXKHkrMSksTj1NYXRoLmNlaWwobi8zKSxDPTIqTixSPWZ1bmN0aW9uKGx0KXtyZXR1cm4oZVtsdF1eZVtsdCsxXTw8Tl5lW2x0KzJdPDxDKSZ5fSxMPW5ldyBLZSgyNWUzKSxNPW5ldyBXKDI4OCksSD1uZXcgVygzMiksJD0wLEE9MCx4PXMuaXx8MCxqPTAsVj1zLnd8fDAscT0wO3grMjxvOysreCl7dmFyIFo9Uih4KSxhPXgmMzI3NjcsaD12W1pdO2lmKHBbYV09aCx2W1pdPWEsVjw9eCl7dmFyIF89by14O2lmKCgkPjdlM3x8aj4yNDU3NikmJihfPjQyM3x8IWYpKXt1PXF0KGUsZCwwLEwsTSxILEEsaixxLHgtcSx1KSxqPSQ9QT0wLHE9eDtmb3IodmFyIEk9MDtJPDI4NjsrK0kpTVtJXT0wO2Zvcih2YXIgST0wO0k8MzA7KytJKUhbSV09MH12YXIgdz0yLFM9MCxjZT1iLHo9YS1oJjMyNzY3O2lmKF8+MiYmWj09Uih4LXopKWZvcih2YXIgaWU9TWF0aC5taW4oRSxfKS0xLHZlPU1hdGgubWluKDMyNzY3LHgpLHRlPU1hdGgubWluKDI1OCxfKTt6PD12ZSYmLS1jZSYmYSE9aDspe2lmKGVbeCt3XT09ZVt4K3ctel0pe2Zvcih2YXIgWT0wO1k8dGUmJmVbeCtZXT09ZVt4K1ktel07KytZKTtpZihZPncpe2lmKHc9WSxTPXosWT5pZSlicmVhaztmb3IodmFyIGdlPU1hdGgubWluKHosWS0yKSx6dD0wLEk9MDtJPGdlOysrSSl7dmFyIGN0PXgteitJJjMyNzY3LFVyPXBbY3RdLFl0PWN0LVVyJjMyNzY3O1l0Pnp0JiYoenQ9WXQsaD1jdCl9fX1hPWgsaD1wW2FdLHorPWEtaCYzMjc2N31pZihTKXtMW2orK109MjY4NDM1NDU2fG50W3ddPDwxOHxNdFtTXTt2YXIgSnQ9bnRbd10mMzEsUXQ9TXRbU10mMzE7QSs9ZXRbSnRdK3R0W1F0XSwrK01bMjU3K0p0XSwrK0hbUXRdLFY9eCt3LCsrJH1lbHNlIExbaisrXT1lW3hdLCsrTVtlW3hdXX19Zm9yKHg9TWF0aC5tYXgoeCxWKTt4PG87Kyt4KUxbaisrXT1lW3hdLCsrTVtlW3hdXTt1PXF0KGUsZCxmLEwsTSxILEEsaixxLHgtcSx1KSxmfHwocy5yPXUmN3xkW3UvOHwwXTw8Myx1LT03LHMuaD12LHMucD1wLHMuaT14LHMudz1WKX1lbHNle2Zvcih2YXIgeD1zLnd8fDA7eDxvK2Y7eCs9NjU1MzUpe3ZhciB1dD14KzY1NTM1O3V0Pj1vJiYoZFt1Lzh8MF09Zix1dD1vKSx1PWp0KGQsdSsxLGUuc3ViYXJyYXkoeCx1dCkpfXMuaT1vfXJldHVybiBVdChjLDAsciskdCh1KStpKX0sd3I9ZnVuY3Rpb24oKXtmb3IodmFyIGU9bmV3IEludDMyQXJyYXkoMjU2KSx0PTA7dDwyNTY7Kyt0KXtmb3IodmFyIG49dCxyPTk7LS1yOyluPShuJjEmJi0zMDY2NzQ5MTIpXm4+Pj4xO2VbdF09bn1yZXR1cm4gZX0oKSxEcj1mdW5jdGlvbigpe3ZhciBlPS0xO3JldHVybntwOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1lLHI9MDtyPHQubGVuZ3RoOysrciluPXdyW24mMjU1XnRbcl1dXm4+Pj44O2U9bn0sZDpmdW5jdGlvbigpe3JldHVybn5lfX19LENyPWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWkmJihpPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IFEocy5sZW5ndGgrZS5sZW5ndGgpO28uc2V0KHMpLG8uc2V0KGUscy5sZW5ndGgpLGU9byxpLnc9cy5sZW5ndGh9cmV0dXJuIFNyKGUsdC5sZXZlbD09bnVsbD82OnQubGV2ZWwsdC5tZW09PW51bGw/TWF0aC5jZWlsKE1hdGgubWF4KDgsTWF0aC5taW4oMTMsTWF0aC5sb2coZS5sZW5ndGgpKSkqMS41KToxMit0Lm1lbSxuLHIsaSl9LG90PWZ1bmN0aW9uKGUsdCxuKXtmb3IoO247Kyt0KWVbdF09bixuPj4+PTh9LGtyPWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5maWxlbmFtZTtpZihlWzBdPTMxLGVbMV09MTM5LGVbMl09OCxlWzhdPXQubGV2ZWw8Mj80OnQubGV2ZWw9PTk/MjowLGVbOV09Myx0Lm10aW1lIT0wJiZvdChlLDQsTWF0aC5mbG9vcihuZXcgRGF0ZSh0Lm10aW1lfHxEYXRlLm5vdygpKS8xZTMpKSxuKXtlWzNdPTg7Zm9yKHZhciByPTA7cjw9bi5sZW5ndGg7KytyKWVbcisxMF09bi5jaGFyQ29kZUF0KHIpfX0sUnI9ZnVuY3Rpb24oZSl7cmV0dXJuIDEwKyhlLmZpbGVuYW1lP2UuZmlsZW5hbWUubGVuZ3RoKzE6MCl9O2Z1bmN0aW9uIExyKGUsdCl7dHx8KHQ9e30pO3ZhciBuPURyKCkscj1lLmxlbmd0aDtuLnAoZSk7dmFyIGk9Q3IoZSx0LFJyKHQpLDgpLHM9aS5sZW5ndGg7cmV0dXJuIGtyKGksdCksb3QoaSxzLTgsbi5kKCkpLG90KGkscy00LHIpLGl9dmFyIEh0PXR5cGVvZiBUZXh0RW5jb2RlciE9InVuZGVmaW5lZCImJm5ldyBUZXh0RW5jb2RlcixQcj10eXBlb2YgVGV4dERlY29kZXIhPSJ1bmRlZmluZWQiJiZuZXcgVGV4dERlY29kZXIsRnI9MDt0cnl7UHIuZGVjb2RlKEd0LHtzdHJlYW06ITB9KSxGcj0xfWNhdGNoKGUpe31mdW5jdGlvbiBCcihlLHQpe2lmKHQpe2Zvcih2YXIgbj1uZXcgUShlLmxlbmd0aCkscj0wO3I8ZS5sZW5ndGg7KytyKW5bcl09ZS5jaGFyQ29kZUF0KHIpO3JldHVybiBufWlmKEh0KXJldHVybiBIdC5lbmNvZGUoZSk7Zm9yKHZhciBpPWUubGVuZ3RoLHM9bmV3IFEoZS5sZW5ndGgrKGUubGVuZ3RoPj4xKSksbz0wLGM9ZnVuY3Rpb24odSl7c1tvKytdPXV9LHI9MDtyPGk7KytyKXtpZihvKzU+cy5sZW5ndGgpe3ZhciBkPW5ldyBRKG8rOCsoaS1yPDwxKSk7ZC5zZXQocykscz1kfXZhciBmPWUuY2hhckNvZGVBdChyKTtmPDEyOHx8dD9jKGYpOmY8MjA0OD8oYygxOTJ8Zj4+NiksYygxMjh8ZiY2MykpOmY+NTUyOTUmJmY8NTczNDQ/KGY9NjU1MzYrKGYmMTA0NzU1Mil8ZS5jaGFyQ29kZUF0KCsrcikmMTAyMyxjKDI0MHxmPj4xOCksYygxMjh8Zj4+MTImNjMpLGMoMTI4fGY+PjYmNjMpLGMoMTI4fGYmNjMpKTooYygyMjR8Zj4+MTIpLGMoMTI4fGY+PjYmNjMpLGMoMTI4fGYmNjMpKX1yZXR1cm4gVXQocywwLG8pfWNvbnN0IE1yPTFlMyoxNTtmdW5jdGlvbiAkcihlKXtyZXR1cm4gWCh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCBuZXcgUHJvbWlzZShuPT57Y29uc3Qgcj1uZXcgRmlsZVJlYWRlcjtyLm9ubG9hZD0oKT0+bihyLnJlc3VsdCksci5yZWFkQXNEYXRhVVJMKG5ldyBCbG9iKFtlXSkpfSk7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKCIsIikrMSl9KX1jb25zdCBGZT1zZWxmO2Z1bmN0aW9uIGF0KGUsdCl7Y29uc3Qgbj17fSxyPVtdLGk9W107Zm9yKGNvbnN0W3Msb11vZiBPYmplY3QuZW50cmllcyhlKSl7aWYobz09bnVsbCljb250aW51ZTtUci5pbmNsdWRlcyh0eXBlb2Ygbyl8fHIucHVzaCh7W3NdOm99KTtsZXQgYzt0eXBlb2Ygbz09InN0cmluZyI/Yz1vOmM9bmUobyksYy5sZW5ndGg+THQmJihpLnB1c2goe1tzXTpvfSksYz1jLnN1YnN0cmluZygwLEx0KSksbltzXT1jfXJldHVybiB0IT09InNlc3Npb24iJiYoci5sZW5ndGg+MCYmY29uc29sZS53YXJuKGBIaWdobGlnaHQgd2FzIHBhc3NlZCBvbmUgb3IgbW9yZSAke3R9IHByb3BlcnRpZXMgbm90IG9mIHR5cGUgc3RyaW5nLCBudW1iZXIsIG9yIGJvb2xlYW4uYCxyKSxpLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBleGNlZWRpbmcgMjAwMCBjaGFyYWN0ZXJzLCB3aGljaCB3aWxsIGJlIHRydW5jYXRlZC5gLGkpKSxufXtsZXQgZSx0LG4scj0wLGk9ITEscz0wLG89bmV3IGJyKCExLCJbd29ya2VyXSIpO2NvbnN0IGM9W10sZD0oKT0+cyE9PTAmJnI8X3ImJiEhKG4hPW51bGwmJm4ubGVuZ3RoKSxmPShwLHYpPT57RmUucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOkQuQ3VzdG9tRXZlbnQsdGFnOnAscGF5bG9hZDp2fX0pfSx1PXA9PlgodGhpcyxudWxsLGZ1bmN0aW9uKigpe2NvbnN0e2lkOnYsZXZlbnRzOk4sbWVzc2FnZXM6QyxlcnJvcnM6UixyZXNvdXJjZXNTdHJpbmc6TCx3ZWJTb2NrZXRFdmVudHNTdHJpbmc6TSxoYXNTZXNzaW9uVW5sb2FkZWQ6SCxoaWdobGlnaHRMb2dzOiR9PXAsQT1uZSh7bWVzc2FnZXM6Q30pO2xldCB4PXtzZXNzaW9uX3NlY3VyZV9pZDpuLHBheWxvYWRfaWQ6di50b1N0cmluZygpLGV2ZW50czp7ZXZlbnRzOk59LG1lc3NhZ2VzOkEscmVzb3VyY2VzOkwsd2ViX3NvY2tldF9ldmVudHM6TSxlcnJvcnM6Uixpc19iZWFjb246ITEsaGFzX3Nlc3Npb25fdW5sb2FkZWQ6SH07JCYmKHguaGlnaGxpZ2h0X2xvZ3M9JCk7Y29uc3Qgaj1CcihKU09OLnN0cmluZ2lmeSh4KSksVj1McihqKSxxPXlpZWxkICRyKFYpLFo9e3R5cGU6RC5Bc3luY0V2ZW50cyxpZDp2LGV2ZW50c1NpemU6ai5sZW5ndGgsY29tcHJlc3NlZFNpemU6cS5sZW5ndGh9O28ubG9nKGBQdXNoaW5nIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3Nlc3Npb25TZWN1cmVJRDpuLGlkOnYsZmlyc3RTSUQ6TWF0aC5taW4oLi4ueC5ldmVudHMuZXZlbnRzLm1hcCh3PT53PT1udWxsP3ZvaWQgMDp3Ll9zaWQpLmZpbHRlcih3PT4hIXcpKSxldmVudHNMZW5ndGg6eC5ldmVudHMuZXZlbnRzLmxlbmd0aCxtZXNzYWdlc0xlbmd0aDpDLmxlbmd0aCxyZXNvdXJjZXNMZW5ndGg6TC5sZW5ndGgsd2ViU29ja2V0TGVuZ3RoOk0ubGVuZ3RoLGVycm9yc0xlbmd0aDpSLmxlbmd0aCxidWZMZW5ndGg6ai5sZW5ndGgsY29tcHJlc3NlZExlbmd0aDpWLmxlbmd0aCxjb21wcmVzc2VkQmFzZTY0TGVuZ3RoOnEubGVuZ3RofSx2b2lkIDAsMil9YCk7Y29uc3QgYT1lLlB1c2hQYXlsb2FkQ29tcHJlc3NlZCh7c2Vzc2lvbl9zZWN1cmVfaWQ6bixwYXlsb2FkX2lkOnYudG9TdHJpbmcoKSxkYXRhOnF9KTtsZXQgaD1Qcm9taXNlLnJlc29sdmUoKTtjLmxlbmd0aCYmKGg9ZS5wdXNoTWV0cmljcyh7bWV0cmljczpjfSksYy5zcGxpY2UoMCkpO2xldCBfPXBlcmZvcm1hbmNlLm5vdygpO2NvbnN0IEk9c2V0SW50ZXJ2YWwoKCk9PntfJiZwZXJmb3JtYW5jZS5ub3coKS1fPk1yJiYoY29uc29sZS53YXJuKCJVcGxvYWRpbmcgcHVzaFBheWxvYWQgdG9vayB0b28gbG9uZywgc3RvcHBpbmcgcmVjb3JkaW5nIHRvIGF2b2lkIE9PTS4iKSxjbGVhckludGVydmFsKEkpLEZlLnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTpELlN0b3AscmVxdWVzdFN0YXJ0Ol8sYXN5bmNFdmVudHNSZXNwb25zZTpafX0pLEUoe3R5cGU6RC5Qcm9wZXJ0aWVzLHByb3BlcnRpZXNPYmplY3Q6e3N0b3BSZWFzb246IlB1c2ggUGF5bG9hZCBUaW1lb3V0In0scHJvcGVydHlUeXBlOnt0eXBlOiJ0cmFjayJ9fSkpfSwxMDApO3RyeXt5aWVsZCBQcm9taXNlLmFsbChbYSxoXSl9ZmluYWxseXtfPTAsY2xlYXJJbnRlcnZhbChJKX1GZS5wb3N0TWVzc2FnZSh7cmVzcG9uc2U6Wn0pfSksZz1wPT5YKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHt1c2VyT2JqZWN0OnYsdXNlcklkZW50aWZpZXI6Tixzb3VyY2U6Q309cDtDPT09InNlZ21lbnQiP2YoIlNlZ21lbnQgSWRlbnRpZnkiLG5lKGsoe3VzZXJJZGVudGlmaWVyOk59LHYpKSk6ZigiSWRlbnRpZnkiLG5lKGsoe3VzZXJJZGVudGlmaWVyOk59LHYpKSkseWllbGQgZS5pZGVudGlmeVNlc3Npb24oe3Nlc3Npb25fc2VjdXJlX2lkOm4sdXNlcl9pZGVudGlmaWVyOk4sdXNlcl9vYmplY3Q6YXQodiwidXNlciIpfSk7Y29uc3QgUj1DPT09InNlZ21lbnQiP0M6ImRlZmF1bHQiO28ubG9nKGBJZGVudGlmeSAoJHtOfSwgc291cmNlOiAke1J9KSB3LyBvYmo6ICR7bmUodil9IEAgJHt0fWApfSksRT1wPT5YKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtjb25zdHtwcm9wZXJ0aWVzT2JqZWN0OnYscHJvcGVydHlUeXBlOk59PXA7bGV0IEM7KHY9PW51bGw/dm9pZCAwOnYuY2xpY2tUZXh0Q29udGVudCkhPT12b2lkIDA/KEM9IkNsaWNrVGV4dENvbnRlbnQiLHlpZWxkIGUuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOm4scHJvcGVydGllc19vYmplY3Q6YXQodiwic2Vzc2lvbiIpfSkpOihOPT1udWxsP3ZvaWQgMDpOLnR5cGUpPT09InNlc3Npb24iPyhDPSJTZXNzaW9uIix5aWVsZCBlLmFkZFNlc3Npb25Qcm9wZXJ0aWVzKHtzZXNzaW9uX3NlY3VyZV9pZDpuLHByb3BlcnRpZXNfb2JqZWN0OmF0KHYsInNlc3Npb24iKX0pKTooTj09bnVsbD92b2lkIDA6Ti5zb3VyY2UpPT09InNlZ21lbnQiPyhDPSJTZWdtZW50IixmKCJTZWdtZW50IFRyYWNrIixuZSh2KSkpOihDPSJUcmFjayIsZihDLG5lKHYpKSksby5sb2coYEFkZGluZyAke0N9IFByb3BlcnRpZXMgdG8gc2Vzc2lvbiAoJHtufSkgdy8gb2JqOiAke0pTT04uc3RyaW5naWZ5KHYpfSBAICR7dH1gKX0pLGI9cD0+WCh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Yy5wdXNoKC4uLnAubWV0cmljcy5tYXAodj0+KHtuYW1lOnYubmFtZSx2YWx1ZTp2LnZhbHVlLHNlc3Npb25fc2VjdXJlX2lkOm4sY2F0ZWdvcnk6di5jYXRlZ29yeSxncm91cDp2Lmdyb3VwLHRpbWVzdGFtcDp2LnRpbWVzdGFtcC50b0lTT1N0cmluZygpLHRhZ3M6di50YWdzfSkpKX0pLHk9cD0+WCh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Y29uc3R7dGltZXN0YW1wOnYsdmVyYmF0aW06Tix1c2VyRW1haWw6Qyx1c2VyTmFtZTpSfT1wO3lpZWxkIGUuYWRkU2Vzc2lvbkZlZWRiYWNrKHtzZXNzaW9uX3NlY3VyZV9pZDpuLHRpbWVzdGFtcDp2LHZlcmJhdGltOk4sdXNlcl9lbWFpbDpDLHVzZXJfbmFtZTpSfSl9KTtGZS5vbm1lc3NhZ2U9ZnVuY3Rpb24ocCl7cmV0dXJuIFgodGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHAuZGF0YS5tZXNzYWdlLnR5cGU9PT1ELkluaXRpYWxpemUpe3Q9cC5kYXRhLm1lc3NhZ2UuYmFja2VuZCxuPXAuZGF0YS5tZXNzYWdlLnNlc3Npb25TZWN1cmVJRCxpPXAuZGF0YS5tZXNzYWdlLmRlYnVnLHM9cC5kYXRhLm1lc3NhZ2UucmVjb3JkaW5nU3RhcnRUaW1lLG8uZGVidWc9aSxlPW5yKG5ldyBmcih0LHtoZWFkZXJzOnt9fSksRXIobikpO3JldHVybn1pZihkKCkpdHJ5e3AuZGF0YS5tZXNzYWdlLnR5cGU9PT1ELkFzeW5jRXZlbnRzP3lpZWxkIHUocC5kYXRhLm1lc3NhZ2UpOnAuZGF0YS5tZXNzYWdlLnR5cGU9PT1ELklkZW50aWZ5P3lpZWxkIGcocC5kYXRhLm1lc3NhZ2UpOnAuZGF0YS5tZXNzYWdlLnR5cGU9PT1ELlByb3BlcnRpZXM/eWllbGQgRShwLmRhdGEubWVzc2FnZSk6cC5kYXRhLm1lc3NhZ2UudHlwZT09PUQuTWV0cmljcz95aWVsZCBiKHAuZGF0YS5tZXNzYWdlKTpwLmRhdGEubWVzc2FnZS50eXBlPT09RC5GZWVkYmFjayYmKHlpZWxkIHkocC5kYXRhLm1lc3NhZ2UpKSxyPTB9Y2F0Y2godil7aSYmY29uc29sZS5lcnJvcih2KSxyKz0xfX0pfX19KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1oaWdobGlnaHQtY2xpZW50LXdvcmtlci1EUmNneEVNUC5qcy5tYXAK",Zr=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),Tn=typeof window<"u"&&window.Blob&&new Blob([Zr(Ls)],{type:"text/javascript;charset=utf-8"});function yr(e){let t;try{if(t=Tn&&(window.URL||window.webkitURL).createObjectURL(Tn),!t)throw"";const i=new Worker(t,{name:e==null?void 0:e.name});return i.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),i}catch{return new Worker("data:text/javascript;base64,"+Ls,{name:e==null?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}var Vi;(function(e){e.BillingQuotaExceeded="BillingQuotaExceeded"})(Vi||(Vi={}));const Gr=10,Xr=1e3,Vr=500,Ir=[Vi.BillingQuotaExceeded.toString()],Wr=e=>{var t;return((t=e.response.errors)==null?void 0:t.find(i=>Ir.includes(i.message)))===void 0},gr=e=>{const t=(i,n,s,l,a=0)=>A(void 0,null,function*(){try{return yield i()}catch(r){if(r instanceof Oe&&!Wr(r))throw r;if(a<Gr)return yield new Promise(o=>setTimeout(o,Xr+Vr*Math.pow(2,a))),yield t(i,n,s,l,a+1);throw console.error(`highlight.io: [${e||e}] data request failed after ${a} retries`),r}});return t};var pe;(function(e){e[e.Initialize=0]="Initialize",e[e.AsyncEvents=1]="AsyncEvents",e[e.Identify=2]="Identify",e[e.Properties=3]="Properties",e[e.Metrics=4]="Metrics",e[e.Feedback=5]="Feedback",e[e.CustomEvent=6]="CustomEvent",e[e.Stop=7]="Stop"})(pe||(pe={}));class Sr{constructor(t,i){L(this,"debug"),L(this,"name"),this.debug=t,this.name=i}log(...t){if(this.debug){let i=`[${Date.now()}]`;this.name&&(i+=` - ${this.name}`),console.log.apply(console,[i,...t])}}}const Rr=30,fr=()=>new Promise(e=>requestAnimationFrame(t=>requestAnimationFrame(i=>e(i-t)))),Cr=()=>A(void 0,null,function*(){const e=[];for(let t=0;t<Rr;t++)e.push(yield fr());return e.reduce((t,i)=>t+i,0)/e.length}),kr=(e,t)=>{let i={},n=16.666666666666668;Cr().then(o=>n=o);const s=o=>{var c;i!=null&&i.event||(i={event:o,location:window.location.href,timerStart:(c=window.performance)==null?void 0:c.now()},window.requestAnimationFrame(l))},l=()=>{if(!(i!=null&&i.timerStart))return;const o=window.performance.now()-i.timerStart-n;a(o),i={}},a=o=>{const c=(new Date().getTime()-t)/1e3;e({relativeTimestamp:c,jankAmount:o,querySelector:r(),newLocation:window.location.href!=i.location?window.location.href:void 0})},r=()=>{var o;return(o=i==null?void 0:i.event)!=null&&o.target?Is(i.event.target):""};return window.addEventListener("click",s,!0),window.addEventListener("keydown",s,!0),()=>{window.removeEventListener("keydown",s,!0),window.removeEventListener("click",s,!0)}},wn="iframe parent ready",xn="iframe ok",et=(e,t)=>{console.warn(`Highlight Warning: (${e}): `,{output:t})};var Ht;(function(e){e.CLIENT_ID="highlightClientID"})(Ht||(Ht={}));class Js{constructor(t,i){L(this,"options"),L(this,"isRunningOnHighlight"),L(this,"organizationID"),L(this,"graphqlSDK"),L(this,"events"),L(this,"sessionData"),L(this,"ready"),L(this,"manualStopped"),L(this,"state"),L(this,"logger"),L(this,"enableSegmentIntegration"),L(this,"privacySetting"),L(this,"enableCanvasRecording"),L(this,"enablePerformanceRecording"),L(this,"samplingStrategy"),L(this,"inlineImages"),L(this,"inlineStylesheet"),L(this,"debugOptions"),L(this,"listeners"),L(this,"firstloadVersion"),L(this,"environment"),L(this,"sessionShortcut"),L(this,"appVersion"),L(this,"serviceName"),L(this,"_worker"),L(this,"_optionsInternal"),L(this,"_backendUrl"),L(this,"_recordingStartTime"),L(this,"_isOnLocalHost"),L(this,"_onToggleFeedbackFormVisibility"),L(this,"_firstLoadListeners"),L(this,"_isCrossOriginIframe"),L(this,"_eventBytesSinceSnapshot"),L(this,"_lastSnapshotTime"),L(this,"_lastVisibilityChangeTime"),L(this,"pushPayloadTimerId"),L(this,"hasSessionUnloaded"),L(this,"hasPushedData"),L(this,"reloaded"),L(this,"_hasPreviouslyInitialized"),L(this,"_recordStop");var n,s,l,a,r;t.sessionSecureID||(t.sessionSecureID=Dt()),this.options=t,typeof((n=this.options)==null?void 0:n.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(l=(s=this.options)==null?void 0:s.debug)!=null?l:{},this.logger=new Sr(this.debugOptions.clientInteractions),t.storageMode&&(this.logger.log(`initializing in ${t.storageMode} session mode`),xs(t.storageMode)),Ks(!(t!=null&&t.skipCookieSessionDataLoad)),this._worker=new yr,this._worker.onmessage=c=>{var d,u,h;((d=c.data.response)==null?void 0:d.type)===pe.AsyncEvents?(this._eventBytesSinceSnapshot+=c.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${c.data.response.id} size ${c.data.response.eventsSize} bytes, compression ratio ${c.data.response.eventsSize/c.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((u=c.data.response)==null?void 0:u.type)===pe.CustomEvent?this.addCustomEvent(c.data.response.tag,c.data.response.payload):((h=c.data.response)==null?void 0:h.type)===pe.Stop&&(et("Stopping recording due to worker failure",c.data.response),this.stopRecording(!1))};let o=Ki();if(this.reloaded=!1,!((a=this.sessionData)!=null&&a.sessionSecureID)&&o!=null&&o.sessionSecureID)this.sessionData=o,this.options.sessionSecureID=o.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const c of Object.values(Xe))Ui(c);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,payloadID:1,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=i||new we(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch{this._isCrossOriginIframe=(r=this.options.recordCrossOriginIframe)!=null?r:!0}this._initMembers(this.options)}static create(t){return new Js(t)}_reset(t){return A(this,arguments,function*({forceNew:i}){this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0);let n,s;if(!i)try{n=Ge(Xe.USER_IDENTIFIER);const l=Ge(Xe.USER_OBJECT);l&&(s=JSON.parse(l))}catch{}for(const l of Object.values(Xe))Ui(l);this.sessionData.sessionSecureID=Dt(),this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this.stopRecording(),this._firstLoadListeners=new we(this.options),yield this.initialize(),n&&s&&this.identify(n,s)})}_initMembers(t){var i,n,s,l,a,r,o,c,d,u,h;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!t.enableSegmentIntegration,this.privacySetting=(i=t.privacySetting)!=null?i:"default",this.enableCanvasRecording=(n=t.enableCanvasRecording)!=null?n:!1,this.enablePerformanceRecording=(s=t.enablePerformanceRecording)!=null?s:!0,this.inlineImages=(l=t.inlineImages)!=null?l:this._isOnLocalHost,this.inlineStylesheet=(a=t.inlineStylesheet)!=null?a:!0,this.samplingStrategy=f({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:Us()},(r=t.samplingStrategy)!=null?r:{canvas:2}),this._backendUrl=(o=t==null?void 0:t.backendUrl)!=null?o:"https://pub.highlight.io",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const p=new ba(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=Ta(p,gr(((c=this.sessionData)==null?void 0:c.sessionSecureID)||((d=this.options)==null?void 0:d.sessionSecureID))),this.environment=(u=t.environment)!=null?u:"production",this.appVersion=t.appVersion,this.serviceName=(h=t.serviceName)!=null?h:"",typeof t.organizationID=="string"?this.organizationID=t.organizationID:this.organizationID=t.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=t.firstloadVersion||"unknown",this.sessionShortcut=t.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const b=t,Z=Ne(b,["firstloadVersion"]);this._optionsInternal=Z,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime()}identify(t,i={},n){if(!t||t===""){console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:t,user_object:i});return}this.sessionData.userIdentifier=t.toString(),this.sessionData.userObject=i,Je(Xe.USER_IDENTIFIER,t.toString()),Je(Xe.USER_OBJECT,JSON.stringify(i)),this._worker.postMessage({message:{type:pe.Identify,userIdentifier:t,userObject:i,source:n}})}pushCustomError(t,i){return this.consumeCustomError(new Error(t),void 0,i)}consumeCustomError(t,i,n){let s={};if(n)try{s=f(f({},JSON.parse(n)),s)}catch{}return this.consumeError(t,{message:i,payload:s})}consumeError(t,{message:i,payload:n,source:s,type:l}){var a,r,o,c;t.cause&&(n=Re(f({},n),{"exception.cause":t.cause}));let d=i?i+":"+t.message:t.message;l==="React.ErrorBoundary"&&(d="ErrorBoundary: "+d);const u=Fs.parse(t);this._firstLoadListeners.errors.push({event:d,type:l??"custom",url:window.location.href,source:s??"",lineNumber:(a=u[0])!=null&&a.lineNumber?(r=u[0])==null?void 0:r.lineNumber:0,columnNumber:(o=u[0])!=null&&o.columnNumber?(c=u[0])==null?void 0:c.columnNumber:0,stackTrace:u,timestamp:new Date().toISOString(),payload:JSON.stringify(n)})}addProperties(t={},i){const n=f({},t);Object.entries(n).forEach(([s,l])=>{try{structuredClone(l)}catch{delete n[s]}}),this._worker.postMessage({message:{type:pe.Properties,propertiesObject:n,propertyType:i}})}initialize(t){return A(this,null,function*(){var i,n,s,l,a,r,o,c,d;if(this.logger.log("Initializing...",t,this.sessionData,this.options),navigator!=null&&navigator.webdriver&&!window.Cypress||(i=navigator==null?void 0:navigator.userAgent)!=null&&i.includes("Googlebot")||(n=navigator==null?void 0:navigator.userAgent)!=null&&n.includes("AdsBot")){(s=this._firstLoadListeners)==null||s.stopListening();return}try{if(t!=null&&t.forceNew){yield this._reset(t);return}this.sessionData=(l=Ki(this.sessionData.sessionSecureID))!=null?l:this.sessionData,(a=this.sessionData)!=null&&a.sessionStartTime?this._recordingStartTime=(r=this.sessionData)==null?void 0:r.sessionStartTime:(this._recordingStartTime=new Date().getTime(),this.sessionData.sessionStartTime=this._recordingStartTime),_t(""),qe(this.sessionData);let u=Ge(Ht.CLIENT_ID);u||(u=Dt(),Je(Ht.CLIENT_ID,u));let h;this.options.disableSessionRecording||this.options.disableNetworkRecording!==void 0||typeof this.options.networkRecording=="boolean"?h=!1:h=((o=this.options.networkRecording)==null?void 0:o.recordHeadersAndBody)||!1;let p=[];if(typeof this.options.networkRecording=="object"&&(c=this.options.networkRecording.destinationDomains)!=null&&c.length&&(p=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const I=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:h,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:u,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,client_id:u,network_recording_domains:p,disable_session_recording:this.options.disableSessionRecording});if(I.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${I.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=I.initializeSession.secure_id,this.sessionData.projectID=parseInt(((d=I==null?void 0:I.initializeSession)==null?void 0:d.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID){console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData);return}}if(this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:pe.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}}),this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||we.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},Fi)),this.options.disableSessionRecording){this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",this.manualStopped=!1;return}const{getDeviceDetails:b}=rr();b&&this.recordMetric([{name:xe.DeviceMemory,value:b().deviceMemory,category:be.Device,group:window.location.href}]);const Z=(I,G)=>{G&&this.logger.log("received isCheckout emit",{event:I}),this.events.push(I)};Z.bind(this);const S=!!this._recordStop;this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[y,W]=wa(this.privacySetting);this._recordStop=Ve({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:Z,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:y,maskInputOptions:W,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:I=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,collectFonts:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[la()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:et}:void 0}),S||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(u){this._isOnLocalHost&&(console.error(u),et("initializeSession",u))}})}_visibilityHandler(t){return A(this,null,function*(){if(this.manualStopped){this.logger.log("Ignoring visibility event due to manual stop.");return}new Date().getTime()-this._lastVisibilityChangeTime<Ms||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${t?"hidden":"visible"}.`),t?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return A(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(t=>{const i=n=>{if(n.data.highlight===wn){const s=n.data;this.logger.log("highlight got window message ",s),this.sessionData.projectID=s.projectID,this.sessionData.sessionSecureID=s.sessionSecureID,window.parent.postMessage({highlight:xn},"*"),window.removeEventListener("message",i),t()}};window.addEventListener("message",i)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(t=>{var i;(i=t.contentWindow)==null||i.postMessage({highlight:wn,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},Fi),window.addEventListener("message",t=>{t.data.highlight===xn&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var t;try{const n=this;this.enableSegmentIntegration&&this.listeners.push(Ka(l=>{if(l.type==="track"){const a={};a["segment-event"]=l.event,n.addProperties(a,{type:"track",source:"segment"})}else if(l.type==="identify"){const a=l.userId.replace(/^"(.*)"$/,"$1");n.identify(a,l.traits,"segment")}})),this.listeners.push(oa(l=>{this.reloaded?(this.addCustomEvent("Reload",l),this.reloaded=!1,n.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",l),n.addProperties({"visited-url":l},{type:"session"})})),this.listeners.push(xa(l=>{this.addCustomEvent("Viewport",l),this.submitViewportMetrics(l)})),this.listeners.push(Ha((l,a)=>{l&&this.addCustomEvent("Click",l);let r=null,o=null;if(a&&a.target){const c=a.target;r=Is(c),o=c.textContent,o&&o.length>2e3&&(o=o.substring(0,2e3))}n.addProperties({clickTextContent:o,clickSelector:r},{type:"session"})})),this.listeners.push(Ma(l=>{l&&this.addCustomEvent("Focus",l)})),this.listeners.push(ar(l=>{const{name:a,value:r}=l;this.recordMetric([{name:a,value:r,group:window.location.href,category:be.WebVital}])})),this.sessionShortcut&&za(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push(ur(l=>{this.addCustomEvent("Performance",At(l)),this.recordMetric(Object.entries(l).map(([a,r])=>r?{name:a,value:r,category:be.Performance,group:window.location.href}:void 0).filter(a=>a))},this._recordingStartTime)),this.listeners.push(kr(l=>{this.addCustomEvent("Jank",At(l)),this.recordMetric([{name:"Jank",value:l.jankAmount,category:be.WebVital,group:l.querySelector}])},this._recordingStartTime))),this._hasPreviouslyInitialized||((t=window.electron)!=null&&t.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:l})=>{this._visibilityHandler(!l)}),this.logger.log("Set up Electron highlight.run events.")):(mr(l=>this._visibilityHandler(l)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const s=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",s),this.listeners.push(()=>window.removeEventListener("beforeunload",s))}catch(n){this._isOnLocalHost&&(console.error(n),et("initializeSession _setupWindowListeners",n))}const i=()=>{this.addCustomEvent("Page Unload",""),_t(this.sessionData.sessionSecureID),qe(this.sessionData)};if(window.addEventListener("beforeunload",i),this.listeners.push(()=>window.removeEventListener("beforeunload",i)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const n=()=>{this.addCustomEvent("Page Unload",""),_t(this.sessionData.sessionSecureID),qe(this.sessionData)};window.addEventListener("pagehide",n),this.listeners.push(()=>window.removeEventListener("beforeunload",n))}}submitViewportMetrics({height:t,width:i,availHeight:n,availWidth:s}){this.recordMetric([{name:xe.ViewportHeight,value:t,category:be.Device,group:window.location.href},{name:xe.ViewportWidth,value:i,category:be.Device,group:window.location.href},{name:xe.ScreenHeight,value:n,category:be.Device,group:window.location.href},{name:xe.ScreenWidth,value:s,category:be.Device,group:window.location.href},{name:xe.ViewportArea,value:t*i,category:be.Device,group:window.location.href}])}recordMetric(t){this._worker.postMessage({message:{type:pe.Metrics,metrics:t.map(i=>Re(f({},i),{tags:i.tags||[],group:i.group||window.location.href,category:i.category||be.Frontend,timestamp:new Date}))}})}stopRecording(t){this.manualStopped=!!t,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",t&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(i=>i()),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const t=new Date().getTime(),{projectID:i,sessionSecureID:n}=this.sessionData,s=(t-this._recordingStartTime)/1e3;return`https://${Hi}/${i}/sessions/${n}?ts=${s}`}getCurrentSessionURL(){const t=this.sessionData.projectID,i=this.sessionData.sessionSecureID;return t&&i?`https://${Hi}/${t}/sessions/${i}`:null}snapshot(t){return A(this,null,function*(){yield Ve.snapshotCanvas(t)})}addSessionFeedback({timestamp:t,verbatim:i,user_email:n,user_name:s}){var l;this._worker.postMessage({message:{type:pe.Feedback,verbatim:i,timestamp:t,userName:s||this.sessionData.userIdentifier,userEmail:n||((l=this.sessionData.userObject)==null?void 0:l.name)}})}_save(){return A(this,null,function*(){var t;try{this.state==="Recording"&&this.listeners&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>zs&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({}));let i;((t=this.options)==null?void 0:t.sendMode)==="local"&&(i=n=>A(this,null,function*(){let s=new Blob([JSON.stringify({query:Hn(Xs),variables:n})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:s}),0})),yield this._sendPayload({sendFn:i}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now(),qe(this.sessionData)}catch(i){this._isOnLocalHost&&(console.error(i),et("_save",i))}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},Bs))})}addCustomEvent(t,i){if(this.state==="NotRecording"){let n;const s=()=>{clearInterval(n),this.state==="Recording"&&this.events.length>0?pn(t,i):n=setTimeout(s,500)};n=setTimeout(s,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&pn(t,i)}_sendPayload(t){return A(this,arguments,function*({sendFn:i}){const n=we.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),s=we.getRecordedWebSocketEvents(this._firstLoadListeners),l=[...this.events],a=[...this._firstLoadListeners.messages],r=[...this._firstLoadListeners.errors],{bytes:o,time:c}=this.enableCanvasRecording?Mi.canvas:Mi.normal;this._eventBytesSinceSnapshot>=o&&new Date().getTime()-this._lastSnapshotTime>=c&&this.takeFullSnapshot(),this.logger.log(`Sending: ${l.length} events, ${a.length} messages, ${n.length} network resources, ${r.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const d=hr();i?yield i({session_secure_id:this.sessionData.sessionSecureID,payload_id:this.sessionData.payloadID.toString(),events:{events:l},messages:At({messages:a}),resources:JSON.stringify({resources:n}),web_socket_events:JSON.stringify({webSocketEvents:s}),errors:r,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded}):this._worker.postMessage({message:{type:pe.AsyncEvents,id:this.sessionData.payloadID++,events:l,messages:a,errors:r,resourcesString:JSON.stringify({resources:n}),webSocketEventsString:JSON.stringify({webSocketEvents:s}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:d}}),qe(this.sessionData),we.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(l.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(a.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(r.length),br(d)})}takeFullSnapshot(){this.logger.log("taking full snapshot",{bytesSinceSnapshot:this._eventBytesSinceSnapshot,lastSnapshotTime:this._lastSnapshotTime}),Ve.takeFullSnapshot(!0),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}}export{we as FirstLoadListeners,Dt as GenerateSecureID,Js as Highlight,et as HighlightWarning,be as MetricCategory,Ki as getPreviousSessionData,Jr as getTracer,Nr as setupBrowserTracing};
